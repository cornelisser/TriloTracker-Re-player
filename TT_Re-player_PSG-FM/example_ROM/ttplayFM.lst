Sjasm Z80 Assembler v0.42b8 - www.xl2s.tk             [2023.05.01 - 15:02:32]

main.asm
Errors: 0

       1   00:0000                      	defpage	0,0x4000, 0x8000		; page 0 contains main code + far call routines
       2   00:0000                      
       3   00:0000                      ; -----------------------------
       4   00:0000                      ; TT-replayer example
       5   00:0000                      ; 
       6   00:0000                      ; This example plays compiled PSG+FM songs
       7   00:0000                      ; ------------------------------
       8   00:0000                      
       9   00:0000                      	include	"ttreplayFM_options.asm"
       1.  00:0000                      ; Compile options:
       2.  00:0000                      define MSX2				; Used in speed equalization
       3.  00:0000                      
       4.  00:0000                      ;define TAIL_ON			; Limit volume to 1
       5.  00:0000                      
       6.  00:0000                      ;--- Only set 1 of the settings below for the period table
       7.  00:0000                      define PERIOD_A440		; Modern 
       8.  00:0000                      ;define PERIOD_A432		; Earth
       9.  00:0000                      ;define PERIOD_A445		; Konami
      10.  00:0000                      ;define PERIOD_A448		; Classical
      11.  00:0000                      
      12.  00:0000                      ;define SFXPLAY_ENABLED	      ; Enable the SFX functionality.
      13.  00:0000                      
      14.  00:0000                      ;---- Performance option
      15.  00:0000                      ;define TREMOLO_OFF		; removes tremolo code making the replayer a little bit faster
      10   00:0000                      
      11   00:0000  (00)                	page 0
      12   00:4000                      	code page 0
      13   00:4000                      	
      14   00:4000                      	org	04000h
      15   00:4000  41 42               	db	041h,042h
      16   00:4002  10 40               	dw	initmain
      17   00:4004                      	dz 	'TTDEMO'
      17   00:4004  54 54 44 45 4D 4F 00 
      18   00:400B  00 (5)              	ds	5
      19   00:4010                      		
      20   00:4010                      initmain:
      21   00:4010  F3                  	di
      22   00:4011                      		
      23   00:4011                      ;; set pages and subslot
      24   00:4011  CD 38 01            	call    0x138
      25   00:4014  0F                  	rrca
      26   00:4015  0F                  	rrca
      27   00:4016  E6 03               	and     0x03
      28   00:4018  4F                  	ld      c,a
      29   00:4019  06 00               	ld      b,0
      30   00:401B  21 C1 FC            	ld      hl,0xfcc1
      31   00:401E  09                  	add     hl,bc
      32   00:401F  B6                  	or      (hl)
      33   00:4020  47                  	ld      b,a
      34   00:4021  23                  	inc     hl
      35   00:4022  23                  	inc     hl
      36   00:4023  23                  	inc     hl
      37   00:4024  23                  	inc     hl
      38   00:4025  7E                  	ld      a,(hl)
      39   00:4026  E6 0C               	and     0x0c
      40   00:4028  B0                  	or      b
      41   00:4029                          
      42   00:4029  26 80               	ld      h,0x80
      43   00:402B  CD 24 00            	call    0x24        
      44   00:402E                      	
      45   00:402E                      	;--- place replayer on hook
      46   00:402E  3E C3               	ld	a,0xc3
      47   00:4030  21 5A 40            	ld	hl,isr
      48   00:4033  32 9A FD            	ld	(0xFD9A),a
      49   00:4036  22 9B FD            	ld	(0xFD9B),hl	
      50   00:4039                      	
      51   00:4039                      	;clear RAM (first kb only)
      52   00:4039  01 00 04            	ld	bc,1024
      53   00:403C  21 00 C0            	ld	hl,0xc000
      54   00:403F  11 01 C0            	ld	de,0xc001
      55   00:4042  36 00               	ld	(hl),0
      56   00:4044  ED B0               	ldir	
      57   00:4046                      
      58   00:4046                            ;--- Detect and init opll
      59   00:4046  CD 63 40            	call	MSXMusic_Detect
      60   00:4049                      
      61   00:4049                      
      62   00:4049                      	;--- initialise replayer
      63   00:4049  CD C8 43            	call	replay_init
      64   00:404C  CD 8A 44                  call	replay_equalization_on
      65   00:404F                      
      66   00:404F  21 F1 54            	ld	hl,demo_song
      67   00:4052  CD A6 44            	call	replay_loadsong
      68   00:4055                      
      69   00:4055  FB                  	ei
      70   00:4056                      
      71   00:4056                      infinite:
      72   00:4056  76                  	halt	
      73   00:4057  C3 56 40            	jp	infinite
      74   00:405A                      	
      75   00:405A                      	
      76   00:405A                      isr:
      77   00:405A  DB 99               	in	a,(0x99)
      78   00:405C  CD B8 4F            	call	replay_route		; first outout data
      79   00:405F  CD 6B 45            	call	replay_play			; calculate next output
      80   00:4062  C9                  	ret
      81   00:4063                      	
      82   00:4063                      	include     "..\code\fmdetect.asm"
       1.  00:4063                      ;=======================================
       2.  00:4063                      ; opll detection routine
       3.  00:4063                      ; taken from Grauw in a forum post on MRC
       4.  00:4063                      ; https://www.msx.org/forum/msx-talk/development/how-to-detect-sound-chips-without-bios?page=3
       5.  00:4063                      ;=======================================
       6.  00:4063  (00:000C)           RDSLT: equ 0CH
       7.  00:4063  (00:0014)           WRSLT: equ 14H
       8.  00:4063  (00:FCC1)           EXPTBL: equ 0FCC1H
       9.  00:4063                      
      10.  00:4063  (00:4018)           MSXMusic_ID_ADDRESS: equ 4018H
      11.  00:4063  (00:7FF6)           MSXMusic_ENABLE_ADDRESS: equ 7FF6H
      12.  00:4063                      
      13.  00:4063                      ;====================================================
      14.  00:4063                      ; This code returns: 
      15.  00:4063                      ; f <- c: found
      16.  00:4063                      ; a <- slot
      17.  00:4063                      ; b <- 0: external, -1: internal
      18.  00:4063                      MSXMusic_Detect:
      19.  00:4063  21 75 40                ld hl,MSXMusic_MatchInternalID
      20.  00:4066  CD A4 40                call Memory_SearchSlots
      21.  00:4069  06 FF                   ld b,-1
      22.  00:406B  D8                      ret c
      23.  00:406C  21 81 40                ld hl,MSXMusic_MatchExternalID
      24.  00:406F  CD A4 40                call Memory_SearchSlots
      25.  00:4072  06 00                   ld b,0
      26.  00:4074  C9                      ret
      27.  00:4075                      
      28.  00:4075                      ; a = slot id
      29.  00:4075                      ; f <- c: found
      30.  00:4075                      MSXMusic_MatchInternalID:
      31.  00:4075  11 EF 40                ld de,MSXMusic_internalId
      32.  00:4078  21 18 40                ld hl,MSXMusic_ID_ADDRESS
      33.  00:407B  01 08 00                ld bc,8
      34.  00:407E  C3 D2 40                jp Memory_MatchSlotString
      35.  00:4081                      
      36.  00:4081                      ; a = slot id
      37.  00:4081                      ; f <- c: found
      38.  00:4081                      MSXMusic_MatchExternalID:
      39.  00:4081  11 F7 40                ld de,MSXMusic_externalId
      40.  00:4084  21 1C 40                ld hl,MSXMusic_ID_ADDRESS + 4
      41.  00:4087  01 04 00                ld bc,4
      42.  00:408A  CD D2 40                call Memory_MatchSlotString
      43.  00:408D  D0                      ret nc
      44.  00:408E  F5                      push af
      45.  00:408F  21 F6 7F                ld hl,MSXMusic_ENABLE_ADDRESS
      46.  00:4092  CD 0C 00                call RDSLT
      47.  00:4095  FB                      ei
      48.  00:4096  CB C7                   set 0,a
      49.  00:4098  5F                      ld e,a
      50.  00:4099  F1                      pop af
      51.  00:409A  F5                      push af
      52.  00:409B  21 F6 7F                ld hl,MSXMusic_ENABLE_ADDRESS
      53.  00:409E  CD 14 00                call WRSLT
      54.  00:40A1  FB                      ei
      55.  00:40A2  F1                      pop af
      56.  00:40A3  C9                      ret
      57.  00:40A4                      
      58.  00:40A4                      ; Search all slots and subslots for a match.
      59.  00:40A4                      ; Invoke Continue to continue searching where a previous search left off.
      60.  00:40A4                      ; hl = detection routine (receives a = slot ID, can modify all)
      61.  00:40A4                      ; f <- c: found
      62.  00:40A4                      ; a <- slot number
      63.  00:40A4                      ; Modifies: af, bc, de
      64.  00:40A4                      Memory_SearchSlots:
      65.  00:40A4  3E 00                   ld a,0
      66.  00:40A6                      Memory_SearchSlots_PrimaryLoop:
      67.  00:40A6  EB                      ex de,hl
      68.  00:40A7  21 C1 FC                ld hl,EXPTBL
      69.  00:40AA  06 00                   ld b,0
      70.  00:40AC  4F                      ld c,a
      71.  00:40AD  09                      add hl,bc
      72.  00:40AE  7E                      ld a,(hl)
      73.  00:40AF  EB                      ex de,hl
      74.  00:40B0  E6 80                   and 10000000B
      75.  00:40B2  B1                      or c
      76.  00:40B3                      Memory_SearchSlots_SecondaryLoop:
      77.  00:40B3  F5                      push af
      78.  00:40B4  E5                      push hl
      79.  00:40B5  CD D1 40                call Memory_SearchSlots_JumpHL
      80.  00:40B8  E1                      pop hl
      81.  00:40B9  DA CE 40                jp c,Memory_SearchSlots_Found
      82.  00:40BC  F1                      pop af
      83.  00:40BD                      Memory_SearchSlots_Continue:
      84.  00:40BD  C6 04                   add a,00000100B
      85.  00:40BF  F2 C7 40                jp p,Memory_SearchSlots_NextPrimary
      86.  00:40C2  CB 67                   bit 4,a
      87.  00:40C4  CA B3 40                jp z,Memory_SearchSlots_SecondaryLoop
      88.  00:40C7                      Memory_SearchSlots_NextPrimary:
      89.  00:40C7  3C                      inc a
      90.  00:40C8  E6 03                   and 00000011B
      91.  00:40CA  C8                      ret z  ; not found
      92.  00:40CB  C3 A6 40                jp Memory_SearchSlots_PrimaryLoop
      93.  00:40CE                      Memory_SearchSlots_Found:
      94.  00:40CE  F1                      pop af
      95.  00:40CF  37                      scf
      96.  00:40D0  C9                      ret
      97.  00:40D1                      Memory_SearchSlots_JumpHL:
      98.  00:40D1  E9                      jp hl
      99.  00:40D2                      
     100.  00:40D2                      ; a = slot
     101.  00:40D2                      ; bc = string length
     102.  00:40D2                      ; de = string
     103.  00:40D2                      ; hl = address
     104.  00:40D2                      ; f <- c: found
     105.  00:40D2                      ; Modifies: f, bc, de, hl
     106.  00:40D2                      Memory_MatchSlotString:
     107.  00:40D2  F5                      push af
     108.  00:40D3  C5                      push bc
     109.  00:40D4  D5                      push de
     110.  00:40D5  CD 0C 00                call RDSLT
     111.  00:40D8  FB                      ei
     112.  00:40D9  D1                      pop de
     113.  00:40DA  C1                      pop bc
     114.  00:40DB  EB                      ex de,hl
     115.  00:40DC  ED A1                   cpi
     116.  00:40DE  20 0C                   jr nz,Memory_MatchSlotString_NotFound
     117.  00:40E0  E2 E9 40                jp po,Memory_MatchSlotString_Found
     118.  00:40E3  13                      inc de
     119.  00:40E4  EB                      ex de,hl
     120.  00:40E5  F1                      pop af
     121.  00:40E6  C3 D2 40                jp Memory_MatchSlotString
     122.  00:40E9                      Memory_MatchSlotString_Found:
     123.  00:40E9  F1                      pop af
     124.  00:40EA  37                      scf
     125.  00:40EB  C9                      ret
     126.  00:40EC                      Memory_MatchSlotString_NotFound:
     127.  00:40EC  F1                      pop af
     128.  00:40ED  A7                      and a
     129.  00:40EE  C9                      ret
     130.  00:40EF                      
     131.  00:40EF                      MSXMusic_internalId:
     132.  00:40EF                          db "APRLOPLL"
     132.  00:40EF  41 50 52 4C 4F 50 4C 4C 
     133.  00:40F7                      
     134.  00:40F7                      MSXMusic_externalId:
     135.  00:40F7  4F 50 4C 4C             db "OPLL"
      83   00:40FB                      	include	"..\code\ttreplayFM.asm"
       1.  00:40FB                      ;=================================
       2.  00:40FB                      ; TriloTracker Re-player FM
       3.  00:40FB                      ; 
       4.  00:40FB                      ; Functions:
       5.  00:40FB                      ; 	replay_init
       6.  00:40FB                      ;	replay_pause
       7.  00:40FB                      ;	replay_resume
       8.  00:40FB                      ;	replay_fade_out
       9.  00:40FB                      ;	replay_set_FM_balance
      10.  00:40FB                      ;	replay_set_PSG_balance
      11.  00:40FB                      ;	replay_equalization_on
      12.  00:40FB                      ;	replay_equalization_off
      13.  00:40FB                      ;	replay_load_song
      14.  00:40FB                      ;================================
      15.  00:40FB  (00:007C)           FM_WRITE:	equ	0x7c	; port to set fm reg nr.
      16.  00:40FB  (00:007D)           FM_DATA:	equ	0x7d	; port to set fm data for reg.	
      17.  00:40FB  (00:00A0)           PSG_WRITE:	equ	0xa0	; port to set psg reg nr.
      18.  00:40FB  (00:00A1)           PSG_DATA:	equ	0xa1	; port to set psg data for reg.
      19.  00:40FB                      ;===============================
      20.  00:40FB  (00:0060)           _REL:		equ	96	; = release
      21.  00:40FB  (00:0061)           _SUS:		equ	97	; = sustain
      22.  00:40FB  (00:0062)           _VOL:		equ	98	; = volume 0
      23.  00:40FB  (00:0072)           _INS:		equ	113+1	; = instrument 1
      24.  00:40FB  (00:0091)           _CMD:		equ	144+1	; = effect 0
      25.  00:40FB  (00:00B8)           _SPC:		equ	184	; = special commands  [NOT USED]
      26.  00:40FB  (00:00BF)           _EOT:		equ	191	; = end of track
      27.  00:40FB  (00:00C0)           _WAIT:	equ	192	; = wait 1
      28.  00:40FB                      	
      29.  00:40FB  (0005)              	ALIGN 256
      30.  00:4100                      MACROACTIONLIST:
      31.  00:4100  C3 6F 4C            	jp	macro_volume_same		; 0
      32.  00:4103  00                  	nop
      33.  00:4104  C3 10 4C            	jp  	macro_mixer			; 2
      34.  00:4107  00                  	nop
      35.  00:4108  C3 1D 4C            	jp  	macro_tone_add		; 4			
      36.  00:410B  00                  	nop
      37.  00:410C  C3 6B 4C            	jp  	macro_stop			; 6			
      38.  00:410F  00                  	nop
      39.  00:4110  C3 75 4C            	jp  	macro_vol_base		; 8
      40.  00:4113  00                  	nop
      41.  00:4114  C3 7D 4C            	jp  	macro_vol_add		; a
      42.  00:4117  00                  	nop
      43.  00:4118  C3 8F 4C            	jp  	macro_vol_sub		; c
      44.  00:411B  00                  	nop
      45.  00:411C  C3 30 4C            	jp  	macro_noise_base		; e
      46.  00:411F  00                  	nop
      47.  00:4120  C3 3B 4C            	jp  	macro_noise_add		; 10		; unused!!!	
      48.  00:4123  00                  	nop
      49.  00:4124  C3 3B 4C            	jp  	macro_noise_add		; 12		
      50.  00:4127  00                  	nop
      51.  00:4128  C3 49 4C            	jp  	macro_noise_vol		; 14
      52.  00:412B  00                  	nop
      53.  00:412C  C3 4D 4C            	jp  	macro_voice			; 16
      54.  00:412F  00                  	nop
      55.  00:4130  C3 62 4C            	jp  	macro_loop			; 18
      56.  00:4133  00                  	nop
      57.  00:4134  C3 5A 4C            	jp	macro_envelope		; 1a
      58.  00:4137  00                  	nop
      59.  00:4138  C3 55 4C            	jp	macro_envelope_shape	; 1c
      60.  00:413B                      
      61.  00:413B                      
      62.  00:413B                      PROCESS_CMDLIST:
      63.  00:413B                      	; This list only contains the primary commands.
      64.  00:413B  C3 F3 4D            	jp	process_cmd3_port_tone
      65.  00:413E  00                  	nop
      66.  00:413F  C3 8E 4E            	jp	process_cmd5_vibrato_port_tone
      67.  00:4142  00                  	nop
      68.  00:4143  C3 E1 4D            	jp	process_cmd2_port_down
      69.  00:4146  00                  	nop		
      70.  00:4147  C3 5E 4D            	jp	process_cmd0_arpeggio
      71.  00:414A  00                  	nop			
      72.  00:414B  C3 57 4E            	jp	process_cmd4_vibrato
      73.  00:414E  00                  	nop		
      74.  00:414F  C3 CF 4D            	jp	process_cmd1_port_up
      75.  00:4152  00                  	nop	
      76.  00:4153  C3 94 4E            	jp	process_cmd6_vibrato_vol
      77.  00:4156  00                  	nop		
      78.  00:4157  C3 9A 4E            	jp	process_cmd7_vol_slide
      79.  00:415A  00                  	nop
      80.  00:415B  C3 34 4E            	jp	process_cmd8_tremolo
      81.  00:415E  00                  	nop
      82.  00:415F  C3 C6 4E            	jp	process_cmd9_note_cut	
      83.  00:4162  00                  	nop	
      84.  00:4163  C3 D3 4E            	jp	process_cmd10_note_delay
      85.  00:4166  00                  	nop			
      86.  00:4167  C3 52 4E            	jp	process_cmd4_vibrato_extended
      87.  00:416A                      DECODE_CMDLIST:
      88.  00:416A                      	; Primary
      89.  00:416A  C3 3C 4A            	jp	decode_cmd3_port_tone
      90.  00:416D  00                  	nop	
      91.  00:416E  C3 CA 4A            	jp	decode_cmd5_vibrato_port_tone
      92.  00:4171  00                  	nop	
      93.  00:4172  C3 31 4A            	jp	decode_cmd2_port_down
      94.  00:4175  00                  	nop	
      95.  00:4176  C3 13 4A            	jp	decode_cmd0_arpeggio
      96.  00:4179  00                  	nop	
      97.  00:417A  C3 9C 4A            	jp	decode_cmd4_vibrato
      98.  00:417D  00                  	nop	
      99.  00:417E  C3 26 4A            	jp	decode_cmd1_port_up
     100.  00:4181  00                  	nop	
     101.  00:4182  C3 E1 4A            	jp	decode_cmd6_vibrato_vol	
     102.  00:4185  00                  	nop	
     103.  00:4186  C3 E1 4A            	jp	decode_cmd7_vol_slide
     104.  00:4189  00                  	nop	
     105.  00:418A  C3 9C 4A            	jp	decode_cmd8_tremolo
     106.  00:418D  00                  	nop	
     107.  00:418E  C3 F1 4A            	jp	decode_cmd9_note_cut
     108.  00:4191  00                  	nop	
     109.  00:4192  C3 FC 4A            	jp	decode_cmd10_note_delay
     110.  00:4195  00                  	nop	
     111.  00:4196                      	; Secondary
     112.  00:4196  C3 1A 4B            	jp	decode_cmd11_command_end
     113.  00:4199  00                  	nop	
     114.  00:419A  C3 1F 4B            	jp	decode_cmd12_drum
     115.  00:419D  00                  	nop	
     116.  00:419E  C3 36 4B            	jp	decode_cmd13_arp_speed
     117.  00:41A1  00                  	nop	
     118.  00:41A2  C3 3C 4B            	jp	decode_cmd14_fine_up
     119.  00:41A5  00                  	nop	
     120.  00:41A6  C3 46 4B            	jp	decode_cmd15_fine_down
     121.  00:41A9  00                  	nop	
     122.  00:41AA  C3 50 4B            	jp	decode_cmd16_notelink
     123.  00:41AD  00                  	nop	
     124.  00:41AE  C3 57 4B            	jp	decode_cmd17_track_detune
     125.  00:41B1  00                  	nop	
     126.  00:41B2  C3 76 4B            	jp	decode_cmd18_trigger
     127.  00:41B5  00                  	nop	
     128.  00:41B6  C3 7C 4B            	jp	decode_cmd19_speed
     129.  00:41B9  00                  	nop	
     130.  00:41BA                      	; SoundChip Specific
     131.  00:41BA  C3 8C 4B            	jp	decode_cmd20_envelope_high
     132.  00:41BD  00                  	nop	
     133.  00:41BE  C3 92 4B            	jp	decode_cmd21_envelope_low
     134.  00:41C1  00                  	nop	
     135.  00:41C2  C3 98 4B            	jp	decode_cmd22_brightness	
     136.  00:41C5                      
     137.  00:41C5                      DRUM_MACRO_LIST:
     138.  00:41C5  C3 FE 4E            	jp	_drum_stop		;2
     139.  00:41C8  00                  	nop	
     140.  00:41C9  C3 06 4F            	jp	_drum_vol_bd	;4
     141.  00:41CC  00                  	nop	
     142.  00:41CD  C3 0E 4F            	jp	_drum_vol_sn	;6
     143.  00:41D0  00                  	nop	
     144.  00:41D1  C3 1D 4F            	jp	_drum_vol_hh	;8
     145.  00:41D4  00                  	nop	
     146.  00:41D5  C3 2C 4F            	jp	_drum_vol_snhh	;a
     147.  00:41D8  00                  	nop	
     148.  00:41D9  C3 34 4F            	jp	_drum_vol_cy	;c
     149.  00:41DC  00                  	nop	
     150.  00:41DD  C3 43 4F            	jp	_drum_vol_tt	;e
     151.  00:41E0  00                  	nop	
     152.  00:41E1  C3 52 4F            	jp	_drum_vol_cytt	;10
     153.  00:41E4  00                  	nop	
     154.  00:41E5  C3 5A 4F            	jp	_drum_note_bd	;12
     155.  00:41E8  00                  	nop	
     156.  00:41E9  C3 67 4F            	jp	_drum_tone_bd	;14
     157.  00:41EC  00                  	nop	
     158.  00:41ED  C3 74 4F            	jp	_drum_note_snhh	;16
     159.  00:41F0  00                  	nop	
     160.  00:41F1  C3 81 4F            	jp	_drum_tone_snhh	;18
     161.  00:41F4  00                  	nop	
     162.  00:41F5  C3 91 4F            	jp	_drum_note_cytt	;1a
     163.  00:41F8  00                  	nop	
     164.  00:41F9  C3 9E 4F            	jp	_drum_tone_cytt	;1c
     165.  00:41FC  00                  	nop	
     166.  00:41FD  C3 AE 4F            	jp	_drum_percussion	;1e
     167.  00:4200                      
     168.  00:4200  (0000)              	ALIGN 256
     169.  00:4200                      
     170.  00:4200                      TRACK_Vibrato_sine:	; Sine table used for tremelo and vibrato
     171.  00:4200                            db 	$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$01,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00		      ; depth 	1
     171.  00:4200  00 00 00 00 00 00 00 00 00 00 01 01 01 01 01 01 
     171.  00:4210  01 01 01 01 01 01 00 00 00 00 00 00 00 00 00 00 
     172.  00:4220                            db 	$00,$00,$00,$00,$00,$00,$00,$01,$01,$01,$01,$01,$01,$02,$02,$02,$02,$02,$02,$01,$01,$01,$01,$01,$01,$00,$00,$00,$00,$00,$00,$00		      ; depth 	2
     172.  00:4220  00 00 00 00 00 00 00 01 01 01 01 01 01 02 02 02 
     172.  00:4230  02 02 02 01 01 01 01 01 01 00 00 00 00 00 00 00 
     173.  00:4240                            db 	$00,$00,$00,$00,$00,$01,$01,$01,$01,$01,$02,$02,$02,$02,$03,$03,$03,$03,$02,$02,$02,$02,$01,$01,$01,$01,$01,$00,$00,$00,$00,$00		      ; depth 	3
     173.  00:4240  00 00 00 00 00 01 01 01 01 01 02 02 02 02 03 03 
     173.  00:4250  03 03 02 02 02 02 01 01 01 01 01 00 00 00 00 00 
     174.  00:4260                            db 	$00,$00,$00,$00,$00,$01,$01,$01,$01,$02,$02,$02,$03,$03,$04,$04,$04,$04,$03,$03,$02,$02,$02,$01,$01,$01,$01,$00,$00,$00,$00,$00		      ; depth 	4
     174.  00:4260  00 00 00 00 00 01 01 01 01 02 02 02 03 03 04 04 
     174.  00:4270  04 04 03 03 02 02 02 01 01 01 01 00 00 00 00 00 
     175.  00:4280                            db 	$00,$00,$00,$00,$01,$01,$01,$01,$02,$02,$03,$03,$04,$04,$05,$05,$05,$05,$04,$04,$03,$03,$02,$02,$01,$01,$01,$01,$00,$00,$00,$00		      ; depth 	5
     175.  00:4280  00 00 00 00 01 01 01 01 02 02 03 03 04 04 05 05 
     175.  00:4290  05 05 04 04 03 03 02 02 01 01 01 01 00 00 00 00 
     176.  00:42A0                            db 	$00,$00,$00,$00,$01,$01,$01,$02,$02,$03,$03,$04,$04,$05,$05,$06,$06,$05,$05,$04,$04,$03,$03,$02,$02,$01,$01,$01,$00,$00,$00,$00		      ; depth 	6
     176.  00:42A0  00 00 00 00 01 01 01 02 02 03 03 04 04 05 05 06 
     176.  00:42B0  06 05 05 04 04 03 03 02 02 01 01 01 00 00 00 00 
     177.  00:42C0                            db 	$00,$00,$00,$01,$01,$01,$02,$02,$03,$04,$04,$05,$06,$06,$07,$08,$08,$07,$06,$06,$05,$04,$04,$03,$02,$02,$01,$01,$01,$00,$00,$00		      ; depth 	7
     177.  00:42C0  00 00 00 01 01 01 02 02 03 04 04 05 06 06 07 08 
     177.  00:42D0  08 07 06 06 05 04 04 03 02 02 01 01 01 00 00 00 
     178.  00:42E0                            db 	$00,$00,$01,$01,$01,$02,$03,$04,$05,$06,$07,$08,$09,$0A,$0C,$0D,$0D,$0C,$0A,$09,$08,$07,$06,$05,$04,$03,$02,$01,$01,$01,$00,$00		      ; depth 	8
     178.  00:42E0  00 00 01 01 01 02 03 04 05 06 07 08 09 0A 0C 0D 
     178.  00:42F0  0D 0C 0A 09 08 07 06 05 04 03 02 01 01 01 00 00 
     179.  00:4300                      TRACK_Vibrato_sine_extended:	; Sine table used for tremelo and vibrato	
     180.  00:4300                            db 	$00,$00,$01,$02,$02,$04,$05,$06,$08,$09,$0B,$0D,$0F,$11,$13,$15,$15,$13,$11,$0F,$0D,$0B,$09,$08,$06,$05,$04,$02,$02,$01,$00,$00		      ; depth 	9
     180.  00:4300  00 00 01 02 02 04 05 06 08 09 0B 0D 0F 11 13 15 
     180.  00:4310  15 13 11 0F 0D 0B 09 08 06 05 04 02 02 01 00 00 
     181.  00:4320                            db 	$00,$01,$01,$02,$04,$05,$07,$09,$0B,$0E,$10,$13,$16,$19,$1C,$1F,$1F,$1C,$19,$16,$13,$10,$0E,$0B,$09,$07,$05,$04,$02,$01,$01,$00		      ; depth 	A
     181.  00:4320  00 01 01 02 04 05 07 09 0B 0E 10 13 16 19 1C 1F 
     181.  00:4330  1F 1C 19 16 13 10 0E 0B 09 07 05 04 02 01 01 00 
     182.  00:4340                            db 	$00,$01,$02,$03,$05,$08,$0B,$0E,$11,$15,$19,$1D,$21,$26,$2B,$2F,$2F,$2B,$26,$21,$1D,$19,$15,$11,$0E,$0B,$08,$05,$03,$02,$01,$00		      ; depth 	B
     182.  00:4340  00 01 02 03 05 08 0B 0E 11 15 19 1D 21 26 2B 2F 
     182.  00:4350  2F 2B 26 21 1D 19 15 11 0E 0B 08 05 03 02 01 00 
     183.  00:4360                            db 	$01,$01,$03,$05,$07,$0B,$0E,$12,$17,$1C,$21,$27,$2D,$33,$39,$3F,$3F,$39,$33,$2D,$27,$21,$1C,$17,$12,$0E,$0B,$07,$05,$03,$01,$01		      ; depth 	C
     183.  00:4360  01 01 03 05 07 0B 0E 12 17 1C 21 27 2D 33 39 3F 
     183.  00:4370  3F 39 33 2D 27 21 1C 17 12 0E 0B 07 05 03 01 01 
     184.  00:4380                      
     185.  00:4380                      
     186.  00:4380                      
     187.  00:4380                      _Default_Registers:
     188.  00:4380                      	db	$00,$ff,$00,$ff,$00,$ff,$00,$ff,$00,$ff,$00,$ff,$00,$ff,$00,$ff	; Voice reg
     188.  00:4380  00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 00 FF 
     189.  00:4390  00 00 FF FF 00 FF   	db	$00,$00,$ff,$ff,$00,$ff								; Chan A Tone + vol
     190.  00:4396  00 00 FF FF 00 FF   	db	$00,$00,$ff,$ff,$00,$ff
     191.  00:439C  00 00 FF FF 00 FF   	db	$00,$00,$ff,$ff,$00,$ff
     192.  00:43A2  00 00 FF FF 00 FF   	db	$00,$00,$ff,$ff,$00,$ff
     193.  00:43A8  00 00 FF FF 00 FF   	db	$00,$00,$ff,$ff,$00,$ff
     194.  00:43AE  00 00 FF FF 00 FF   	db	$00,$00,$ff,$ff,$00,$ff								; Chan F Tone + vol
     195.  00:43B4                      _DRUM_Default:
     196.  00:43B4                      	; values taken from XAK3 intro. Used the most used values as default
     197.  00:43B4  E4 04               	dw	0x04E4		; Bass drum
     198.  00:43B6  00 00               	dw	0x0000
     199.  00:43B8  00                  	db	0x00			; vol
     200.  00:43B9  EE                  	db	0xee
     201.  00:43BA  20 01               	dw	0x0120		; Snare + HiHat
     202.  00:43BC  00 00               	dw	0x0000
     203.  00:43BE  00                  	db	0x00			; vol
     204.  00:43BF  EE                  	db	0xee
     205.  00:43C0  AB 00               	dw	0x00AB		; Cymbal + TomTom
     206.  00:43C2  00 00               	dw	0x0000
     207.  00:43C4  00                  	db	0x00			; vol
     208.  00:43C5  EE                  	db	0xee
     209.  00:43C6  20                  	db	0x20			; FM drm
     210.  00:43C7  00                  	db	0x00
     211.  00:43C8                      
     212.  00:43C8                      ;===========================================================
     213.  00:43C8                      ; ---	replay_init
     214.  00:43C8                      ; Initialize re-player data
     215.  00:43C8                      ; Only call this on start-up
     216.  00:43C8                      ; Input: none
     217.  00:43C8                      ;===========================================================
     218.  00:43C8                      replay_init:
     219.  00:43C8  3E 04               	ld	a,4
     220.  00:43CA  CD 67 44            	call	replay_set_FM_balance
     221.  00:43CD  3E 04               	ld	a,4
     222.  00:43CF  CD 74 44            	call	replay_set_PSG_balance
     223.  00:43D2                      
     224.  00:43D2  CD 9C 44            	call	replay_equalization_off
     225.  00:43D5                      
     226.  00:43D5  AF                  	xor	a
     227.  00:43D6  32 22 C0            	ld	(replay_mode),a	
     228.  00:43D9  32 32 C0            	ld	(equalization_cnt),a
     229.  00:43DC  32 31 C0            	ld	(equalization_freq),a
     230.  00:43DF                      
     231.  00:43DF                      	;--- Detect CPU
     232.  00:43DF  21 2D 00            	ld 	hl,$002D
     233.  00:43E2  3A C1 FC            	ld    a, ($fcc1)              ; (EXPTBL)
     234.  00:43E5  CD 0C 00            	call  $0C                     ; RDSLT
     235.  00:43E8                      
     236.  00:43E8  FE 03                  	cp 	3
     237.  00:43EA  38 08                  	jr.	c,.z80
     238.  00:43EC  3E 01               	ld	a,1
     239.  00:43EE  32 2F C0            	ld	(r800),a			; 0 = z80 other is R800
     240.  00:43F1  C3 F8 43            	jp	.init
     241.  00:43F4                      .z80:
     242.  00:43F4  AF                  	xor	a
     243.  00:43F5  32 2F C0            	ld	(r800),a
     244.  00:43F8                      .init:
     245.  00:43F8                      	;--- init Mixers
     246.  00:43F8  CD 58 45            	call	replay_play_no
     247.  00:43FB                      
     248.  00:43FB                      	;---- init YM2413
     249.  00:43FB  21 80 43            	ld	hl,_Default_Registers
     250.  00:43FE  11 79 C1            	ld	de,FM_Voicereg
     251.  00:4401  01 48 00            	ld	bc,72
     252.  00:4404  ED B0               	ldir
     253.  00:4406  3E FF               	ld	a,$ff
     254.  00:4408  32 B1 C1            	ld	(DRUM_regVolBD),a
     255.  00:440B  32 B7 C1            	ld	(DRUM_regVolSH),a
     256.  00:440E  32 BD C1            	ld	(DRUM_regVolCT),a
     257.  00:4411  CD B8 4F            	call	replay_route 
     258.  00:4414  FB                  	ei
     259.  00:4415  76                  	halt
     260.  00:4416  AF                  	xor	a
     261.  00:4417  32 B1 C1            	ld	(DRUM_regVolBD),a
     262.  00:441A  32 B7 C1            	ld	(DRUM_regVolSH),a
     263.  00:441D  32 BD C1            	ld	(DRUM_regVolCT),a
     264.  00:4420  CD B8 4F            	call	replay_route
     265.  00:4423                      	
     266.  00:4423  C9                  	ret
     267.  00:4424                      
     268.  00:4424                      ;===========================================================
     269.  00:4424                      ; ---	replay_pause
     270.  00:4424                      ; Pause music playback
     271.  00:4424                      ; 
     272.  00:4424                      ; Input: none
     273.  00:4424                      ;===========================================================
     274.  00:4424                      replay_pause:
     275.  00:4424                      	;-- stop decoding and processing music data
     276.  00:4424  AF                  	xor	a
     277.  00:4425  32 22 C0            	ld	(replay_mode),a	
     278.  00:4428                      	;--- Silence the SN7 PSG
     279.  00:4428  32 73 C1            	ld	(PSG_regVOLA),a
     280.  00:442B  32 74 C1            	ld	(PSG_regVOLB),a
     281.  00:442E  32 75 C1            	ld	(PSG_regVOLC),a
     282.  00:4431                      
     283.  00:4431  32 BF C1            	ld	(FM_DRUM),a
     284.  00:4434  3E 0F               	ld	a,$0f
     285.  00:4436  32 8D C1            	ld	(FM_regVOLA),a
     286.  00:4439  32 93 C1            	ld	(FM_regVOLB),a
     287.  00:443C  32 99 C1            	ld	(FM_regVOLC),a
     288.  00:443F  32 9F C1            	ld	(FM_regVOLD),a
     289.  00:4442  32 A5 C1            	ld	(FM_regVOLE),a
     290.  00:4445  32 AB C1            	ld	(FM_regVOLF),a
     291.  00:4448                      
     292.  00:4448                      
     293.  00:4448                      	; release key on all FM channels
     294.  00:4448  06 09               	ld	b,9
     295.  00:444A  21 8A C1            	ld	hl,FM_Registers+1
     296.  00:444D  11 06 00            	ld	de,6
     297.  00:4450  AF                  	xor	a
     298.  00:4451                      _r_pause_loop:
     299.  00:4451  77                  	ld	(hl),a
     300.  00:4452  19                  	add	hl,de
     301.  00:4453  10 FC               	djnz	_r_pause_loop
     302.  00:4455  C9                  	ret	
     303.  00:4456                      	
     304.  00:4456                      
     305.  00:4456                      ;===========================================================
     306.  00:4456                      ; ---	replay_resume
     307.  00:4456                      ; Resume music playback
     308.  00:4456                      ; 
     309.  00:4456                      ; Input: none
     310.  00:4456                      ;===========================================================
     311.  00:4456                      replay_resume:
     312.  00:4456                      	;-- re-enable music decoding and processing
     313.  00:4456  3E 01               	ld	a,1
     314.  00:4458  32 22 C0            	ld	(replay_mode),a
     315.  00:445B  C9                  	ret
     316.  00:445C                      
     317.  00:445C                      
     318.  00:445C                      ;===========================================================
     319.  00:445C                      ; ---	replay_fade_out
     320.  00:445C                      ; Fade out the music. 
     321.  00:445C                      ; Once the sound is silence the replayer is paused.
     322.  00:445C                      ;
     323.  00:445C                      ; in: [A] fade speed (1 - 255)
     324.  00:445C                      ;===========================================================	
     325.  00:445C                      replay_fade_out:
     326.  00:445C  32 25 C0            	ld	(replay_fade),a
     327.  00:445F  32 26 C0            	ld	(replay_fade_timer),a
     328.  00:4462  AF                  	xor	a
     329.  00:4463  32 27 C0            	ld	(replay_fade_vol),a
     330.  00:4466  C9                  	ret
     331.  00:4467                      
     332.  00:4467                      
     333.  00:4467                      	
     334.  00:4467                      ;===========================================================
     335.  00:4467                      ; ---	replay_set_FM_balance
     336.  00:4467                      ; Set the main volume for the FM chip. This enables for
     337.  00:4467                      ; setting the balance between FM and PSG as some MSX models 
     338.  00:4467                      ; default balance differs. 
     339.  00:4467                      ;
     340.  00:4467                      ; in: [A] master volume (0-4) 0=75% volume, 4=100% volume. 
     341.  00:4467                      ;===========================================================	
     342.  00:4467                      replay_set_FM_balance:
     343.  00:4467  FE 05               	cp	5	; limit 
     344.  00:4469  D0                  	ret	nc
     345.  00:446A  21 31 52            	ld	hl,_VOLUME_TABLE_FM-64
     346.  00:446D  CD 81 44            	call	_getnewbalancebase
     347.  00:4470  22 05 C0            	ld	(replay_mainFMvol),hl	
     348.  00:4473  C9                  	ret
     349.  00:4474                      	
     350.  00:4474                      ;===========================================================
     351.  00:4474                      ; ---	replay_set_PSG_balance
     352.  00:4474                      ; Set the main volume for the PSG chip. This enables for
     353.  00:4474                      ; setting the balance between FM and PSG as some MSX models 
     354.  00:4474                      ; default balance differs. 
     355.  00:4474                      ;
     356.  00:4474                      ; in: [A] master volume (0-8) 0=75% volume, 4=100% volume. 
     357.  00:4474                      ;===========================================================	
     358.  00:4474                      replay_set_PSG_balance:
     359.  00:4474  FE 05               	cp	5	; limit 
     360.  00:4476  D0                  	ret	nc
     361.  00:4477  21 F1 50            	ld	hl,_VOLUME_TABLE_PSG-64
     362.  00:447A  CD 81 44            	call	_getnewbalancebase
     363.  00:447D  22 03 C0            	ld	(replay_mainPSGvol),hl	
     364.  00:4480  C9                  	ret
     365.  00:4481                      	
     366.  00:4481                      _getnewbalancebase:
     367.  00:4481  87                  	add	a		; times 16
     368.  00:4482  87                  	add	a
     369.  00:4483  87                  	add	a
     370.  00:4484  87                  	add	a
     371.  00:4485  85                  	add	a,l
     372.  00:4486  6F                  	ld	l,a
     373.  00:4487  D0                  	ret 	nc
     374.  00:4488  24                  	inc	h
     375.  00:4489  C9                  	ret
     376.  00:448A                      	
     377.  00:448A                      ;===========================================================
     378.  00:448A                      ; ---	replay_equalization_on
     379.  00:448A                      ; Enables the speed equalization. 
     380.  00:448A                      ; This to enable same speed playback on 50 and 60Hz. 
     381.  00:448A                      ;===========================================================	
     382.  00:448A                      replay_equalization_on:
     383.  00:448A  3E 01               	ld	a,1
     384.  00:448C                      IFDEF MSX2
     385.  00:448C                      	;--- Only enable if in 60Hz mode
     386.  00:448C  3A E8 FF            	ld	a,($FFE8)	; get mirror of VDP reg# 9
     387.  00:448F  E6 02               	and	00000010b
     388.  00:4491  EE 02               	xor	00000010b
     389.  00:4493                      ENDIF
     390.  00:4493  32 31 C0            	ld	(equalization_freq),a
     391.  00:4496  3E 01               	ld	a,1
     392.  00:4498  32 32 C0            	ld	(equalization_cnt),a
     393.  00:449B  C9                  	ret	
     394.  00:449C                      
     395.  00:449C                      ;===========================================================
     396.  00:449C                      ; ---	replay_equalization_off
     397.  00:449C                      ; Disables the speed equalization. 
     398.  00:449C                      ; This to enable same speed playback on 50 and 60Hz. 
     399.  00:449C                      ;===========================================================	
     400.  00:449C                      replay_equalization_off:
     401.  00:449C  AF                  	xor	a
     402.  00:449D  32 31 C0            	ld	(equalization_freq),a
     403.  00:44A0  3E 01               	ld	a,1
     404.  00:44A2  32 32 C0            	ld	(equalization_cnt),a
     405.  00:44A5  C9                  	ret	
     406.  00:44A6                      
     407.  00:44A6                      
     408.  00:44A6                      ;===========================================================
     409.  00:44A6                      ; ---	replay_loadsong
     410.  00:44A6                      ; Initialize a song for playback
     411.  00:44A6                      ; 
     412.  00:44A6                      ; Input [HL] points to start song
     413.  00:44A6                      ;===========================================================
     414.  00:44A6                      replay_loadsong:
     415.  00:44A6                      	;--- Get the start speed.
     416.  00:44A6  7E                  	ld	a,(hl)	
     417.  00:44A7  23                  	inc	hl
     418.  00:44A8  32 1F C0            	ld	(replay_speed),a
     419.  00:44AB                      
     420.  00:44AB                      	;--- Get the channel setup
     421.  00:44AB  7E                  	ld	a,(hl)	
     422.  00:44AC  23                  	inc	hl
     423.  00:44AD  32 23 C0            	ld	(replay_chan_setup),a	
     424.  00:44B0                      
     425.  00:44B0                      	;--- Set voice base, drum base, instrument base and track pointers
     426.  00:44B0  11 07 C0            	ld 	de,replay_voicebase
     427.  00:44B3  01 16 00            	ld	bc,22
     428.  00:44B6  ED B0               	ldir
     429.  00:44B8  22 1D C0            	ld	(replay_orderpointer),hl		; store pointer for next set
     430.  00:44BB                      								; of track pointers
     431.  00:44BB                      	;--- Initialize re-player variables.
     432.  00:44BB  AF                  	xor	a
     433.  00:44BC  32 20 C0            	ld	(replay_speed_subtimer),a
     434.  00:44BF  32 2C C0            	ld	(FM_softvoice_req),a
     435.  00:44C2  32 24 C0            	ld	(replay_arp_speed),a
     436.  00:44C5  32 25 C0            	ld	(replay_fade),a
     437.  00:44C8  32 C1 C1            	ld	(FM_DRUM_ACTIVE),a
     438.  00:44CB                      
     439.  00:44CB                      	;--- Erase channel data	in RAM
     440.  00:44CB  01 37 01            	ld	bc,TRACK_REC_SIZE*8-1
     441.  00:44CE  21 33 C0            	ld	hl,TRACK_Chan1
     442.  00:44D1  11 34 C0            	ld	de,TRACK_Chan1+1
     443.  00:44D4  77                  	ld	(hl),a
     444.  00:44D5  ED B0               	ldir
     445.  00:44D7                      	
     446.  00:44D7                            ;--- init drum register values
     447.  00:44D7                      ;	ld	a,00100000b			
     448.  00:44D7                      ;	ld	(FM_DRUM+1),a
     449.  00:44D7                      ;     ld    a,10000000b
     450.  00:44D7                      ;	ld	(FM_DRUM),a	      
     451.  00:44D7                       
     452.  00:44D7  21 80 43            	ld	hl,_Default_Registers
     453.  00:44DA  11 79 C1            	ld	de,FM_Voicereg
     454.  00:44DD  01 48 00            	ld	bc,72
     455.  00:44E0  ED B0               	ldir
     456.  00:44E2                      
     457.  00:44E2  3E 01               	ld	a,1
     458.  00:44E4  32 21 C0            	ld	(replay_speed_timer),a
     459.  00:44E7  32 57 C0            	ld	(TRACK_Chan1+17+TRACK_Delay),a	
     460.  00:44EA  32 7E C0            	ld	(TRACK_Chan2+17+TRACK_Delay),a		
     461.  00:44ED  32 A5 C0            	ld	(TRACK_Chan3+17+TRACK_Delay),a	
     462.  00:44F0  32 CC C0            	ld	(TRACK_Chan4+17+TRACK_Delay),a	
     463.  00:44F3  32 F3 C0            	ld	(TRACK_Chan5+17+TRACK_Delay),a		
     464.  00:44F6  32 1A C1            	ld	(TRACK_Chan6+17+TRACK_Delay),a		
     465.  00:44F9  32 41 C1            	ld	(TRACK_Chan7+17+TRACK_Delay),a		
     466.  00:44FC  32 68 C1            	ld	(TRACK_Chan8+17+TRACK_Delay),a	
     467.  00:44FF                      	
     468.  00:44FF  3E FE               	ld	a,254
     469.  00:4501  32 33 C0            	ld	(TRACK_Chan1+17+TRACK_Instrument),a	
     470.  00:4504  32 5A C0            	ld	(TRACK_Chan2+17+TRACK_Instrument),a		
     471.  00:4507  32 81 C0            	ld	(TRACK_Chan3+17+TRACK_Instrument),a	
     472.  00:450A  32 A8 C0            	ld	(TRACK_Chan4+17+TRACK_Instrument),a	
     473.  00:450D  32 CF C0            	ld	(TRACK_Chan5+17+TRACK_Instrument),a		
     474.  00:4510  32 F6 C0            	ld	(TRACK_Chan6+17+TRACK_Instrument),a		
     475.  00:4513  32 1D C1            	ld	(TRACK_Chan7+17+TRACK_Instrument),a		
     476.  00:4516  32 44 C1            	ld	(TRACK_Chan8+17+TRACK_Instrument),a	
     477.  00:4519  32 2B C0            	ld	(replay_softvoice),a
     478.  00:451C                      
     479.  00:451C  3E 10               	ld	a,16
     480.  00:451E  32 8A C0            	ld	(TRACK_Chan3+17+TRACK_Voice),a
     481.  00:4521  32 B1 C0            	ld	(TRACK_Chan4+17+TRACK_Voice),a
     482.  00:4524  32 D8 C0            	ld	(TRACK_Chan5+17+TRACK_Voice),a
     483.  00:4527  32 FF C0            	ld	(TRACK_Chan6+17+TRACK_Voice),a	
     484.  00:452A  32 26 C1            	ld	(TRACK_Chan7+17+TRACK_Voice),a	
     485.  00:452D  32 4D C1            	ld	(TRACK_Chan8+17+TRACK_Voice),a
     486.  00:4530  3E 80               	ld	a,128
     487.  00:4532  32 8B C0            	ld	(TRACK_Chan3+17+TRACK_Flags),a
     488.  00:4535  32 B2 C0            	ld	(TRACK_Chan4+17+TRACK_Flags),a
     489.  00:4538  32 D9 C0            	ld	(TRACK_Chan5+17+TRACK_Flags),a
     490.  00:453B  32 00 C1            	ld	(TRACK_Chan6+17+TRACK_Flags),a	
     491.  00:453E  32 27 C1            	ld	(TRACK_Chan7+17+TRACK_Flags),a
     492.  00:4541  32 4E C1            	ld	(TRACK_Chan8+17+TRACK_Flags),a	
     493.  00:4544                      	
     494.  00:4544                      	;--- Check if there are 3 psg chans.
     495.  00:4544  3A 23 C0            	ld	a,(replay_chan_setup)
     496.  00:4547  A7                  	and	a
     497.  00:4548  CA 4F 45            	jp	z,99f
     498.  00:454B  AF                  	xor 	a
     499.  00:454C  32 8B C0            	ld	(TRACK_Chan3+17+TRACK_Flags),a	
     500.  00:454F                      99:	
     501.  00:454F  CD B8 4F            	call	replay_route
     502.  00:4552                      	
     503.  00:4552  3E 01               	ld	a,1
     504.  00:4554  32 22 C0            	ld	(replay_mode),a	
     505.  00:4557  C9                  	ret
     506.  00:4558                      
     507.  00:4558                      
     508.  00:4558                      ;===========================================================
     509.  00:4558                      ; Set mixer values to silent.
     510.  00:4558                      ;===========================================================
     511.  00:4558                      replay_play_no:
     512.  00:4558                      	; Silence PSG vol to avoid pops in sfx when music is not playing.
     513.  00:4558  AF                        xor   a
     514.  00:4559  32 73 C1            	ld	(PSG_regVOLA),a		
     515.  00:455C  32 74 C1            	ld	(PSG_regVOLB),a	
     516.  00:455F  32 75 C1            	ld	(PSG_regVOLC),a
     517.  00:4562                      	; Set mixers to silence
     518.  00:4562  32 C4 C1                  ld    (FM_regMIXER),a
     519.  00:4565  EE BF                     xor   $bf
     520.  00:4567  32 72 C1                  ld    (PSG_regMIXER),a
     521.  00:456A  C9                        ret
     522.  00:456B                      
     523.  00:456B                      ;===========================================================
     524.  00:456B                      ; ---	replay_play
     525.  00:456B                      ; Decode music data and process instruments and effects. 
     526.  00:456B                      ; Music chip registers will be prepared for replay_route 
     527.  00:456B                      ;
     528.  00:456B                      ; Input none
     529.  00:456B                      ;===========================================================	
     530.  00:456B                      replay_play:
     531.  00:456B  3A 22 C0            	ld	a,(replay_mode)
     532.  00:456E  A7                  	and	a
     533.  00:456F  28 E7                     jr    z,replay_play_no
     534.  00:4571                                  		; replay mode = 0	; halted
     535.  00:4571                      				; replay mode = 1	; active
     536.  00:4571                      	
     537.  00:4571                      	;---- SPEED EQUALIZATION 
     538.  00:4571  3A 31 C0            	ld	a,(equalization_freq)		; 0 = 50Hz, otherwise 60Hz
     539.  00:4574  A7                  	and	a
     540.  00:4575  CA A9 45            	jp	z,.PAL               		; if PAL process at any interrupt;
     541.  00:4578                      
     542.  00:4578                      .NTSC:
     543.  00:4578  3A 32 C0            	ld	a,(equalization_cnt)  		; if NTSC call 5 times out of 6
     544.  00:457B  3D                  	dec	a
     545.  00:457C  32 32 C0                  ld	(equalization_cnt),a
     546.  00:457F  C2 A9 45            	jp	nz,.PAL               		; skip music data processing one tic out of 6
     547.  00:4582                      
     548.  00:4582  32 BF C1            	ld	(FM_DRUM),a			; make sure not to retrigger drums on skip
     549.  00:4585                      	;--- Reset keyon flip 
     550.  00:4585  21 8A C1            	ld	hl,FM_regToneA+1		; pointer to the backup of reg# $2x
     551.  00:4588  CB B6               	res	6,(hl)
     552.  00:458A  21 90 C1            	ld	hl,FM_regToneB+1		; pointer to the backup of reg# $2x
     553.  00:458D  CB B6               	res	6,(hl)
     554.  00:458F  21 96 C1            	ld	hl,FM_regToneC+1		; pointer to the backup of reg# $2x
     555.  00:4592  CB B6               	res	6,(hl)
     556.  00:4594  21 9C C1            	ld	hl,FM_regToneD+1		; pointer to the backup of reg# $2x
     557.  00:4597  CB B6               	res	6,(hl)
     558.  00:4599  21 A2 C1            	ld	hl,FM_regToneE+1		; pointer to the backup of reg# $2x
     559.  00:459C  CB B6               	res	6,(hl)
     560.  00:459E  21 A8 C1            	ld	hl,FM_regToneF+1		; pointer to the backup of reg# $2x
     561.  00:45A1  CB B6               	res	6,(hl)
     562.  00:45A3                      
     563.  00:45A3                      	;--- Reset timer and raise equalization flag
     564.  00:45A3  3E 06               	ld	a,6	
     565.  00:45A5  32 32 C0                  ld	(equalization_cnt),a					
     566.  00:45A8  C9                  	ret
     567.  00:45A9                      .PAL:                             
     568.  00:45A9                      	;---- END SPEED EQUALIZATION	
     569.  00:45A9                      
     570.  00:45A9                      	;--- check for end of pattern
     571.  00:45A9  2A 0D C0            	ld	hl,(TRACK_pointer1)
     572.  00:45AC  7E                  	ld	a,(hl)
     573.  00:45AD  FE BF               	cp	191	
     574.  00:45AF  C2 BC 45            	jp	nz,.skip_EOT
     575.  00:45B2                      
     576.  00:45B2  3A 57 C0            	ld 	a,(TRACK_Chan1+17+TRACK_Delay)
     577.  00:45B5  3D                  	dec	a
     578.  00:45B6  C2 BC 45            	jp	nz,.skip_EOT
     579.  00:45B9  CC E7 48            	call	z,_replay_check_patternend	
     580.  00:45BC                      .skip_EOT:	
     581.  00:45BC                      	;--- The speed timer
     582.  00:45BC  21 21 C0            	ld	hl,replay_speed_timer
     583.  00:45BF  35                  	dec	(hl)
     584.  00:45C0  C2 35 47            	jp	nz,process_data	
     585.  00:45C3                      
     586.  00:45C3                      	;--- Re-init Timer == 0
     587.  00:45C3  AF                  	xor	a
     588.  00:45C4  ED 4B 1F C0         	ld	bc,(replay_speed)		; [b]	sub-timer [c] speed
     589.  00:45C8  CB 39               	srl	c				; bit	0 is halve speed step
     590.  00:45CA  8F                  	adc	a,a
     591.  00:45CB  A8                  	xor	b				; alternate	speed	to have halve speed.
     592.  00:45CC  32 20 C0            	ld	(replay_speed_subtimer),a
     593.  00:45CF  81                  	add	c
     594.  00:45D0  32 21 C0            	ld	(replay_speed_timer),a
     595.  00:45D3                      		
     596.  00:45D3                      ;===========================================================
     597.  00:45D3                      ; ---	replay_decodedata
     598.  00:45D3                      ; Process the pattern data 
     599.  00:45D3                      ;===========================================================
     600.  00:45D3                      decode_data:
     601.  00:45D3                      	;--- process the channels (tracks)
     602.  00:45D3  21 71 53            	ld	hl,TRACK_ToneTable_PSG			; Set the PSG note table
     603.  00:45D6  22 2D C0            	ld	(replay_tonetable),hl	
     604.  00:45D9                      	
     605.  00:45D9                      .decode1:	
     606.  00:45D9  21 57 C0            	ld 	hl,TRACK_Chan1+17+TRACK_Delay
     607.  00:45DC  35                  	dec	(hl)
     608.  00:45DD  C2 FA 45            	jp	nz,.decode2
     609.  00:45E0                      
     610.  00:45E0  3A 3D C0            	ld	a,(TRACK_Chan1+17+TRACK_Flags)
     611.  00:45E3  57                  	ld	d,a
     612.  00:45E4  3A 3A C0            	ld	a,(TRACK_Chan1+17+TRACK_Note)	
     613.  00:45E7  DD 21 44 C0         	ld	ix,TRACK_Chan1+17
     614.  00:45EB  ED 4B 0D C0         	ld	bc,(TRACK_pointer1)
     615.  00:45EF  CD 14 49            	call	decode_data_chan
     616.  00:45F2  ED 43 0D C0         	ld	(TRACK_pointer1),bc
     617.  00:45F6  7A                  	ld	a,d
     618.  00:45F7  32 3D C0            	ld	(TRACK_Chan1+17+TRACK_Flags),a	
     619.  00:45FA                      
     620.  00:45FA                      .decode2:	
     621.  00:45FA  21 7E C0            	ld 	hl,TRACK_Chan2+17+TRACK_Delay
     622.  00:45FD  35                  	dec	(hl)
     623.  00:45FE  C2 1B 46            	jp	nz,.setupcheck
     624.  00:4601                      
     625.  00:4601  3A 64 C0            	ld	a,(TRACK_Chan2+17+TRACK_Flags)
     626.  00:4604  57                  	ld	d,a
     627.  00:4605  3A 61 C0            	ld	a,(TRACK_Chan2+17+TRACK_Note)	
     628.  00:4608  DD 21 6B C0         	ld	ix,TRACK_Chan2+17
     629.  00:460C  ED 4B 0F C0         	ld	bc,(TRACK_pointer2)
     630.  00:4610  CD 14 49            	call	decode_data_chan
     631.  00:4613  ED 43 0F C0         	ld	(TRACK_pointer2),bc
     632.  00:4617  7A                  	ld	a,d				;'
     633.  00:4618  32 64 C0            	ld	(TRACK_Chan2+17+TRACK_Flags),a	
     634.  00:461B                      
     635.  00:461B                      .setupcheck:
     636.  00:461B                      	; 2-5 and 3-5 channel support
     637.  00:461B  3A 23 C0            	ld	a,(replay_chan_setup)
     638.  00:461E  A7                  	and	a
     639.  00:461F  CA 4C 46            	jp	z,.decode3_35chan
     640.  00:4622                      
     641.  00:4622                      .decode3_26chan:
     642.  00:4622  21 A5 C0            	ld 	hl,TRACK_Chan3+17+TRACK_Delay
     643.  00:4625  35                  	dec	(hl)
     644.  00:4626  C2 43 46            	jp	nz,.decode3_end
     645.  00:4629                      
     646.  00:4629  3A 8B C0            	ld	a,(TRACK_Chan3+17+TRACK_Flags)
     647.  00:462C  57                  	ld	d,a		;'
     648.  00:462D  3A 88 C0            	ld	a,(TRACK_Chan3+17+TRACK_Note)	
     649.  00:4630  DD 21 92 C0         	ld	ix,TRACK_Chan3+17
     650.  00:4634  ED 4B 11 C0         	ld	bc,(TRACK_pointer3)
     651.  00:4638  CD 14 49            	call	decode_data_chan
     652.  00:463B  ED 43 11 C0         	ld	(TRACK_pointer3),bc
     653.  00:463F  7A                  	ld	a,d				;'
     654.  00:4640  32 8B C0            	ld	(TRACK_Chan3+17+TRACK_Flags),a
     655.  00:4643                      .decode3_end:	
     656.  00:4643                      	;--- Set FM Tone table
     657.  00:4643  21 31 54            	ld	hl,TRACK_ToneTable_FM
     658.  00:4646  22 2D C0            	ld	(replay_tonetable),hl
     659.  00:4649  C3 73 46            	jp	.decode4
     660.  00:464C                      
     661.  00:464C                      
     662.  00:464C                      .decode3_35chan:	
     663.  00:464C                      	;--- Set FM Tone table
     664.  00:464C  21 31 54            	ld	hl,TRACK_ToneTable_FM
     665.  00:464F  22 2D C0            	ld	(replay_tonetable),hl
     666.  00:4652                      
     667.  00:4652  21 A5 C0            	ld 	hl,TRACK_Chan3+17+TRACK_Delay
     668.  00:4655  35                  	dec	(hl)
     669.  00:4656  C2 73 46            	jp	nz,.decode4
     670.  00:4659                      
     671.  00:4659  3A 8B C0            	ld	a,(TRACK_Chan3+17+TRACK_Flags)
     672.  00:465C  57                  	ld	d,a		;'
     673.  00:465D  3A 88 C0            	ld	a,(TRACK_Chan3+17+TRACK_Note)	
     674.  00:4660  DD 21 92 C0         	ld	ix,TRACK_Chan3+17
     675.  00:4664  ED 4B 11 C0         	ld	bc,(TRACK_pointer3)
     676.  00:4668  CD 14 49            	call	decode_data_chan
     677.  00:466B  ED 43 11 C0         	ld	(TRACK_pointer3),bc
     678.  00:466F  7A                  	ld	a,d				;'
     679.  00:4670  32 8B C0            	ld	(TRACK_Chan3+17+TRACK_Flags),a	
     680.  00:4673                      
     681.  00:4673                      .decode4:
     682.  00:4673  21 CC C0            	ld 	hl,TRACK_Chan4+17+TRACK_Delay
     683.  00:4676  35                  	dec	(hl)
     684.  00:4677  C2 94 46            	jp	nz,.decode5
     685.  00:467A                      
     686.  00:467A  3A B2 C0            	ld	a,(TRACK_Chan4+17+TRACK_Flags)
     687.  00:467D  57                  	ld 	d,a		;'
     688.  00:467E  3A AF C0            	ld	a,(TRACK_Chan4+17+TRACK_Note)	
     689.  00:4681  DD 21 B9 C0         	ld	ix,TRACK_Chan4+17
     690.  00:4685  ED 4B 13 C0         	ld	bc,(TRACK_pointer4)
     691.  00:4689  CD 14 49            	call	decode_data_chan
     692.  00:468C  ED 43 13 C0         	ld	(TRACK_pointer4),bc
     693.  00:4690  7A                  	ld	a,d			;'
     694.  00:4691  32 B2 C0            	ld	(TRACK_Chan4+17+TRACK_Flags),a	
     695.  00:4694                      
     696.  00:4694                      .decode5:
     697.  00:4694  21 F3 C0            	ld 	hl,TRACK_Chan5+17+TRACK_Delay
     698.  00:4697  35                  	dec	(hl)
     699.  00:4698  C2 B5 46            	jp	nz,.decode6
     700.  00:469B                      
     701.  00:469B  3A D9 C0            	ld	a,(TRACK_Chan5+17+TRACK_Flags)
     702.  00:469E  57                  	ld	d,a		;'
     703.  00:469F  3A D6 C0            	ld	a,(TRACK_Chan5+17+TRACK_Note)	
     704.  00:46A2  DD 21 E0 C0         	ld	ix,TRACK_Chan5+17
     705.  00:46A6  ED 4B 15 C0         	ld	bc,(TRACK_pointer5)
     706.  00:46AA  CD 14 49            	call	decode_data_chan
     707.  00:46AD  ED 43 15 C0         	ld	(TRACK_pointer5),bc
     708.  00:46B1  7A                  	ld	a,d			;'
     709.  00:46B2  32 D9 C0            	ld	(TRACK_Chan5+17+TRACK_Flags),a	
     710.  00:46B5                      
     711.  00:46B5                      .decode6:
     712.  00:46B5  21 1A C1            	ld 	hl,TRACK_Chan6+17+TRACK_Delay
     713.  00:46B8  35                  	dec	(hl)
     714.  00:46B9  C2 D6 46            	jp	nz,.decode7
     715.  00:46BC                      
     716.  00:46BC  3A 00 C1            	ld	a,(TRACK_Chan6+17+TRACK_Flags)
     717.  00:46BF  57                  	ld	d,a		;'
     718.  00:46C0  3A FD C0            	ld	a,(TRACK_Chan6+17+TRACK_Note)	
     719.  00:46C3  DD 21 07 C1         	ld	ix,TRACK_Chan6+17
     720.  00:46C7  ED 4B 17 C0         	ld	bc,(TRACK_pointer6)
     721.  00:46CB  CD 14 49            	call	decode_data_chan
     722.  00:46CE  ED 43 17 C0         	ld	(TRACK_pointer6),bc
     723.  00:46D2  7A                  	ld	a,d				;'
     724.  00:46D3  32 00 C1            	ld	(TRACK_Chan6+17+TRACK_Flags),a	
     725.  00:46D6                      
     726.  00:46D6                      .decode7:
     727.  00:46D6  21 41 C1            	ld 	hl,TRACK_Chan7+17+TRACK_Delay
     728.  00:46D9  35                  	dec	(hl)
     729.  00:46DA  C2 F7 46            	jp	nz,.decode8
     730.  00:46DD                      
     731.  00:46DD  3A 27 C1            	ld	a,(TRACK_Chan7+17+TRACK_Flags)
     732.  00:46E0  57                  	ld	d,a		;'
     733.  00:46E1  3A 24 C1            	ld	a,(TRACK_Chan7+17+TRACK_Note)	
     734.  00:46E4  DD 21 2E C1         	ld	ix,TRACK_Chan7+17
     735.  00:46E8  ED 4B 19 C0         	ld	bc,(TRACK_pointer7)
     736.  00:46EC  CD 14 49            	call	decode_data_chan
     737.  00:46EF  ED 43 19 C0         	ld	(TRACK_pointer7),bc
     738.  00:46F3  7A                  	ld	a,d				;'
     739.  00:46F4  32 27 C1            	ld	(TRACK_Chan7+17+TRACK_Flags),a	
     740.  00:46F7                      
     741.  00:46F7                      .decode8:
     742.  00:46F7  21 68 C1            	ld 	hl,TRACK_Chan8+17+TRACK_Delay
     743.  00:46FA  35                  	dec	(hl)
     744.  00:46FB  C2 18 47            	jp	nz,.decode_end
     745.  00:46FE                      
     746.  00:46FE  3A 4E C1            	ld	a,(TRACK_Chan8+17+TRACK_Flags)
     747.  00:4701  57                  	ld	d,a		;'
     748.  00:4702  3A 4B C1            	ld	a,(TRACK_Chan8+17+TRACK_Note)	
     749.  00:4705  DD 21 55 C1         	ld	ix,TRACK_Chan8+17
     750.  00:4709  ED 4B 1B C0         	ld	bc,(TRACK_pointer8)
     751.  00:470D  CD 14 49            	call	decode_data_chan
     752.  00:4710  ED 43 1B C0         	ld	(TRACK_pointer8),bc
     753.  00:4714  7A                  	ld	a,d				;'
     754.  00:4715  32 4E C1            	ld	(TRACK_Chan8+17+TRACK_Flags),a
     755.  00:4718                      		
     756.  00:4718                      .decode_end:
     757.  00:4718                      	;---- Software voice loading
     758.  00:4718  3A 2C C0            	ld	a,(FM_softvoice_req)
     759.  00:471B  FE 02               	cp	2
     760.  00:471D  DA 35 47            	jp	c,process_data
     761.  00:4720  2A 07 C0            	ld	hl,(replay_voicebase)
     762.  00:4723  87                  	add	a
     763.  00:4724  85                  	add	a,l
     764.  00:4725  6F                  	ld	l,a
     765.  00:4726  D2 2A 47            	jp	nc,.skip
     766.  00:4729  24                  	inc	h
     767.  00:472A                      .skip:
     768.  00:472A  11 79 C1            	ld	de,FM_Voicereg
     769.  00:472D  01 10 08            	ld	bc,$0810
     770.  00:4730                      .loop:
     771.  00:4730  ED A0               	ldi
     772.  00:4732  13                  	inc	de
     773.  00:4733  10 FB               	djnz	.loop
     774.  00:4735                      
     775.  00:4735                      
     776.  00:4735                      	; continue to process data
     777.  00:4735                      ;===========================================================
     778.  00:4735                      ; ---	replay_decodedata_NO
     779.  00:4735                      ; Process changes.
     780.  00:4735                      ; 
     781.  00:4735                      ; 
     782.  00:4735                      ;===========================================================
     783.  00:4735                      process_data:
     784.  00:4735                      	; Set tone table
     785.  00:4735  21 71 53            	ld	hl,TRACK_ToneTable_PSG
     786.  00:4738  22 2D C0            	ld	(replay_tonetable),hl
     787.  00:473B                      
     788.  00:473B                      	;--- Initialize PSG Mixer and volume
     789.  00:473B  AF                  	xor	a
     790.  00:473C  32 C4 C1            	ld	(FM_regMIXER),a
     791.  00:473F  32 73 C1            	ld	(PSG_regVOLA),a
     792.  00:4742  32 74 C1            	ld	(PSG_regVOLB),a
     793.  00:4745  32 75 C1            	ld	(PSG_regVOLC),a
     794.  00:4748                      	
     795.  00:4748                      	;--- PSG balance
     796.  00:4748  2A 03 C0            	ld	hl,(replay_mainPSGvol)
     797.  00:474B  22 29 C0            	ld	(replay_mainvol),hl
     798.  00:474E                      	
     799.  00:474E                      	;--------------------
     800.  00:474E                      	;--- Process track 1
     801.  00:474E                      	;--------------------
     802.  00:474E  DD 21 44 C0         	ld	ix,TRACK_Chan1+17
     803.  00:4752  3A 3D C0            	ld	a,(TRACK_Chan1+17+TRACK_Flags)
     804.  00:4755  57                  	ld	d,a
     805.  00:4756  CD B0 4B            	call	process_data_chan
     806.  00:4759  D2 5F 47            	jp	nc,.skipa
     807.  00:475C  22 6B C1            	ld	(PSG_regToneA),hl
     808.  00:475F                      .skipa:
     809.  00:475F  3A AB C1            	ld	a,(FM_regVOLF)
     810.  00:4762  32 73 C1            	ld	(PSG_regVOLA),a	
     811.  00:4765                      
     812.  00:4765                      	;--------------------
     813.  00:4765                      	;--- Process track 2
     814.  00:4765                      	;--------------------
     815.  00:4765  DD 21 6B C0         	ld	ix,TRACK_Chan2+17
     816.  00:4769  3A 64 C0            	ld	a,(TRACK_Chan2+17+TRACK_Flags)
     817.  00:476C  57                  	ld	d,a
     818.  00:476D  CD B0 4B            	call	process_data_chan
     819.  00:4770  D2 76 47            	jp	nc,.skipb
     820.  00:4773  22 6D C1            	ld	(PSG_regToneB),hl
     821.  00:4776                      .skipb:
     822.  00:4776  3A AB C1            	ld	a,(FM_regVOLF)
     823.  00:4779  32 74 C1            	ld	(PSG_regVOLB),a	
     824.  00:477C                      
     825.  00:477C  3A 23 C0            	ld	a,(replay_chan_setup)
     826.  00:477F  A7                  	and	a
     827.  00:4780  CA B9 47            	jp	z,_rdd_2psg_6fm
     828.  00:4783                      
     829.  00:4783                      _rdd_3psg_5fm:
     830.  00:4783                      	;--------------------
     831.  00:4783                      	;--- Process track 3	
     832.  00:4783                      	;--------------------
     833.  00:4783  DD 21 92 C0         	ld	ix,TRACK_Chan3+17
     834.  00:4787  3A 8B C0            	ld	a,(TRACK_Chan3+17+TRACK_Flags)
     835.  00:478A  57                  	ld	d,a
     836.  00:478B  CD B0 4B            	call	process_data_chan
     837.  00:478E  D2 94 47            	jp	nc,.skipc
     838.  00:4791  22 6F C1            	ld	(PSG_regToneC),hl
     839.  00:4794                      .skipc:
     840.  00:4794  3A AB C1            	ld	a,(FM_regVOLF)
     841.  00:4797  32 75 C1            	ld	(PSG_regVOLC),a
     842.  00:479A                      
     843.  00:479A                      	;-- Convert mixer to AY
     844.  00:479A  3A C4 C1            	ld	a,(FM_regMIXER)		
     845.  00:479D  CB 3F               	srl	a
     846.  00:479F  CB 3F               	srl	a
     847.  00:47A1  EE BF               	xor	0xbf
     848.  00:47A3  32 72 C1            	ld	(PSG_regMIXER),a
     849.  00:47A6  AF                  	xor	a
     850.  00:47A7  32 C4 C1            	ld	(FM_regMIXER),a
     851.  00:47AA                      
     852.  00:47AA                      	; Set tone table
     853.  00:47AA  21 31 54            	ld	hl,TRACK_ToneTable_FM
     854.  00:47AD  22 2D C0            	ld	(replay_tonetable),hl
     855.  00:47B0                      	;--- set FM balance
     856.  00:47B0  2A 05 C0            	ld	hl,(replay_mainFMvol)
     857.  00:47B3  22 29 C0            	ld	(replay_mainvol),hl
     858.  00:47B6                      	
     859.  00:47B6  C3 F1 47            	jp	_rdd_cont
     860.  00:47B9                      	
     861.  00:47B9                      	
     862.  00:47B9                      _rdd_2psg_6fm:
     863.  00:47B9                      	;-- Convert mixer to AY
     864.  00:47B9  3A C4 C1            	ld	a,(FM_regMIXER)		
     865.  00:47BC  CB 3F               	srl	a
     866.  00:47BE  CB 3F               	srl	a
     867.  00:47C0  CB 3F               	srl	a
     868.  00:47C2  EE BF               	xor	0xbf
     869.  00:47C4  32 72 C1            	ld	(PSG_regMIXER),a
     870.  00:47C7                      
     871.  00:47C7                      	; Set tone table
     872.  00:47C7  21 31 54            	ld	hl,TRACK_ToneTable_FM
     873.  00:47CA  22 2D C0            	ld	(replay_tonetable),hl
     874.  00:47CD                      	;--- set SCC balance
     875.  00:47CD  2A 05 C0            	ld	hl,(replay_mainFMvol)
     876.  00:47D0  22 29 C0            	ld	(replay_mainvol),hl
     877.  00:47D3                      
     878.  00:47D3                      	;--------------------
     879.  00:47D3                      	;--- Process track 3
     880.  00:47D3                      	;--------------------
     881.  00:47D3  DD 21 92 C0         	ld	ix,TRACK_Chan3+17
     882.  00:47D7  3A 8B C0            	ld	a,(TRACK_Chan3+17+TRACK_Flags)
     883.  00:47DA  57                  	ld	d,a
     884.  00:47DB  CD B0 4B            	call	process_data_chan
     885.  00:47DE  D2 E4 47            	jp	nc,.skipc
     886.  00:47E1  22 89 C1            	ld	(FM_regToneA),hl
     887.  00:47E4                      .skipc:
     888.  00:47E4  3A AB C1            	ld	a,(FM_regVOLF)
     889.  00:47E7  57                  	ld	d,a
     890.  00:47E8  3A 8A C0            	ld	a,(TRACK_Chan3+17+TRACK_Voice)
     891.  00:47EB  E6 F0               	and	$f0
     892.  00:47ED  B2                  	or	d
     893.  00:47EE  32 8D C1            	ld	(FM_regVOLA),a	
     894.  00:47F1                      
     895.  00:47F1                      
     896.  00:47F1                      _rdd_cont:
     897.  00:47F1                      	;--------------------
     898.  00:47F1                      	;--- Process track 4
     899.  00:47F1                      	;--------------------
     900.  00:47F1  DD 21 B9 C0         	ld	ix,TRACK_Chan4+17
     901.  00:47F5  3A B2 C0            	ld	a,(TRACK_Chan4+17+TRACK_Flags)
     902.  00:47F8  57                  	ld	d,a
     903.  00:47F9  CD B0 4B            	call	process_data_chan
     904.  00:47FC  D2 02 48            	jp	nc,.skipd
     905.  00:47FF  22 8F C1            	ld	(FM_regToneB),hl
     906.  00:4802                      .skipd:
     907.  00:4802  3A AB C1            	ld	a,(FM_regVOLF)	
     908.  00:4805  57                  	ld	d,a
     909.  00:4806  3A B1 C0            	ld	a,(TRACK_Chan4+17+TRACK_Voice)
     910.  00:4809  E6 F0               	and	$f0
     911.  00:480B  B2                  	or	d
     912.  00:480C  32 93 C1            	ld	(FM_regVOLB),a	
     913.  00:480F                      
     914.  00:480F                      	;--------------------
     915.  00:480F                      	;--- Process track 5
     916.  00:480F                      	;--------------------	
     917.  00:480F  DD 21 E0 C0         	ld	ix,TRACK_Chan5+17
     918.  00:4813  3A D9 C0            	ld	a,(TRACK_Chan5+17+TRACK_Flags)
     919.  00:4816  57                  	ld	d,a
     920.  00:4817  CD B0 4B            	call	process_data_chan
     921.  00:481A  D2 20 48            	jp	nc,.skipe
     922.  00:481D  22 95 C1            	ld	(FM_regToneC),hl
     923.  00:4820                      .skipe:
     924.  00:4820  3A AB C1            	ld	a,(FM_regVOLF)
     925.  00:4823  57                  	ld	d,a
     926.  00:4824  3A D8 C0            	ld	a,(TRACK_Chan5+17+TRACK_Voice)
     927.  00:4827  E6 F0               	and	$f0
     928.  00:4829  B2                  	or	d
     929.  00:482A  32 99 C1            	ld	(FM_regVOLC),a	
     930.  00:482D                      
     931.  00:482D                      	;--------------------
     932.  00:482D                      	;--- Process track 6
     933.  00:482D                      	;--------------------
     934.  00:482D  DD 21 07 C1         	ld	ix,TRACK_Chan6+17
     935.  00:4831  3A 00 C1            	ld	a,(TRACK_Chan6+17+TRACK_Flags)
     936.  00:4834  57                  	ld	d,a
     937.  00:4835  CD B0 4B            	call	process_data_chan
     938.  00:4838  D2 3E 48            	jp	nc,.skipf
     939.  00:483B  22 9B C1            	ld	(FM_regToneD),hl
     940.  00:483E                      .skipf:
     941.  00:483E  3A AB C1            	ld	a,(FM_regVOLF)
     942.  00:4841  57                  	ld	d,a
     943.  00:4842  3A FF C0            	ld	a,(TRACK_Chan6+17+TRACK_Voice)
     944.  00:4845  E6 F0               	and	$f0
     945.  00:4847  B2                  	or	d
     946.  00:4848  32 9F C1            	ld	(FM_regVOLD),a	
     947.  00:484B                      
     948.  00:484B                      	;--------------------
     949.  00:484B                      	;--- Process track 7
     950.  00:484B                      	;--------------------
     951.  00:484B  DD 21 2E C1         	ld	ix,TRACK_Chan7+17
     952.  00:484F  3A 27 C1            	ld	a,(TRACK_Chan7+17+TRACK_Flags)
     953.  00:4852  57                  	ld	d,a
     954.  00:4853  CD B0 4B            	call	process_data_chan
     955.  00:4856  D2 5C 48            	jp	nc,.skipg
     956.  00:4859  22 A1 C1            	ld	(FM_regToneE),hl
     957.  00:485C                      .skipg:
     958.  00:485C  3A AB C1            	ld	a,(FM_regVOLF)
     959.  00:485F  57                  	ld	d,a
     960.  00:4860  3A 26 C1            	ld	a,(TRACK_Chan7+17+TRACK_Voice)
     961.  00:4863  E6 F0               	and	$f0
     962.  00:4865  B2                  	or	d
     963.  00:4866  32 A5 C1            	ld	(FM_regVOLE),a		
     964.  00:4869                      
     965.  00:4869                      	;--------------------
     966.  00:4869                      	;--- Process track 8
     967.  00:4869                      	;--------------------		
     968.  00:4869  DD 21 55 C1         	ld	ix,TRACK_Chan8+17
     969.  00:486D  3A 4E C1            	ld	a,(TRACK_Chan8+17+TRACK_Flags)
     970.  00:4870  57                  	ld	d,a
     971.  00:4871  CD B0 4B            	call	process_data_chan
     972.  00:4874  D2 7A 48            	jp	nc,.skiph
     973.  00:4877  22 A7 C1            	ld	(FM_regToneF),hl
     974.  00:487A                      .skiph:
     975.  00:487A  3A AB C1            	ld	a,(FM_regVOLF)
     976.  00:487D  57                  	ld	d,a
     977.  00:487E  3A 4D C1            	ld	a,(TRACK_Chan8+17+TRACK_Voice)
     978.  00:4881  E6 F0               	and	$f0
     979.  00:4883  B2                  	or	d	
     980.  00:4884  32 AB C1            	ld	(FM_regVOLF),a
     981.  00:4887                      
     982.  00:4887                      	;--------------------
     983.  00:4887                      	;--- Process Drums
     984.  00:4887                      	;--------------------
     985.  00:4887  CD E6 4E            	call	process_drum
     986.  00:488A                      
     987.  00:488A                      process_fade:	
     988.  00:488A                      	;--------------------
     989.  00:488A                      	; Fade out processing
     990.  00:488A                      	;--------------------
     991.  00:488A  3A 25 C0            	ld	a,(replay_fade)
     992.  00:488D  A7                  	and	a
     993.  00:488E  C8                  	ret	z	; if replay fade = 0 then no fade active
     994.  00:488F                      	
     995.  00:488F                      	; decrease fade timer
     996.  00:488F  3A 26 C0            	ld	a,(replay_fade_timer)
     997.  00:4892  3D                  	dec	a
     998.  00:4893  C2 AC 48            	jp	nz,.no_new_step
     999.  00:4896                      
    1000.  00:4896  3A 27 C0            	ld	a,(replay_fade_vol)
    1001.  00:4899  3C                  	inc	a
    1002.  00:489A  FE 10               	cp	16
    1003.  00:489C  DA A6 48            	jp	c,.cont_fadeing
    1004.  00:489F  AF                  	xor	a
    1005.  00:48A0  32 25 C0            	ld	(replay_fade),a
    1006.  00:48A3  C3 24 44            	jp	replay_pause
    1007.  00:48A6                      .cont_fadeing:	
    1008.  00:48A6  32 27 C0            	ld	(replay_fade_vol),a
    1009.  00:48A9  3A 25 C0            	ld	a,(replay_fade)
    1010.  00:48AC                      .no_new_step:
    1011.  00:48AC  32 26 C0            	ld	(replay_fade_timer),a
    1012.  00:48AF                      
    1013.  00:48AF  3A 27 C0            	ld	a,(replay_fade_vol)
    1014.  00:48B2  4F                  	ld	c,a
    1015.  00:48B3  06 03               	ld	b,3
    1016.  00:48B5  21 73 C1            	ld	hl,PSG_regVOLA
    1017.  00:48B8  CD DC 48            	call	.calc_vol
    1018.  00:48BB  06 09               	ld	b,9
    1019.  00:48BD  21 8D C1            	ld	hl,FM_regVOLA
    1020.  00:48C0                      .calc_vol_FM:
    1021.  00:48C0  7E                  	ld	a,(hl)
    1022.  00:48C1  E6 0F               	and	$0f
    1023.  00:48C3  81                  	add	c
    1024.  00:48C4  FE 10               	cp	16
    1025.  00:48C6  DA CB 48            	jp	c,.no_limit_FM
    1026.  00:48C9  3E 0F               	ld	a,15
    1027.  00:48CB                      .no_limit_FM:
    1028.  00:48CB  57                  	ld	d,a
    1029.  00:48CC  7E                  	ld	a,(hl)
    1030.  00:48CD  E6 F0               	and	$f0
    1031.  00:48CF  B2                  	or	d
    1032.  00:48D0  77                  	ld	(hl),a
    1033.  00:48D1  3E 06               	ld	a,6
    1034.  00:48D3  85                  	add	a,l
    1035.  00:48D4  6F                  	ld	l,a
    1036.  00:48D5  D2 D9 48            	jp	nc,99f
    1037.  00:48D8  24                  	inc	h
    1038.  00:48D9                      99:
    1039.  00:48D9  10 E5               	djnz	.calc_vol_FM
    1040.  00:48DB  C9                  	ret
    1041.  00:48DC                      
    1042.  00:48DC                      .calc_vol:	
    1043.  00:48DC  7E                  	ld	a,(hl)
    1044.  00:48DD  91                  	sub	c
    1045.  00:48DE  D2 E2 48            	jp	nc,.no_carry
    1046.  00:48E1  AF                  	xor	a
    1047.  00:48E2                      .no_carry:	
    1048.  00:48E2  77                  	ld	(hl),a
    1049.  00:48E3  23                  	inc	hl
    1050.  00:48E4  10 F6               	djnz	.calc_vol
    1051.  00:48E6  C9                  	ret
    1052.  00:48E7                      
    1053.  00:48E7                      
    1054.  00:48E7                      
    1055.  00:48E7                      ;--------------------
    1056.  00:48E7                      	
    1057.  00:48E7                      	
    1058.  00:48E7                      ;--------------------
    1059.  00:48E7                      _replay_check_patternend:
    1060.  00:48E7                      	;--- Set track pointers to start
    1061.  00:48E7  2A 1D C0            	ld	hl,(replay_orderpointer)
    1062.  00:48EA  AF                  	xor	a
    1063.  00:48EB  BE                  	cp	(hl)
    1064.  00:48EC  C2 08 49            	jp	nz,.no_restart
    1065.  00:48EF  23                  	inc	hl
    1066.  00:48F0  BE                  	cp	(hl)
    1067.  00:48F1  2B                  	dec	hl
    1068.  00:48F2  C2 08 49            	jp	nz,.no_restart
    1069.  00:48F5                      	;--- next is restart order
    1070.  00:48F5  23                  	inc	hl
    1071.  00:48F6  23                  	inc	hl
    1072.  00:48F7  7E                  	ld	a,(hl)
    1073.  00:48F8  23                  	inc	hl
    1074.  00:48F9  66                  	ld	h,(hl)
    1075.  00:48FA  6F                  	ld	l,a
    1076.  00:48FB  BD                  	cp	l
    1077.  00:48FC  C2 08 49            	jp	nz,.restart
    1078.  00:48FF  A7                  	and	a
    1079.  00:4900  C2 08 49            	jp	nz,.restart
    1080.  00:4903                      	;--- STOP - There is no restart value
    1081.  00:4903  CD 24 44            	call	replay_pause
    1082.  00:4906  F1                  	pop	af	;--- skip return to processing 
    1083.  00:4907  C9                  	ret		
    1084.  00:4908                      
    1085.  00:4908                      .restart:
    1086.  00:4908                      .no_restart:	
    1087.  00:4908  11 0D C0            	ld	de,TRACK_pointer1
    1088.  00:490B  01 10 00            	ld	bc,16
    1089.  00:490E  ED B0               	ldir
    1090.  00:4910  22 1D C0            	ld	(replay_orderpointer),hl		; store pointer for next set
    1091.  00:4913                      								; of strack pointers
    1092.  00:4913  C9                  	ret
    1093.  00:4914                      
    1094.  00:4914                      
    1095.  00:4914                      
    1096.  00:4914                      
    1097.  00:4914                      
    1098.  00:4914                      
    1099.  00:4914                      ;===========================================================
    1100.  00:4914                      ; ---	decode_data_chan
    1101.  00:4914                      ; Process the channel data
    1102.  00:4914                      ; 
    1103.  00:4914                      ; in BC is the pointer to the	data
    1104.  00:4914                      ;    D contains flags.
    1105.  00:4914                      ;===========================================================	
    1106.  00:4914                      decode_data_chan:
    1107.  00:4914                      	;--- initialize data
    1108.  00:4914  32 28 C0            	ld	(replay_previous_note),a
    1109.  00:4917                      
    1110.  00:4917                      	;=============
    1111.  00:4917                      	; Note 
    1112.  00:4917                      	;=============
    1113.  00:4917  0A                  	ld	a,(bc)
    1114.  00:4918  FE 60               	cp	_REL
    1115.  00:491A  DA 8D 49            	jp	c,_replay_decode_note
    1116.  00:491D  FE 61               	cp	_SUS
    1117.  00:491F  DA 99 49            	jp	c,_replay_decode_release
    1118.  00:4922  CA A4 49            	jp	z,_replay_decode_sustain
    1119.  00:4925                      _rdn2:
    1120.  00:4925  FE 72               	cp	_INS
    1121.  00:4927  DA F1 49            	jp	c,_replay_decode_vol
    1122.  00:492A                      _rdv2:
    1123.  00:492A  FE 91               	cp	_CMD
    1124.  00:492C  DA AD 49            	jp	c,_replay_decode_ins
    1125.  00:492F                      _rdi2:
    1126.  00:492F  FE BF               	cp	_EOT
    1127.  00:4931  DA 06 4A            	jp	c,_replaydecode_cmd
    1128.  00:4934  C3 69 49            	jp	_replay_decode_delay
    1129.  00:4937                      
    1130.  00:4937                      _rdn:
    1131.  00:4937  FE 62               	cp	_SUS+1		
    1132.  00:4939  DA 59 49            	jp	c,_rd_delay
    1133.  00:493C  C3 25 49            	jp	_rdn2
    1134.  00:493F                      
    1135.  00:493F                      _rdi:
    1136.  00:493F  FE 91               	cp	_CMD
    1137.  00:4941  DA 59 49            	jp	c,_rd_delay
    1138.  00:4944  C3 2F 49            	jp	_rdi2
    1139.  00:4947                      
    1140.  00:4947                      _rdv:
    1141.  00:4947  FE 72               	cp	_INS
    1142.  00:4949  DA 59 49            	jp	c,_rd_delay
    1143.  00:494C  C3 2A 49            	jp	_rdv2
    1144.  00:494F                      _rdc:
    1145.  00:494F  03                  	inc	bc
    1146.  00:4950                      _rdc_noinc:	
    1147.  00:4950  0A                  	ld	a,(bc)
    1148.  00:4951  FE BF               	cp	_EOT
    1149.  00:4953  DA 59 49            	jp	c,_rd_delay
    1150.  00:4956  C3 69 49            	jp	_replay_decode_delay
    1151.  00:4959                      
    1152.  00:4959                      	;--- re-init previous delay
    1153.  00:4959                      _rd_delay:
    1154.  00:4959  DD 7E 14            	ld	a,(ix+TRACK_prevDelay)
    1155.  00:495C  DD 77 13            	ld	(ix+TRACK_Delay),a
    1156.  00:495F  C3 75 49            	jp	_replay_decode_trigger_porttone_check
    1157.  00:4962                      
    1158.  00:4962                      _rd_eot:
    1159.  00:4962  3C                  	inc	a
    1160.  00:4963  DD 77 13            	ld	(ix+TRACK_Delay),a
    1161.  00:4966  C3 75 49            	jp	_replay_decode_trigger_porttone_check
    1162.  00:4969                      
    1163.  00:4969                      _replay_decode_delay:
    1164.  00:4969  D6 BF               	sub	_WAIT-1
    1165.  00:496B  CA 62 49            	jp	z,_rd_eot		; EOT found
    1166.  00:496E  DD 77 13            	ld	(ix+TRACK_Delay),a
    1167.  00:4971  DD 77 14            	ld	(ix+TRACK_prevDelay),a
    1168.  00:4974  03                  	inc	bc
    1169.  00:4975                      	
    1170.  00:4975                      _replay_decode_trigger_porttone_check:	
    1171.  00:4975                      	;--- Check cmd active and note trigger?
    1172.  00:4975  CB 42               	bit 	B_TRGNOT,d
    1173.  00:4977  C8                  	ret	z
    1174.  00:4978  CB 5A               	bit	B_TRGCMD,d
    1175.  00:497A  C8                  	ret	z
    1176.  00:497B                      	;--- Check for cmd3 or cmd5 (value 0 or 1) to continue
    1177.  00:497B  DD 7E F0            	ld	a,(ix+TRACK_Command)
    1178.  00:497E  FE 02               	cp	2
    1179.  00:4980  D0                  	ret	nc
    1180.  00:4981                      	;-- trigger CMD
    1181.  00:4981  CB 82               	res	B_TRGNOT,d
    1182.  00:4983  3E 12               	ld	a,0010010b		;B_ACTNOT B_KEYON
    1183.  00:4985  B2                  	or	d
    1184.  00:4986  57                  	ld 	d,a
    1185.  00:4987  DD 7E 09            	ld	a,(ix+TRACK_cmd_3)
    1186.  00:498A  C3 59 4A            	jp	decode_cmd3_port_tone_new_note	
    1187.  00:498D                      
    1188.  00:498D                      _replay_decode_note:
    1189.  00:498D  DD 77 F6            	ld	(ix+TRACK_Note),a
    1190.  00:4990  CB C2               	set 	B_TRGNOT,d
    1191.  00:4992  CB E2               	set 	B_KEYON,d
    1192.  00:4994                      
    1193.  00:4994  03                  	inc	bc
    1194.  00:4995  0A                  	ld	a,(bc)
    1195.  00:4996  C3 37 49            	jp	_rdn
    1196.  00:4999                      	
    1197.  00:4999                      
    1198.  00:4999                      
    1199.  00:4999                      _replay_decode_release:
    1200.  00:4999  CB 8A               	res	B_ACTNOT,d				; reset note bit to	0
    1201.  00:499B  CB AA               	res	B_SUST,d				; rest sustain
    1202.  00:499D  CB A2               	res	B_KEYON,d				; reset Key on
    1203.  00:499F                      
    1204.  00:499F  03                  	inc	bc
    1205.  00:49A0  0A                  	ld	a,(bc)
    1206.  00:49A1  C3 37 49            	jp	_rdn	
    1207.  00:49A4                      	
    1208.  00:49A4                      
    1209.  00:49A4                      
    1210.  00:49A4                      _replay_decode_sustain:
    1211.  00:49A4  CB EA               	set	B_SUST,d				; rest sustain
    1212.  00:49A6  CB A2               	res	B_KEYON,d				; reset Key on
    1213.  00:49A8                      
    1214.  00:49A8  03                  	inc	bc
    1215.  00:49A9  0A                  	ld	a,(bc)
    1216.  00:49AA  C3 37 49            	jp	_rdn
    1217.  00:49AD                      
    1218.  00:49AD                      
    1219.  00:49AD                      
    1220.  00:49AD                      _replay_decode_ins:
    1221.  00:49AD  D6 72               	sub	_INS
    1222.  00:49AF  DD BE EF            	cp	(ix+TRACK_Instrument)
    1223.  00:49B2  CA EC 49            	jp	z,.skip_ins
    1224.  00:49B5                      	
    1225.  00:49B5                      	;--- instrument change found	
    1226.  00:49B5  DD 77 EF            	ld	(ix+TRACK_Instrument),a
    1227.  00:49B8                      
    1228.  00:49B8                      	;--- set instrument pointer
    1229.  00:49B8  87                  	add	a
    1230.  00:49B9  2A 0B C0            	ld	hl,(replay_insbase)
    1231.  00:49BC  85                  	add	a,l
    1232.  00:49BD  6F                  	ld	l,a
    1233.  00:49BE  D2 C2 49            	jp	nc,.skip
    1234.  00:49C1  24                  	inc	h
    1235.  00:49C2                      .skip:
    1236.  00:49C2  7E                  	ld	a,(hl)
    1237.  00:49C3  23                  	inc	hl
    1238.  00:49C4  66                  	ld	h,(hl)
    1239.  00:49C5  6F                  	ld	l,a
    1240.  00:49C6                      
    1241.  00:49C6                      	;-- get voice
    1242.  00:49C6  7E                  	ld	a,(hl)
    1243.  00:49C7  23                  	inc	hl
    1244.  00:49C8                      		
    1245.  00:49C8                      	;--- Set the software voice (if needed)
    1246.  00:49C8  A7                  	and	a
    1247.  00:49C9  C2 DD 49            	jp	nz,.skip_soft
    1248.  00:49CC                      	;--- software voice found
    1249.  00:49CC                      	
    1250.  00:49CC  5E                  	ld	e,(hl)		; value is the offset in the soft voice data (8bytes)
    1251.  00:49CD  23                  	inc	hl
    1252.  00:49CE  3A 2B C0            	ld	a,(replay_softvoice)
    1253.  00:49D1  BB                  	cp	e
    1254.  00:49D2  CA DC 49            	jp	z,.skip_soft_update
    1255.  00:49D5                      
    1256.  00:49D5  7B                  	ld	a,e
    1257.  00:49D6  32 2B C0            	ld	(replay_softvoice),a
    1258.  00:49D9  32 2C C0            	ld 	(FM_softvoice_req),a
    1259.  00:49DC                      .skip_soft_update:
    1260.  00:49DC  AF                  	xor 	a
    1261.  00:49DD                      .skip_soft:
    1262.  00:49DD  DD 77 F8            	ld	(ix+TRACK_Voice),a
    1263.  00:49E0                      
    1264.  00:49E0                      	;--- Store the macro start
    1265.  00:49E0  DD 75 F1            	ld	(ix+TRACK_MacroPointer),l
    1266.  00:49E3  DD 74 F2            	ld	(ix+TRACK_MacroPointer+1),h	
    1267.  00:49E6                      	;--- Store the macro re-start
    1268.  00:49E6  DD 75 F3            	ld	(ix+TRACK_MacroStart),l
    1269.  00:49E9  DD 74 F4            	ld	(ix+TRACK_MacroStart+1),h
    1270.  00:49EC                      
    1271.  00:49EC                      .skip_ins:	
    1272.  00:49EC  03                  	inc	bc
    1273.  00:49ED  0A                  	ld	a,(bc)
    1274.  00:49EE  C3 3F 49            	jp	_rdi
    1275.  00:49F1                      
    1276.  00:49F1                      
    1277.  00:49F1                      
    1278.  00:49F1                      _replay_decode_vol:
    1279.  00:49F1  D6 62               	sub	_VOL
    1280.  00:49F3                      	
    1281.  00:49F3  87                  	add	a
    1282.  00:49F4  87                  	add	a
    1283.  00:49F5  87                  	add	a
    1284.  00:49F6  87                  	add	a
    1285.  00:49F7                      	
    1286.  00:49F7                      	;--- Set new base	volume (high byte) but keep relative offset (low byte)
    1287.  00:49F7  5F                  	ld	e,a
    1288.  00:49F8  DD 7E F7            	ld	a,(ix+TRACK_Volume)
    1289.  00:49FB  E6 0F               	and	0xf
    1290.  00:49FD  B3                  	or	e
    1291.  00:49FE  DD 77 F7            	ld	(ix+TRACK_Volume),a
    1292.  00:4A01                      
    1293.  00:4A01  03                  	inc	bc
    1294.  00:4A02  0A                  	ld	a,(bc)
    1295.  00:4A03  C3 47 49            	jp	_rdv
    1296.  00:4A06                      
    1297.  00:4A06                      
    1298.  00:4A06                      
    1299.  00:4A06                      _replaydecode_cmd:
    1300.  00:4A06  D6 91               	sub	_CMD
    1301.  00:4A08                      	
    1302.  00:4A08  5F                  	ld	e,a				; store command for later
    1303.  00:4A09                      
    1304.  00:4A09  21 6A 41            	ld	hl,DECODE_CMDLIST
    1305.  00:4A0C  87                  	add	a
    1306.  00:4A0D  87                  	add	a
    1307.  00:4A0E  85                  	add	l
    1308.  00:4A0F  6F                  	ld	l,a
    1309.  00:4A10  03                  	inc	bc
    1310.  00:4A11  0A                  	ld	a,(bc)
    1311.  00:4A12  E9                  	jp	hl
    1312.  00:4A13                      
    1313.  00:4A13                      
    1314.  00:4A13                      decode_cmd0_arpeggio:
    1315.  00:4A13                      	; in:	[A] contains the paramvalue
    1316.  00:4A13                      	; 
    1317.  00:4A13                      	; ! do not change	[BC] this is the data pointer
    1318.  00:4A13                      	;--------------------------------------------------
    1319.  00:4A13  DD 77 06            	ld	(ix+TRACK_cmd_0),a
    1320.  00:4A16  DD 73 F0            	ld	(ix+TRACK_Command),e
    1321.  00:4A19  CB DA               	set	B_TRGCMD,d
    1322.  00:4A1B  DD 36 11 00         	ld	(ix+TRACK_Timer),0
    1323.  00:4A1F  DD 36 12 02         	ld	(ix+TRACK_Step),2
    1324.  00:4A23  C3 4F 49            	jp	_rdc
    1325.  00:4A26                      
    1326.  00:4A26                      
    1327.  00:4A26                      	
    1328.  00:4A26                      decode_cmd1_port_up:
    1329.  00:4A26                      	; in:	[A] contains the paramvalue
    1330.  00:4A26                      	; 
    1331.  00:4A26                      	; ! do not change	[BC] this is the data pointer
    1332.  00:4A26                      	;--------------------------------------------------
    1333.  00:4A26  DD 73 F0            	ld	(ix+TRACK_Command),e
    1334.  00:4A29  DD 77 07            	ld	(ix+TRACK_cmd_1),a
    1335.  00:4A2C  CB DA               	set	B_TRGCMD,d
    1336.  00:4A2E  C3 4F 49            	jp	_rdc
    1337.  00:4A31                      	
    1338.  00:4A31                      	 
    1339.  00:4A31                      	 
    1340.  00:4A31                      decode_cmd2_port_down:
    1341.  00:4A31                      	; in:	[A] contains the paramvalue
    1342.  00:4A31                      	; 
    1343.  00:4A31                      	; ! do not change	[BC] this is the data pointer
    1344.  00:4A31                      	;--------------------------------------------------
    1345.  00:4A31  DD 73 F0            	ld	(ix+TRACK_Command),e
    1346.  00:4A34  DD 77 08            	ld	(ix+TRACK_cmd_2),a
    1347.  00:4A37  CB DA               	set	B_TRGCMD,d
    1348.  00:4A39  C3 4F 49            	jp	_rdc
    1349.  00:4A3C                      
    1350.  00:4A3C                      
    1351.  00:4A3C                      decode_cmd3_port_tone:
    1352.  00:4A3C                      	; in:	[A] contains the param value
    1353.  00:4A3C                      	; 
    1354.  00:4A3C                      	; ! do not change	[BC] this is the data pointer
    1355.  00:4A3C                      	;--------------------------------------------------
    1356.  00:4A3C  DD 73 F0            	ld	(ix+TRACK_Command),e
    1357.  00:4A3F  CB DA               	set	B_TRGCMD,d
    1358.  00:4A41  CB CA               	set	B_ACTNOT,d
    1359.  00:4A43                      	
    1360.  00:4A43  DD 77 09            	ld	(ix+TRACK_cmd_3),a
    1361.  00:4A46  DD 36 11 02         	ld	(ix+TRACK_Timer),2
    1362.  00:4A4A                      
    1363.  00:4A4A                      	;--- Check if we have a	note on the	same event
    1364.  00:4A4A  CB 42               	bit	B_TRGNOT,d
    1365.  00:4A4C  CA 4F 49            	jp	z,_rdc
    1366.  00:4A4F                      
    1367.  00:4A4F  CB E2               	set	B_KEYON,d
    1368.  00:4A51  CB 82               	res 	B_TRGNOT,d
    1369.  00:4A53                      	
    1370.  00:4A53  CD 59 4A            	call	decode_cmd3_port_tone_new_note
    1371.  00:4A56  C3 4F 49            	jp	_rdc
    1372.  00:4A59                      	
    1373.  00:4A59                      decode_cmd3_port_tone_new_note:
    1374.  00:4A59                      	;-- remove deviation from parameter
    1375.  00:4A59  E6 7F               	and 	$7f
    1376.  00:4A5B  08                  	ex	af,af'		;'
    1377.  00:4A5C  D9                  	exx
    1378.  00:4A5D                      
    1379.  00:4A5D                      	;-- get the	previous note freq
    1380.  00:4A5D  3A 28 C0            	ld	a,(replay_previous_note)
    1381.  00:4A60  87                  	add	a
    1382.  00:4A61  2A 2D C0            	ld	hl,(replay_tonetable)
    1383.  00:4A64  85                  	add	a,l
    1384.  00:4A65  6F                  	ld	l,a
    1385.  00:4A66  D2 6A 4A            	jp	nc,.skip
    1386.  00:4A69  24                  	inc	h
    1387.  00:4A6A                      .skip:
    1388.  00:4A6A  5E                  	ld	e,(hl)
    1389.  00:4A6B  23                  	inc	hl
    1390.  00:4A6C  56                  	ld	d,(hl)
    1391.  00:4A6D                      
    1392.  00:4A6D                      	; add	the toneadd
    1393.  00:4A6D  DD 6E 00            	ld	l,(ix+TRACK_cmd_ToneSlideAdd)
    1394.  00:4A70  DD 66 01            	ld	h,(ix+TRACK_cmd_ToneSlideAdd+1)
    1395.  00:4A73                      
    1396.  00:4A73  19                  	add	hl,de	
    1397.  00:4A74  EB                  	ex	de,hl				; store current freq in	[de]
    1398.  00:4A75                      	;--- get the current note freq
    1399.  00:4A75  DD 7E F6            	ld	a,(ix+TRACK_Note)
    1400.  00:4A78  87                  	add	a
    1401.  00:4A79  2A 2D C0            	ld	hl,(replay_tonetable)	;TRACK_ToneTable
    1402.  00:4A7C  85                  	add	a,l
    1403.  00:4A7D  6F                  	ld	l,a
    1404.  00:4A7E  D2 82 4A            	jp	nc,.skip2
    1405.  00:4A81  24                  	inc	h
    1406.  00:4A82                      .skip2:
    1407.  00:4A82  7E                  	ld	a,(hl)
    1408.  00:4A83  23                  	inc	hl
    1409.  00:4A84  66                  	ld	h,(hl)
    1410.  00:4A85  6F                  	ld	l,a				; destination freq in [hl]
    1411.  00:4A86                      	
    1412.  00:4A86                      	;--- Calculate the delta
    1413.  00:4A86  EB                  	ex	de,hl
    1414.  00:4A87  ED 52               	sbc	hl,de				; results in pos/neg delta
    1415.  00:4A89                      	
    1416.  00:4A89  DD 75 00            	ld	(ix+TRACK_cmd_ToneSlideAdd),l
    1417.  00:4A8C  DD 74 01            	ld	(ix+TRACK_cmd_ToneSlideAdd+1),h
    1418.  00:4A8F                      	
    1419.  00:4A8F                      	;--- re-apply deviation
    1420.  00:4A8F  08                  	ex	af,af'			;'
    1421.  00:4A90  CB 7C               	bit	7,h
    1422.  00:4A92  C2 97 4A            	jp	nz,.skip3
    1423.  00:4A95  F6 80               	or 	128
    1424.  00:4A97                      .skip3:
    1425.  00:4A97  DD 77 09            	ld 	(ix+TRACK_cmd_3),a
    1426.  00:4A9A                      	
    1427.  00:4A9A  D9                  	exx					; restore flags in D
    1428.  00:4A9B  C9                  	ret
    1429.  00:4A9C                      	
    1430.  00:4A9C                      	
    1431.  00:4A9C                      decode_cmd8_tremolo:
    1432.  00:4A9C                      	; in:	[A] contains the paramvalue
    1433.  00:4A9C                      	; 
    1434.  00:4A9C                      	; ! do not change	[BC] this is the data pointer
    1435.  00:4A9C                      	;--------------------------------------------------
    1436.  00:4A9C                      decode_cmd4_vibrato:
    1437.  00:4A9C                      	; in:	[A] contains the paramvalue
    1438.  00:4A9C                      	; 
    1439.  00:4A9C                      	; ! do not change	[BC] this is the data pointer
    1440.  00:4A9C                      	;--------------------------------------------------
    1441.  00:4A9C                      	; Vibrato with speed x and depth y.	This command 
    1442.  00:4A9C                      	; will oscillate the frequency of the current note
    1443.  00:4A9C                      	; with a sine wave. 
    1444.  00:4A9C                      	;
    1445.  00:4A9C                      	; high 3 bits is depth (0-7) (direct offset in sinetable)
    1446.  00:4A9C                      	; low 5 bits is the speed. 1-16
    1447.  00:4A9C                      	;--- Init values
    1448.  00:4A9C  DD 73 F0            	ld	(ix+TRACK_Command),e
    1449.  00:4A9F  5F                  	ld	e,a
    1450.  00:4AA0                      
    1451.  00:4AA0                      	;--- Set the speed
    1452.  00:4AA0  E6 0F               	and	$0f
    1453.  00:4AA2  CA AD 4A            	jp	z,.depth
    1454.  00:4AA5  DD 77 0C            	ld	(ix+TRACK_cmd_4_step),a	
    1455.  00:4AA8  ED 44               	neg	
    1456.  00:4AAA  DD 77 12            	ld	(ix+TRACK_Step),a	
    1457.  00:4AAD                      	
    1458.  00:4AAD                      .depth:
    1459.  00:4AAD                      	;-- set the depth
    1460.  00:4AAD  7B                  	ld	a,e
    1461.  00:4AAE  E6 F0               	and	$f0
    1462.  00:4AB0  CA C5 4A            	jp	z,.end		; set depth when 0 only when command was not active.
    1463.  00:4AB3                      
    1464.  00:4AB3  FE 90               	cp	$90
    1465.  00:4AB5  DA BF 4A            	jp	c,.skip_extended
    1466.  00:4AB8                      	;--- extended
    1467.  00:4AB8  D6 80               	sub	$80
    1468.  00:4ABA  1E 0B               	ld	e,11
    1469.  00:4ABC  DD 73 F0            	ld	(ix+TRACK_Command),e
    1470.  00:4ABF                      
    1471.  00:4ABF                      .skip_extended:
    1472.  00:4ABF  D6 10               	sub	$10
    1473.  00:4AC1  87                  	add	a,a
    1474.  00:4AC2  DD 77 0A            	ld	(ix+TRACK_cmd_4_depth),a
    1475.  00:4AC5                      	
    1476.  00:4AC5                      .end:	
    1477.  00:4AC5  CB DA               	set	B_TRGCMD,d
    1478.  00:4AC7  C3 4F 49            	jp	_rdc	
    1479.  00:4ACA                      
    1480.  00:4ACA                      
    1481.  00:4ACA                      decode_cmd5_vibrato_port_tone:
    1482.  00:4ACA                      	; in:	[A] contains the paramvalue
    1483.  00:4ACA                      	; 
    1484.  00:4ACA                      	; ! do not change	[BC] this is the data pointer
    1485.  00:4ACA                      	;--------------------------------------------------
    1486.  00:4ACA                      	; portTone	+ volumeslide
    1487.  00:4ACA                      	;--- Init values
    1488.  00:4ACA  DD 73 F0            	ld	(ix+TRACK_Command),e
    1489.  00:4ACD  DD 77 0E            	ld	(ix+TRACK_cmd_A),a
    1490.  00:4AD0  CB DA               	set	B_TRGCMD,d
    1491.  00:4AD2                      	
    1492.  00:4AD2                      	;-- Check if new note
    1493.  00:4AD2  CB 42               	bit	B_TRGNOT,d
    1494.  00:4AD4  CA 4F 49            	jp	z,_rdc
    1495.  00:4AD7                      	
    1496.  00:4AD7                      	;-- Set new port tone value
    1497.  00:4AD7  CB E2               	set	B_KEYON,d
    1498.  00:4AD9  CB 82               	res	B_TRGNOT,d
    1499.  00:4ADB  DD 7E 09            	ld	a,(ix+TRACK_cmd_3)
    1500.  00:4ADE  C3 59 4A            	jp	decode_cmd3_port_tone_new_note
    1501.  00:4AE1                      	
    1502.  00:4AE1                      	
    1503.  00:4AE1                      	
    1504.  00:4AE1                      decode_cmd6_vibrato_vol:
    1505.  00:4AE1                      	; in:	[A] contains the paramvalue
    1506.  00:4AE1                      	; 
    1507.  00:4AE1                      	; ! do not change	[BC] this is the data pointer
    1508.  00:4AE1                      	;--------------------------------------------------
    1509.  00:4AE1                      decode_cmd7_vol_slide:
    1510.  00:4AE1                      	; in:	[A] contains the paramvalue
    1511.  00:4AE1                      	; 
    1512.  00:4AE1                      	; ! do not change	[BC] this is the data pointer
    1513.  00:4AE1                      	;--------------------------------------------------
    1514.  00:4AE1  DD 73 F0            	ld	(ix+TRACK_Command),e	
    1515.  00:4AE4  DD 77 0E            	ld	(ix+TRACK_cmd_A),a
    1516.  00:4AE7  E6 7F               	and  	$7f
    1517.  00:4AE9  DD 77 11            	ld	(ix+TRACK_Timer),a
    1518.  00:4AEC  CB DA               	set	B_TRGCMD,d
    1519.  00:4AEE  C3 4F 49            	jp	_rdc
    1520.  00:4AF1                      
    1521.  00:4AF1                      
    1522.  00:4AF1                      decode_cmd9_note_cut:
    1523.  00:4AF1  CB DA               	set	B_TRGCMD,d
    1524.  00:4AF3  DD 73 F0            	ld	(ix+TRACK_Command),e
    1525.  00:4AF6  DD 77 11            	ld	(ix+TRACK_Timer),a		; set	the timer to param y
    1526.  00:4AF9  C3 4F 49            	jp 	_rdc
    1527.  00:4AFC                      
    1528.  00:4AFC                      
    1529.  00:4AFC                      decode_cmd10_note_delay:
    1530.  00:4AFC  CB 42               	bit	B_TRGNOT,d		; is there a note	in this eventstep?
    1531.  00:4AFE  CA 4F 49            	jp	z,_rdc
    1532.  00:4B01                      
    1533.  00:4B01  CB DA               	set	B_TRGCMD,d					; command active
    1534.  00:4B03  CB 82               	res	B_TRGNOT,d					; reset any	trigger note
    1535.  00:4B05  DD 73 F0            	ld	(ix+TRACK_Command),e
    1536.  00:4B08                      	
    1537.  00:4B08  DD 77 11            	ld	(ix+TRACK_Timer),a			; set	the timer to param y
    1538.  00:4B0B  DD 7E F6            	ld	a,(ix+TRACK_Note)
    1539.  00:4B0E  DD 77 10            	ld	(ix+TRACK_cmd_E),a			; store the	new note
    1540.  00:4B11  3A 28 C0            	ld	a,(replay_previous_note)
    1541.  00:4B14  DD 77 F6            	ld	(ix+TRACK_Note),a				; restore the old	note
    1542.  00:4B17  C3 4F 49            	jp	_rdc	
    1543.  00:4B1A                      
    1544.  00:4B1A                      
    1545.  00:4B1A                      decode_cmd11_command_end:
    1546.  00:4B1A                      	; in:	[A] contains the paramvalue
    1547.  00:4B1A                      	; 
    1548.  00:4B1A                      	; ! do not change	[BC] this is the data pointer
    1549.  00:4B1A                      	;--------------------------------------------------
    1550.  00:4B1A  CB 9A               	res	B_TRGCMD,d
    1551.  00:4B1C  C3 50 49            	jp	_rdc_noinc
    1552.  00:4B1F                      	
    1553.  00:4B1F                      decode_cmd12_drum:
    1554.  00:4B1F                      	; Get the base addres of the drum list
    1555.  00:4B1F  2A 09 C0            	ld	hl,(replay_drumbase)
    1556.  00:4B22  85                  	add	a,l 
    1557.  00:4B23  6F                  	ld	l,a
    1558.  00:4B24  D2 28 4B            	jp	nc,99f
    1559.  00:4B27  24                  	inc	h 
    1560.  00:4B28                      99:
    1561.  00:4B28                      	; Get the start of the drum macro
    1562.  00:4B28  7E                  	ld	a,(hl)
    1563.  00:4B29  23                  	inc	hl
    1564.  00:4B2A  66                  	ld	h,(hl)
    1565.  00:4B2B  6F                  	ld	l,a
    1566.  00:4B2C                      	
    1567.  00:4B2C                      	; Store the address
    1568.  00:4B2C  22 C2 C1            	ld 	(FM_DRUM_MACRO),hl
    1569.  00:4B2F  7C                  	ld	a,h
    1570.  00:4B30  32 C1 C1            	ld	(FM_DRUM_ACTIVE),a
    1571.  00:4B33  C3 4F 49            	jp	_rdc		
    1572.  00:4B36                      		
    1573.  00:4B36                      	
    1574.  00:4B36                      
    1575.  00:4B36                      
    1576.  00:4B36                      decode_cmd13_arp_speed:
    1577.  00:4B36  32 24 C0            	ld	(replay_arp_speed),a		; store the halve not to add
    1578.  00:4B39  C3 4F 49            	jp	_rdc	
    1579.  00:4B3C                      	
    1580.  00:4B3C                      	
    1581.  00:4B3C                      
    1582.  00:4B3C                      decode_cmd14_fine_up:
    1583.  00:4B3C  DD 77 00            	ld	(ix+TRACK_cmd_ToneSlideAdd),a
    1584.  00:4B3F  DD 36 01 00         	ld	(ix+TRACK_cmd_ToneSlideAdd+1),0
    1585.  00:4B43  C3 4F 49            	jp	_rdc
    1586.  00:4B46                      	
    1587.  00:4B46                      decode_cmd15_fine_down:
    1588.  00:4B46  DD 77 00            	ld	(ix+TRACK_cmd_ToneSlideAdd),a
    1589.  00:4B49  DD 36 01 FF         	ld	(ix+TRACK_cmd_ToneSlideAdd+1),$ff
    1590.  00:4B4D  C3 4F 49            	jp	_rdc
    1591.  00:4B50                      
    1592.  00:4B50                      
    1593.  00:4B50                      decode_cmd16_notelink:
    1594.  00:4B50  CB 82               	res	B_TRGNOT,d
    1595.  00:4B52  CB E2               	set 	B_KEYON,d
    1596.  00:4B54  C3 50 49            	jp	_rdc_noinc	
    1597.  00:4B57                      
    1598.  00:4B57                      decode_cmd17_track_detune:
    1599.  00:4B57                      	; This command sets the	detune of the track.
    1600.  00:4B57  5F                  	ld	e,a
    1601.  00:4B58  E6 07               	and	0x07		; low	4 bits is value
    1602.  00:4B5A  CB 5B               	bit	3,e		; Center around 8
    1603.  00:4B5C  CA 6C 4B            	jp	z,.pos
    1604.  00:4B5F  3C                  	inc	a
    1605.  00:4B60  ED 44               	neg			; make correct value
    1606.  00:4B62  DD 77 04            	ld	(ix+TRACK_cmd_detune),a
    1607.  00:4B65  DD 36 05 FF         	ld	(ix+TRACK_cmd_detune+1),0xff
    1608.  00:4B69                      
    1609.  00:4B69  C3 4F 49            	jp	_rdc	
    1610.  00:4B6C                      
    1611.  00:4B6C                      .pos:
    1612.  00:4B6C  DD 77 04            	ld	(ix+TRACK_cmd_detune),a
    1613.  00:4B6F  DD 36 05 00         	ld	(ix+TRACK_cmd_detune+1),0x00	
    1614.  00:4B73                      
    1615.  00:4B73  C3 4F 49            	jp	_rdc	
    1616.  00:4B76                      
    1617.  00:4B76                      
    1618.  00:4B76                      
    1619.  00:4B76                      decode_cmd18_trigger:
    1620.  00:4B76  32 02 C0            	ld	(replay_trigger),a
    1621.  00:4B79  C3 4F 49            	jp	_rdc		
    1622.  00:4B7C                      
    1623.  00:4B7C                      
    1624.  00:4B7C                      decode_cmd19_speed:
    1625.  00:4B7C  32 1F C0            	ld	(replay_speed),a
    1626.  00:4B7F                      	;--- Reset Timer == 0
    1627.  00:4B7F  CB 3F               	srl	a				; divide speed with 2
    1628.  00:4B81  5F                  	ld	e,a
    1629.  00:4B82  3E 00               	ld	a,0				
    1630.  00:4B84  8F                  	adc	a				; store carry of shift as subtimer
    1631.  00:4B85  32 20 C0            	ld	(replay_speed_subtimer),a
    1632.  00:4B88  83                  	add	a,e
    1633.  00:4B89  32 21 C0            	ld	(replay_speed_timer),a
    1634.  00:4B8C                      
    1635.  00:4B8C                      
    1636.  00:4B8C                      	; in:	[A] contains the paramvalue
    1637.  00:4B8C                      	; 
    1638.  00:4B8C                      	; ! do not change	[BC] this is the data pointer
    1639.  00:4B8C                      	;--------------------------------------------------
    1640.  00:4B8C                      	; This command set the envelope frequency using a
    1641.  00:4B8C                      	; multiplier value (00-ff)
    1642.  00:4B8C                      decode_cmd20_envelope_high:
    1643.  00:4B8C  32 77 C1            	ld	(PSG_regEnvH),a
    1644.  00:4B8F  C3 4F 49            	jp	_rdc	
    1645.  00:4B92                      
    1646.  00:4B92                      	; in:	[A] contains the paramvalue
    1647.  00:4B92                      	; 
    1648.  00:4B92                      	; ! do not change	[BC] this is the data pointer
    1649.  00:4B92                      	;--------------------------------------------------
    1650.  00:4B92                      	; This command set the envelope frequency using a
    1651.  00:4B92                      	; multiplier value (00-ff)
    1652.  00:4B92                      decode_cmd21_envelope_low:
    1653.  00:4B92  32 76 C1            	ld	(PSG_regEnvL),a
    1654.  00:4B95  C3 4F 49            	jp	_rdc	
    1655.  00:4B98                      
    1656.  00:4B98                      decode_cmd22_brightness:
    1657.  00:4B98  6F                  	ld	l,a
    1658.  00:4B99  3A 7D C1            	ld	a,(FM_Voicereg+4)
    1659.  00:4B9C  67                  	ld	h,a
    1660.  00:4B9D  85                  	add	a,l
    1661.  00:4B9E  E6 3F               	and	00111111b
    1662.  00:4BA0  6F                  	ld	l,a
    1663.  00:4BA1  7C                  	ld	a,h
    1664.  00:4BA2  E6 C0               	and	11000000b
    1665.  00:4BA4  B5                  	or	l
    1666.  00:4BA5  32 7D C1            	ld	(FM_Voicereg+4),a
    1667.  00:4BA8  3E 01               	ld	a,1
    1668.  00:4BAA  32 2C C0            	ld	(FM_softvoice_req),a
    1669.  00:4BAD  C3 4F 49            	jp	_rdc
    1670.  00:4BB0                      
    1671.  00:4BB0                      
    1672.  00:4BB0                      
    1673.  00:4BB0                      ;===========================================================
    1674.  00:4BB0                      ; ---process_data_chan
    1675.  00:4BB0                      ; Process the cmd/instrument/note and vol data 
    1676.  00:4BB0                      ; 
    1677.  00:4BB0                      ; in HL is the current tone freq
    1678.  00:4BB0                      ; in D is TRACK_FLAGS  
    1679.  00:4BB0                      ;===========================================================
    1680.  00:4BB0                      process_data_chan:
    1681.  00:4BB0                      	;-- set the	mixer	right
    1682.  00:4BB0  21 C4 C1            	ld	hl,FM_regMIXER   
    1683.  00:4BB3  CB 0E               	rrc	(hl)
    1684.  00:4BB5                      
    1685.  00:4BB5                      	;=====
    1686.  00:4BB5                      	; COMMAND
    1687.  00:4BB5                      	;=====
    1688.  00:4BB5  DD 36 0D 00         	ld	(ix+TRACK_cmd_NoteAdd),0			; Always reset note add
    1689.  00:4BB9  CB 5A               	bit	B_TRGCMD,d	;(ix+TRACK_Flags)
    1690.  00:4BBB  CA C9 4B            	jp	z,process_note
    1691.  00:4BBE                      
    1692.  00:4BBE  26 41               	ld	h,PROCESS_CMDLIST >> 8
    1693.  00:4BC0  DD 7E F0            	ld	a,(ix+TRACK_Command)
    1694.  00:4BC3  87                  	add	a
    1695.  00:4BC4  87                  	add	a
    1696.  00:4BC5  C6 3B               	add	PROCESS_CMDLIST & 255
    1697.  00:4BC7  6F                  	ld	l,a
    1698.  00:4BC8  E9                  	jp	hl
    1699.  00:4BC9                      
    1700.  00:4BC9                      
    1701.  00:4BC9                      process_commandEND:
    1702.  00:4BC9                      process_note:
    1703.  00:4BC9                      
    1704.  00:4BC9                      	;=====
    1705.  00:4BC9                      	; Note
    1706.  00:4BC9                      	;=====
    1707.  00:4BC9                      	;--- Check if we need to trigger a new note
    1708.  00:4BC9  CB 42               	bit	B_TRGNOT,d	;(ix+TRACK_Flags)
    1709.  00:4BCB  CA F8 4B            	jp	z,process_noNoteTrigger
    1710.  00:4BCE                      	
    1711.  00:4BCE                      
    1712.  00:4BCE                      process_triggerNote:	
    1713.  00:4BCE                      	;--- get new Note
    1714.  00:4BCE  CB 82               	res	B_TRGNOT,d		;(ix+TRACK_Flags)		; reset trigger note flag
    1715.  00:4BD0  CB CA               	set	B_ACTNOT,d		;(ix+TRACK_Flags)		; set	note active	flag
    1716.  00:4BD2                      
    1717.  00:4BD2  DD 6E F3            	ld	l,(ix+TRACK_MacroStart)
    1718.  00:4BD5  DD 66 F4            	ld	h,(ix+TRACK_MacroStart+1)
    1719.  00:4BD8                      	;--- Store the macro start	
    1720.  00:4BD8  DD 75 F1            	ld	(ix+TRACK_MacroPointer),l
    1721.  00:4BDB  DD 74 F2            	ld	(ix+TRACK_MacroPointer+1),h	
    1722.  00:4BDE                      
    1723.  00:4BDE  ED 73 00 C0         	ld	(_SP_Storage),sp
    1724.  00:4BE2  DD F9               	ld	sp,ix
    1725.  00:4BE4  F1                  	pop	af
    1726.  00:4BE5  F1                  	pop	af
    1727.  00:4BE6  21 00 00            	ld	hl,0
    1728.  00:4BE9  E5                  	push	hl
    1729.  00:4BEA  E5                  	push	hl		
    1730.  00:4BEB  E5                  	push	hl
    1731.  00:4BEC  E5                  	push	hl
    1732.  00:4BED  E5                  	push	hl
    1733.  00:4BEE  ED 7B 00 C0         	ld	sp,(_SP_Storage)
    1734.  00:4BF2  FD 2E 40            	ld	iyl,64			; keyon flip trigger
    1735.  00:4BF5  C3 FB 4B            	jp	process_instrument
    1736.  00:4BF8                      
    1737.  00:4BF8                      process_noNoteTrigger:
    1738.  00:4BF8  FD 2E 00            	ld	iyl,0				; keyon flip trigger
    1739.  00:4BFB                      	;==============
    1740.  00:4BFB                      	; Macro instrument
    1741.  00:4BFB                      	;==============
    1742.  00:4BFB                      process_instrument:
    1743.  00:4BFB  CB 4A               	bit	B_ACTNOT,d		
    1744.  00:4BFD  DD 72 F9            	ld	(ix+TRACK_Flags),d	
    1745.  00:4C00  CA 4E 4D            	jp	z,process_noNoteActive
    1746.  00:4C03                      	
    1747.  00:4C03                      	;--- Get the macro len and loop
    1748.  00:4C03  DD 5E F1            	ld	e,(ix+TRACK_MacroPointer)
    1749.  00:4C06  DD 56 F2            	ld	d,(ix+TRACK_MacroPointer+1)
    1750.  00:4C09                      
    1751.  00:4C09  26 41               	ld	h,MACROACTIONLIST >> 8
    1752.  00:4C0B                            ;-- Important: Make sure not to change register H in the macro handling 
    1753.  00:4C0B                      process_macro:
    1754.  00:4C0B  1A                  	ld	a,(de)
    1755.  00:4C0C  13                  	inc	de
    1756.  00:4C0D  87                  	add	a
    1757.  00:4C0E  6F                  	ld	l,a
    1758.  00:4C0F  E9                  	jp	hl
    1759.  00:4C10                      
    1760.  00:4C10                      
    1761.  00:4C10                      macro_mixer:
    1762.  00:4C10  1A                  	ld  a,(de)
    1763.  00:4C11  13                  	inc	de
    1764.  00:4C12  47                  	ld	b,a
    1765.  00:4C13  3A C4 C1            	ld	a,(FM_regMIXER)   
    1766.  00:4C16  B0                  	or	b
    1767.  00:4C17  32 C4 C1            	ld	(FM_regMIXER),a
    1768.  00:4C1A  C3 0B 4C            	jp  process_macro
    1769.  00:4C1D                      
    1770.  00:4C1D                      macro_tone_add:
    1771.  00:4C1D  1A                  	ld	a,(de)
    1772.  00:4C1E  13                  	inc   de
    1773.  00:4C1F  DD 86 FB            	add   (ix+TRACK_ToneAdd)
    1774.  00:4C22  DD 77 FB            	ld	(ix+TRACK_ToneAdd),a
    1775.  00:4C25  1A                  	ld	a,(de)
    1776.  00:4C26  DD 8E FC            	adc   (ix+TRACK_ToneAdd+1)
    1777.  00:4C29  DD 77 FC            	ld	(ix+TRACK_ToneAdd+1),a
    1778.  00:4C2C  13                  	inc	de
    1779.  00:4C2D  C3 0B 4C            	jp	process_macro
    1780.  00:4C30                      
    1781.  00:4C30                      macro_noise_base:
    1782.  00:4C30  1A                  	ld	a,(de)
    1783.  00:4C31  13                  	inc   de
    1784.  00:4C32  DD 77 FE            	ld	(ix+TRACK_Noise),a
    1785.  00:4C35  32 71 C1            	ld	(replay_noise),a
    1786.  00:4C38  C3 0B 4C            	jp	process_macro
    1787.  00:4C3B                      macro_noise_sub:
    1788.  00:4C3B                      macro_noise_add:
    1789.  00:4C3B  1A                  	ld	a,(de)
    1790.  00:4C3C  13                  	inc   de
    1791.  00:4C3D  DD 86 FE            	add   (ix+TRACK_Noise)
    1792.  00:4C40  DD 77 FE            	ld	(ix+TRACK_Noise),a
    1793.  00:4C43  32 71 C1            	ld	(replay_noise),a
    1794.  00:4C46  C3 0B 4C            	jp	process_macro
    1795.  00:4C49                      
    1796.  00:4C49                      macro_noise_vol:
    1797.  00:4C49  13                  	inc	de
    1798.  00:4C4A  C3 0B 4C            	jp	process_macro
    1799.  00:4C4D                      
    1800.  00:4C4D                      macro_voice:
    1801.  00:4C4D  1A                  	ld	a,(de)
    1802.  00:4C4E  13                  	inc	de
    1803.  00:4C4F  DD 77 F8            	ld	(ix+TRACK_Voice),a	
    1804.  00:4C52  C3 0B 4C            	jp	process_macro
    1805.  00:4C55                      
    1806.  00:4C55                      macro_envelope_shape:
    1807.  00:4C55  1A                  	ld	a,(de)
    1808.  00:4C56  13                  	inc	de
    1809.  00:4C57  32 78 C1            	ld	(PSG_regEnvShape),a
    1810.  00:4C5A                      
    1811.  00:4C5A                      macro_envelope:
    1812.  00:4C5A  3E 10               	ld	a,16			; set volume to 16 == envelope
    1813.  00:4C5C  32 AB C1            	ld	(FM_regVOLF),a
    1814.  00:4C5F  C3 B8 4C            	jp	_macro_end
    1815.  00:4C62                      
    1816.  00:4C62                      macro_loop:
    1817.  00:4C62  EB                  	ex	de,hl
    1818.  00:4C63  4E                  	ld	c,(hl)
    1819.  00:4C64  06 FF               	ld	b,$ff
    1820.  00:4C66  09                  	add	hl,bc
    1821.  00:4C67  EB                  	ex	de,hl
    1822.  00:4C68  C3 0B 4C            	jp	process_macro
    1823.  00:4C6B                      
    1824.  00:4C6B                      macro_stop:
    1825.  00:4C6B  DD CB F9 8E         	res	B_ACTNOT,(ix+TRACK_Flags)
    1826.  00:4C6F                            ; continue into volume same
    1827.  00:4C6F                      
    1828.  00:4C6F                      macro_volume_same:
    1829.  00:4C6F  DD 7E FD            	ld	a,(ix+TRACK_VolumeAdd)
    1830.  00:4C72  C3 9D 4C            	jp	_macro_set_volume
    1831.  00:4C75                      
    1832.  00:4C75                      macro_vol_base:
    1833.  00:4C75  1A                  	ld	a,(de)
    1834.  00:4C76  13                  	inc   de
    1835.  00:4C77  DD 77 FD            	ld	(ix+TRACK_VolumeAdd),a
    1836.  00:4C7A  C3 9D 4C            	jp	_macro_set_volume
    1837.  00:4C7D                      
    1838.  00:4C7D                      
    1839.  00:4C7D                      macro_vol_add:
    1840.  00:4C7D  1A                  	ld	a,(de)
    1841.  00:4C7E  13                  	inc   de
    1842.  00:4C7F  DD 86 FD            	add   (ix+TRACK_VolumeAdd)
    1843.  00:4C82  FE 10               	cp	16
    1844.  00:4C84  DA 89 4C            	jp	c,.nolimit
    1845.  00:4C87  3E 0F               	ld	a,$0f
    1846.  00:4C89                      .nolimit:	  
    1847.  00:4C89  DD 77 FD            	ld	(ix+TRACK_VolumeAdd),a
    1848.  00:4C8C  C3 9D 4C            	jp	_macro_set_volume
    1849.  00:4C8F                      
    1850.  00:4C8F                      
    1851.  00:4C8F                      macro_vol_sub:
    1852.  00:4C8F  1A                  	ld	a,(de)
    1853.  00:4C90  47                  	ld	b,a
    1854.  00:4C91  13                  	inc   de
    1855.  00:4C92  DD 7E FD            	ld	a,(ix+TRACK_VolumeAdd)
    1856.  00:4C95  90                  	sub   b
    1857.  00:4C96  D2 9A 4C            	jp	nc,.nolimit
    1858.  00:4C99  AF                  	xor   a
    1859.  00:4C9A                      .nolimit:
    1860.  00:4C9A  DD 77 FD            	ld	(ix+TRACK_VolumeAdd),a
    1861.  00:4C9D                      
    1862.  00:4C9D                      ;-- Set the output volume directly after any update
    1863.  00:4C9D                      _macro_set_volume:
    1864.  00:4C9D  DD B6 F7            	or	(ix+TRACK_Volume)
    1865.  00:4CA0                      
    1866.  00:4CA0                      IFDEF tremolo_OFF
    1867.  00:4CA0                    ~ ELSE	
    1868.  00:4CA0  DD 46 FF            	ld 	b,(ix+TRACK_cmd_VolumeAdd)
    1869.  00:4CA3  90                  	sub	a,b
    1870.  00:4CA4  D2 AA 4C            	jp 	nc,.skip2
    1871.  00:4CA7  80                  	add	a,b
    1872.  00:4CA8  E6 0F                	and	0x0f
    1873.  00:4CAA                      ENDIF
    1874.  00:4CAA                      .skip2:
    1875.  00:4CAA                      	;--- apply main volume balance
    1876.  00:4CAA  ED 4B 29 C0         	ld	bc,(replay_mainvol)
    1877.  00:4CAE  81                  	add	a,c
    1878.  00:4CAF  4F                  	ld	c,a
    1879.  00:4CB0  D2 B4 4C            	jp	nc,.skip
    1880.  00:4CB3  04                  	inc	b
    1881.  00:4CB4                      .skip:
    1882.  00:4CB4  0A                  	ld	a,(bc)	
    1883.  00:4CB5  32 AB C1            	ld	(FM_regVOLF),a
    1884.  00:4CB8                      
    1885.  00:4CB8                      _macro_end:
    1886.  00:4CB8                      	;--- Store macro pointer
    1887.  00:4CB8  DD 73 F1            	ld	(ix+TRACK_MacroPointer),e		;--- store pointer for next time
    1888.  00:4CBB  DD 72 F2            	ld	(ix+TRACK_MacroPointer+1),d	
    1889.  00:4CBE                      
    1890.  00:4CBE                      
    1891.  00:4CBE                      	;-- Get the current note
    1892.  00:4CBE  DD 7E F6            	ld	a,(ix+TRACK_Note)
    1893.  00:4CC1  DD 86 0D            	add	a,(ix+TRACK_cmd_NoteAdd)
    1894.  00:4CC4  87                  	add	a
    1895.  00:4CC5                      
    1896.  00:4CC5  2A 2D C0            	ld	hl,(replay_tonetable)
    1897.  00:4CC8  85                  	add	a,l
    1898.  00:4CC9  6F                  	ld	l,a
    1899.  00:4CCA  D2 CE 4C            	jp	nc,.skip
    1900.  00:4CCD  24                  	inc	h
    1901.  00:4CCE                      .skip:
    1902.  00:4CCE  7E                  	ld	a,(hl)	;--- Store the note tone value in hl
    1903.  00:4CCF  23                  	inc	hl
    1904.  00:4CD0  66                  	ld	h,(hl)
    1905.  00:4CD1  6F                  	ld	l,a
    1906.  00:4CD2                      
    1907.  00:4CD2  DD 5E FB            	ld	e,(ix+TRACK_ToneAdd)
    1908.  00:4CD5  DD 56 FC            	ld	d,(ix+TRACK_ToneAdd+1)	
    1909.  00:4CD8  19                  	add	hl,de		;--- Store tone deviation
    1910.  00:4CD9                      
    1911.  00:4CD9                      	;-- set the detune. 
    1912.  00:4CD9  ED 73 00 C0         	ld	(_SP_Storage),sp
    1913.  00:4CDD  DD F9               	ld	sp,ix
    1914.  00:4CDF  D1                  	pop	de		; cmd_ToneSlideAdd
    1915.  00:4CE0  19                  	add	hl,de
    1916.  00:4CE1  C1                  	pop	bc		; cmd_ToneAdd
    1917.  00:4CE2  09                  	add	hl,bc
    1918.  00:4CE3  C1                  	pop	bc		; TRACK_cmd_detune
    1919.  00:4CE4  09                  	add	hl,bc
    1920.  00:4CE5  ED 7B 00 C0         	ld	sp,(_SP_Storage)
    1921.  00:4CE9                      
    1922.  00:4CE9                      	;-----------------
    1923.  00:4CE9                      	; FM Octave wrapper
    1924.  00:4CE9                      	; enable slides over multiple octaves.
    1925.  00:4CE9                      	; [DE] still contains tone slide add.
    1926.  00:4CE9                      	;-----------------
    1927.  00:4CE9                      _wrap:
    1928.  00:4CE9  DD CB F9 7E         	bit	B_PSGFM,(ix+TRACK_Flags)
    1929.  00:4CED  CA 4C 4D            	jp	z,_wrap_PSG			; skip wrapper for PSG
    1930.  00:4CF0                      
    1931.  00:4CF0  CB 44               	bit	0,h
    1932.  00:4CF2  CA 1C 4D            	jp	z,_wrap_lowcheck
    1933.  00:4CF5                      _wrap_highcheck:
    1934.  00:4CF5  7D                  	ld	a,l
    1935.  00:4CF6  FE 5A               	cp	$5a				; $5a is the strict limit
    1936.  00:4CF8  DA 3F 4D            	jp	c,_wrap_skip		; stop if smaller	
    1937.  00:4CFB                      	
    1938.  00:4CFB  E5                  	push	hl
    1939.  00:4CFC  D5                  	push	de
    1940.  00:4CFD                      	
    1941.  00:4CFD                      	;--- Set new tone value for same note 1 octave lower
    1942.  00:4CFD  CB 3F               	srl	a
    1943.  00:4CFF  CB 44               	bit 	0,h		; test 9th bit
    1944.  00:4D01  CA 06 4D            	jp	z,99f
    1945.  00:4D04  C6 80               	add	128
    1946.  00:4D06                      99:
    1947.  00:4D06  5F                  	ld	e,a
    1948.  00:4D07                      	;--- set octave higher
    1949.  00:4D07  7C                  	ld	a,h
    1950.  00:4D08  E6 FE               	and	$fe
    1951.  00:4D0A  C6 02               	add	$02
    1952.  00:4D0C  57                  	ld	d,a
    1953.  00:4D0D                      	;--- get difference between now and new
    1954.  00:4D0D  EB                  	ex	de,hl
    1955.  00:4D0E  AF                  	xor	a		; reset carry flag
    1956.  00:4D0F  ED 52               	sbc	hl,de
    1957.  00:4D11                      	;--- add difference to current slide
    1958.  00:4D11  D1                  	pop	de		; restore slide
    1959.  00:4D12  19                  	add	hl,de
    1960.  00:4D13  DD 75 00            	ld	(ix+TRACK_cmd_ToneSlideAdd),l
    1961.  00:4D16  DD 74 01            	ld	(ix+TRACK_cmd_ToneSlideAdd+1),h	
    1962.  00:4D19  E1                  	pop	hl	
    1963.  00:4D1A  18 23               	jr.	_wrap_skip
    1964.  00:4D1C                      	
    1965.  00:4D1C                      _wrap_lowcheck:
    1966.  00:4D1C  7D                  	ld	a,l
    1967.  00:4D1D  FE 3B               	cp	$3b		; $ad is the strict limit
    1968.  00:4D1F  30 1E               	jr.	nc,_wrap_skip		; stop if smaller
    1969.  00:4D21                      
    1970.  00:4D21                      
    1971.  00:4D21  E5                  	push 	hl		; store freq
    1972.  00:4D22  D5                  	push	de		; store slide
    1973.  00:4D23                      	;--- set new tone value for same note (but octave lower)
    1974.  00:4D23  87                  	add	a,a		; multiply by 2 in de 
    1975.  00:4D24  5F                  	ld	e,a
    1976.  00:4D25  16 00               	ld	d,0
    1977.  00:4D27  D2 2B 4D            	jp	nc,99f
    1978.  00:4D2A  14                  	inc	d	
    1979.  00:4D2B                      99:
    1980.  00:4D2B                      	;--- set octave higher
    1981.  00:4D2B  7C                  	ld	a,h
    1982.  00:4D2C  E6 FE               	and	$fe
    1983.  00:4D2E  D6 02               	sub	$02
    1984.  00:4D30  82                  	add	d		; merge with tone value
    1985.  00:4D31  57                  	ld	d,a
    1986.  00:4D32                      	;--- get difference between now and new
    1987.  00:4D32  EB                  	ex	de,hl
    1988.  00:4D33  AF                  	xor	a		; reset carry flag
    1989.  00:4D34  ED 52               	sbc	hl,de
    1990.  00:4D36                      	;--- add difference to current slide
    1991.  00:4D36  D1                  	pop	de		; restore slide
    1992.  00:4D37  19                  	add	hl,de	
    1993.  00:4D38                      	
    1994.  00:4D38  DD 75 00            	ld	(ix+TRACK_cmd_ToneSlideAdd),l
    1995.  00:4D3B  DD 74 01            	ld	(ix+TRACK_cmd_ToneSlideAdd+1),h	
    1996.  00:4D3E  E1                  	pop	hl	
    1997.  00:4D3F                      	
    1998.  00:4D3F                      _wrap_skip:
    1999.  00:4D3F                      	; replace the last pushed value on stack
    2000.  00:4D3F  7C                  	ld	a,h			; reset keyon and sustain
    2001.  00:4D40  E6 0F               	and	$0f
    2002.  00:4D42  67                  	ld	h,a
    2003.  00:4D43  DD 7E F9            	ld	a,(ix+TRACK_Flags)	; Add the sustain and key bits.
    2004.  00:4D46  E6 30               	and	16+32
    2005.  00:4D48  B4                  	or	h
    2006.  00:4D49  FD B5               	or	iyl			; iyl is 64 if there is a note trigger
    2007.  00:4D4B  67                  	ld	h,a
    2008.  00:4D4C                      
    2009.  00:4D4C                      _wrap_PSG:
    2010.  00:4D4C                      	;--- Return the tone register value
    2011.  00:4D4C  37                  	scf		; no cary is update the register value
    2012.  00:4D4D  C9                  	ret
    2013.  00:4D4E                      
    2014.  00:4D4E                      
    2015.  00:4D4E                      
    2016.  00:4D4E                      process_noNoteActive:
    2017.  00:4D4E                      	;-- Silence
    2018.  00:4D4E  CB 7A               	bit	B_PSGFM,d
    2019.  00:4D50  CA 59 4D            	jp	z,.psg
    2020.  00:4D53                      .fm:
    2021.  00:4D53  3E 0F               	ld	a,$0f
    2022.  00:4D55  32 AB C1            	ld	(FM_regVOLF),a
    2023.  00:4D58  C9                  	ret
    2024.  00:4D59                      .psg:
    2025.  00:4D59  AF                  	xor	a			; also clears the carry flag.
    2026.  00:4D5A  32 AB C1            	ld	(FM_regVOLF),a
    2027.  00:4D5D  C9                  	ret 	
    2028.  00:4D5E                      	
    2029.  00:4D5E                      			
    2030.  00:4D5E                      process_cmd0_arpeggio:
    2031.  00:4D5E  DD 7E 11            	ld	a,(ix+TRACK_Timer)
    2032.  00:4D61  A7                  	and	a
    2033.  00:4D62  CA 82 4D            	jp	z,.nextNote
    2034.  00:4D65                      	
    2035.  00:4D65  3D                  	dec	a
    2036.  00:4D66  DD 77 11            	ld	(IX+TRACK_Timer),a
    2037.  00:4D69  DD 7E 12            	ld	a,(ix+TRACK_Step)
    2038.  00:4D6C  A7                  	and	a
    2039.  00:4D6D  CA 7B 4D            	jp	z,.skip
    2040.  00:4D70  DD 7E 06            	ld	a,(IX+TRACK_cmd_0)
    2041.  00:4D73  E6 0F               	and	$0f
    2042.  00:4D75  DD 77 0D            	ld	(ix+TRACK_cmd_NoteAdd),a	
    2043.  00:4D78  C3 C9 4B            	jr.	process_commandEND
    2044.  00:4D7B                      .skip:
    2045.  00:4D7B  DD 36 0D 00         	ld	(ix+TRACK_cmd_NoteAdd),0	
    2046.  00:4D7F  C3 C9 4B            	jr.	process_commandEND
    2047.  00:4D82                      	
    2048.  00:4D82                      
    2049.  00:4D82                      .nextNote:
    2050.  00:4D82                      	; re-init the speed.
    2051.  00:4D82  3A 24 C0            	ld	a,(replay_arp_speed)
    2052.  00:4D85  DD 77 11            	ld	(IX+TRACK_Timer),a
    2053.  00:4D88                      	
    2054.  00:4D88  DD 7E 12            	ld	a,(ix+TRACK_Step)
    2055.  00:4D8B  A7                  	and	a
    2056.  00:4D8C  20 16               	jr.	nz,.skip1
    2057.  00:4D8E                      
    2058.  00:4D8E                      	;--- set x
    2059.  00:4D8E  DD 36 12 01         		ld	(ix+TRACK_Step),1
    2060.  00:4D92  DD 7E 06            		ld	a,(ix+TRACK_cmd_0)
    2061.  00:4D95  07                  		rlca
    2062.  00:4D96  07                  		rlca
    2063.  00:4D97  07                  		rlca
    2064.  00:4D98  07                  		rlca		
    2065.  00:4D99  DD 77 06            		ld	(ix+TRACK_cmd_0),a	
    2066.  00:4D9C  E6 0F               		and	$0f
    2067.  00:4D9E  DD 77 0D            		ld	(ix+TRACK_cmd_NoteAdd),a
    2068.  00:4DA1  C3 C9 4B            		jr.	process_commandEND
    2069.  00:4DA4                      	
    2070.  00:4DA4                      .skip1:
    2071.  00:4DA4  3D                  	dec	a
    2072.  00:4DA5  20 1D               	jr.	nz,.skip2
    2073.  00:4DA7                      
    2074.  00:4DA7                      	;--- set y
    2075.  00:4DA7  DD 36 12 02         		ld	(ix+TRACK_Step),2
    2076.  00:4DAB  DD 7E 06            		ld	a,(ix+TRACK_cmd_0)
    2077.  00:4DAE  07                  		rlca
    2078.  00:4DAF  07                  		rlca
    2079.  00:4DB0  07                  		rlca
    2080.  00:4DB1  07                  		rlca		
    2081.  00:4DB2  DD 77 06            		ld	(ix+TRACK_cmd_0),a			
    2082.  00:4DB5  E6 0F               		and	0x0f
    2083.  00:4DB7  C2 BE 4D            		jp	nz,.zero
    2084.  00:4DBA                      		;--- if zero then skip this note and set step to start
    2085.  00:4DBA  DD 36 12 00         		ld	(ix+TRACK_Step),0
    2086.  00:4DBE                      .zero:		
    2087.  00:4DBE  DD 77 0D            		ld	(ix+TRACK_cmd_NoteAdd),a	
    2088.  00:4DC1  C3 C9 4B            		jr.	process_commandEND
    2089.  00:4DC4                      	
    2090.  00:4DC4                      .skip2:
    2091.  00:4DC4                      	;--- set none
    2092.  00:4DC4  DD 36 12 00         	ld	(ix+TRACK_Step),0
    2093.  00:4DC8  DD 36 0D 00         	ld	(ix+TRACK_cmd_NoteAdd),0		
    2094.  00:4DCC  C3 C9 4B            	jr.	process_commandEND
    2095.  00:4DCF                      		
    2096.  00:4DCF                      
    2097.  00:4DCF                      	
    2098.  00:4DCF                      
    2099.  00:4DCF                      	
    2100.  00:4DCF                      process_cmd1_port_up:
    2101.  00:4DCF  DD 7E 00            	ld	a,(ix+TRACK_cmd_ToneSlideAdd)
    2102.  00:4DD2  DD 96 07            	sub	(ix+TRACK_cmd_1)
    2103.  00:4DD5  DD 77 00            	ld	(ix+TRACK_cmd_ToneSlideAdd),a
    2104.  00:4DD8  D2 C9 4B            	jp	nc,process_commandEND
    2105.  00:4DDB  DD 35 01            	dec	(ix+TRACK_cmd_ToneSlideAdd+1)
    2106.  00:4DDE  C3 C9 4B            	jp	process_commandEND
    2107.  00:4DE1                      
    2108.  00:4DE1                      	
    2109.  00:4DE1                      process_cmd2_port_down:	
    2110.  00:4DE1  DD 7E 00            	ld	a,(ix+TRACK_cmd_ToneSlideAdd)
    2111.  00:4DE4  DD 86 08            	add	(ix+TRACK_cmd_2)
    2112.  00:4DE7  DD 77 00            	ld	(ix+TRACK_cmd_ToneSlideAdd),a
    2113.  00:4DEA  D2 C9 4B            	jp	nc,process_commandEND
    2114.  00:4DED  DD 34 01            	inc	(ix+TRACK_cmd_ToneSlideAdd+1)
    2115.  00:4DF0  C3 C9 4B            	jp	process_commandEND
    2116.  00:4DF3                      	
    2117.  00:4DF3                      
    2118.  00:4DF3                      process_cmd3_port_tone:
    2119.  00:4DF3  DD 7E 09            	ld	a,(ix+TRACK_cmd_3)
    2120.  00:4DF6  DD 6E 00            	ld	l,(ix+TRACK_cmd_ToneSlideAdd)
    2121.  00:4DF9  DD 66 01            	ld	h,(ix+TRACK_cmd_ToneSlideAdd+1)
    2122.  00:4DFC  CB 7C               	bit	7,h
    2123.  00:4DFE  CA 14 4E            	jp	z,process_cmd3_sub
    2124.  00:4E01                      process_cmd3_add:
    2125.  00:4E01                      	;pos slide
    2126.  00:4E01  85                  	add	a,l
    2127.  00:4E02  DD 77 00            	ld	(ix+TRACK_cmd_ToneSlideAdd),a
    2128.  00:4E05  D2 09 4E            	jp	nc,.skip
    2129.  00:4E08  24                  	inc	h					
    2130.  00:4E09                      .skip:
    2131.  00:4E09  CB 7C               	bit	7,h
    2132.  00:4E0B  CA 29 4E            	jp	z,process_cmd3_stop			; delta turned pos ?
    2133.  00:4E0E  DD 74 01            	ld	(ix+TRACK_cmd_ToneSlideAdd+1),h
    2134.  00:4E11  C3 C9 4B            	jp	process_commandEND
    2135.  00:4E14                      process_cmd3_sub:
    2136.  00:4E14                      	;negative slide	
    2137.  00:4E14  E6 7F               	and	$7f
    2138.  00:4E16  4F                  	ld	c,a
    2139.  00:4E17  AF                  	xor	a
    2140.  00:4E18  47                  	ld	b,a
    2141.  00:4E19  ED 42               	sbc	hl,bc
    2142.  00:4E1B  CB 7C               	bit	7,h
    2143.  00:4E1D  C2 29 4E            	jp	nz,process_cmd3_stop			; delta turned neg ?
    2144.  00:4E20  DD 75 00            	ld	(ix+TRACK_cmd_ToneSlideAdd),l
    2145.  00:4E23  DD 74 01            	ld	(ix+TRACK_cmd_ToneSlideAdd+1),h
    2146.  00:4E26  C3 C9 4B            	jp	process_commandEND
    2147.  00:4E29                      process_cmd3_stop:	
    2148.  00:4E29  DD 36 00 00         	ld	(ix+TRACK_cmd_ToneSlideAdd),0
    2149.  00:4E2D  DD 36 01 00         	ld	(ix+TRACK_cmd_ToneSlideAdd+1),0	
    2150.  00:4E31  C3 C9 4B            	jp	process_commandEND
    2151.  00:4E34                      
    2152.  00:4E34                      
    2153.  00:4E34                      process_cmd8_tremolo:
    2154.  00:4E34                      IFDEF tremolo_OFF
    2155.  00:4E34                    ~ ELSE	
    2156.  00:4E34                      	;=================================
    2157.  00:4E34                      	;
    2158.  00:4E34                      	; tremolo	
    2159.  00:4E34                      	;
    2160.  00:4E34                      	;=================================	
    2161.  00:4E34  26 42               	ld	h,TRACK_Vibrato_sine >> 8
    2162.  00:4E36                      
    2163.  00:4E36                      	;--- Get next step
    2164.  00:4E36  DD 7E 12            	ld	a,(IX+TRACK_Step)
    2165.  00:4E39  DD 86 0C            	add	(ix+TRACK_cmd_4_step)
    2166.  00:4E3C  E6 3F               	and	$3F			; max	64
    2167.  00:4E3E  DD 77 12            	ld	(ix+TRACK_Step),a
    2168.  00:4E41  CB 2F               	sra	a			; devide step by 2	
    2169.  00:4E43                      
    2170.  00:4E43  DD 86 0A            	add	(ix+TRACK_cmd_4_depth)
    2171.  00:4E46  6F                  	ld	l,a
    2172.  00:4E47  7E                  	ld	a,(hl)
    2173.  00:4E48  87                  	add	a
    2174.  00:4E49  87                  	add	a
    2175.  00:4E4A  87                  	add	a
    2176.  00:4E4B  87                  	add	a
    2177.  00:4E4C  DD 77 FF            	ld	(ix+TRACK_cmd_VolumeAdd),a
    2178.  00:4E4F                      ENDIF
    2179.  00:4E4F  C3 C9 4B            	jp	process_commandEND	
    2180.  00:4E52                      
    2181.  00:4E52                      
    2182.  00:4E52                      
    2183.  00:4E52                      
    2184.  00:4E52                      	;=================================
    2185.  00:4E52                      	;
    2186.  00:4E52                      	; Vibrato	
    2187.  00:4E52                      	;
    2188.  00:4E52                      	;=================================
    2189.  00:4E52                      	; FIXME Remove this when implemented semitones in instruments
    2190.  00:4E52                      process_cmd4_vibrato_extended:
    2191.  00:4E52  26 43               	ld	h,TRACK_Vibrato_sine_extended >> 8	
    2192.  00:4E54  C3 59 4E            	jp	process_cmd4_vibrato.ext
    2193.  00:4E57                      	;=================================
    2194.  00:4E57                      	;
    2195.  00:4E57                      	; Vibrato	
    2196.  00:4E57                      	;
    2197.  00:4E57                      	;=================================
    2198.  00:4E57                      process_cmd4_vibrato:
    2199.  00:4E57  26 42               	ld	h,TRACK_Vibrato_sine >> 8	
    2200.  00:4E59                      .ext:
    2201.  00:4E59                      	;--- Get next step
    2202.  00:4E59  DD 7E 12            	ld	a,(IX+TRACK_Step)
    2203.  00:4E5C  DD 86 0C            	add	(ix+TRACK_cmd_4_step)
    2204.  00:4E5F  E6 3F               	and	$3F			; max	64
    2205.  00:4E61  DD 77 12            	ld	(ix+TRACK_Step),a
    2206.  00:4E64                      
    2207.  00:4E64  CB 6F               	bit	5,a			; step 32-63 the neg	
    2208.  00:4E66  CA 7F 4E            	jp	z,.pos	
    2209.  00:4E69                      	
    2210.  00:4E69                      .neg:
    2211.  00:4E69  E6 1F               	and	$1f	; make it 32 steps again
    2212.  00:4E6B  DD 86 0A            	add	(ix+TRACK_cmd_4_depth)
    2213.  00:4E6E  6F                  	ld	l,a
    2214.  00:4E6F  7E                  	ld	a,(hl)
    2215.  00:4E70  ED 44               	neg
    2216.  00:4E72  CA 84 4E            	jp	z,.zero			; $ff00 gives strange result ;)	
    2217.  00:4E75  DD 77 02            	ld	(ix+TRACK_cmd_ToneAdd),a
    2218.  00:4E78  DD 36 03 FF         	ld	(ix+TRACK_cmd_ToneAdd+1),0xff
    2219.  00:4E7C  C3 C9 4B            	jp	process_commandEND	
    2220.  00:4E7F                      
    2221.  00:4E7F                      .pos:
    2222.  00:4E7F  DD 86 0A            	add	(ix+TRACK_cmd_4_depth)
    2223.  00:4E82  6F                  	ld	l,a
    2224.  00:4E83  7E                  	ld	a,(hl)
    2225.  00:4E84                      .zero:	
    2226.  00:4E84  DD 77 02            	ld	(ix+TRACK_cmd_ToneAdd),a
    2227.  00:4E87  DD 36 03 00         	ld	(ix+TRACK_cmd_ToneAdd+1),0
    2228.  00:4E8B  C3 C9 4B            	jp	process_commandEND	
    2229.  00:4E8E                      
    2230.  00:4E8E                      
    2231.  00:4E8E                      process_cmd5_vibrato_port_tone:
    2232.  00:4E8E  CD A0 4E            	call	process_cmdasub
    2233.  00:4E91  C3 F3 4D            	jp	process_cmd3_port_tone
    2234.  00:4E94                      	
    2235.  00:4E94                      process_cmd6_vibrato_vol:
    2236.  00:4E94  CD A0 4E            	call	process_cmdasub
    2237.  00:4E97  C3 57 4E            	jp	process_cmd4_vibrato	
    2238.  00:4E9A                      
    2239.  00:4E9A                      process_cmd7_vol_slide:
    2240.  00:4E9A  CD A0 4E            	call	process_cmdasub
    2241.  00:4E9D  C3 C9 4B            	jp	process_commandEND
    2242.  00:4EA0                      
    2243.  00:4EA0                      
    2244.  00:4EA0                      process_cmdasub:
    2245.  00:4EA0  DD 35 11            	dec	(ix+TRACK_Timer)
    2246.  00:4EA3  C0                  	ret	nz
    2247.  00:4EA4                      		
    2248.  00:4EA4                      	; vol	slide
    2249.  00:4EA4  DD 7E 0E            	ld	a,(ix+TRACK_cmd_A)
    2250.  00:4EA7  4F                  	ld	c,a
    2251.  00:4EA8  E6 7F               	and	$7f
    2252.  00:4EAA  DD 77 11            	ld	(ix+TRACK_Timer),a
    2253.  00:4EAD                      
    2254.  00:4EAD  DD 7E F7            	ld	a,(ix+TRACK_Volume)
    2255.  00:4EB0  CB 79               	bit	7,c
    2256.  00:4EB2  CA BD 4E            	jp	z,process_cmda_inc
    2257.  00:4EB5                      process_cmda_dec:
    2258.  00:4EB5  A7                  	and	a
    2259.  00:4EB6  C8                  	ret	z
    2260.  00:4EB7  D6 10               	sub	$10
    2261.  00:4EB9  DD 77 F7            	ld	(ix+TRACK_Volume),a
    2262.  00:4EBC  C9                  	ret
    2263.  00:4EBD                      process_cmda_inc:
    2264.  00:4EBD  FE F0               	cp	$f0
    2265.  00:4EBF  D0                  	ret	nc
    2266.  00:4EC0  C6 10               	add	$10	
    2267.  00:4EC2  DD 77 F7            	ld	(ix+TRACK_Volume),a
    2268.  00:4EC5  C9                  	ret
    2269.  00:4EC6                      
    2270.  00:4EC6                      
    2271.  00:4EC6                      
    2272.  00:4EC6                      process_cmd9_note_cut:
    2273.  00:4EC6  DD 35 11            	dec	(ix+TRACK_Timer)
    2274.  00:4EC9  C2 C9 4B            	jp	nz,process_commandEND
    2275.  00:4ECC                      	
    2276.  00:4ECC                      	; stop note
    2277.  00:4ECC  CB 9A               	res	B_TRGCMD,d	; set	note bit to	0
    2278.  00:4ECE  CB 8A               	res	B_ACTNOT,d
    2279.  00:4ED0  C3 C9 4B            	jp	process_commandEND		
    2280.  00:4ED3                      	
    2281.  00:4ED3                      process_cmd10_note_delay:
    2282.  00:4ED3                      	; note delay
    2283.  00:4ED3  DD 35 11            	dec	(ix+TRACK_Timer)
    2284.  00:4ED6  C2 C9 4B            	jp	nz,process_commandEND	; no delay yet
    2285.  00:4ED9                      
    2286.  00:4ED9                      	; trigger note
    2287.  00:4ED9  DD 7E 10            	ld	a,(ix+TRACK_cmd_E)		
    2288.  00:4EDC  DD 77 F6            	ld	(ix+TRACK_Note),a		; set	the note val
    2289.  00:4EDF  CB C2               	set	B_TRGNOT,d	            ; set	trigger note flag
    2290.  00:4EE1  CB 9A               	res	B_TRGCMD,d	      	; reset trigger cmd flag
    2291.  00:4EE3                      	
    2292.  00:4EE3  C3 C9 4B            	jp	process_commandEND	
    2293.  00:4EE6                      
    2294.  00:4EE6                      
    2295.  00:4EE6                      
    2296.  00:4EE6                      ;============================================================================
    2297.  00:4EE6                      ; process_drum
    2298.  00:4EE6                      ;
    2299.  00:4EE6                      ;
    2300.  00:4EE6                      ;
    2301.  00:4EE6                      ;============================================================================
    2302.  00:4EE6                      process_drum:
    2303.  00:4EE6  3A C1 C1            	ld	a,(FM_DRUM_ACTIVE)
    2304.  00:4EE9  A7                  	and	a
    2305.  00:4EEA  C2 F1 4E            	jp	nz,.yes
    2306.  00:4EED                      	;--- Nothing to play
    2307.  00:4EED  32 BF C1            	ld	(FM_DRUM),a
    2308.  00:4EF0  C9                  	ret
    2309.  00:4EF1                      .yes:	
    2310.  00:4EF1                      	;-- Retrieve the next action
    2311.  00:4EF1  ED 4B C2 C1         	ld	bc,(FM_DRUM_MACRO)
    2312.  00:4EF5                      
    2313.  00:4EF5                      
    2314.  00:4EF5                      _process_drum_loop:
    2315.  00:4EF5  21 C1 41            	ld	hl,DRUM_MACRO_LIST-4
    2316.  00:4EF8  0A                  	ld	a,(bc)
    2317.  00:4EF9  87                  	add	a
    2318.  00:4EFA  85                  	add	l
    2319.  00:4EFB  6F                  	ld	l,a
    2320.  00:4EFC  03                  	inc	bc
    2321.  00:4EFD  E9                  	jp	hl
    2322.  00:4EFE                      
    2323.  00:4EFE                      _drum_stop:			;2
    2324.  00:4EFE  AF                  	xor	a
    2325.  00:4EFF  32 C1 C1            	ld	(FM_DRUM_ACTIVE),a
    2326.  00:4F02  32 BF C1            	ld	(FM_DRUM),a	
    2327.  00:4F05  C9                  	ret
    2328.  00:4F06                      
    2329.  00:4F06                      _drum_vol_bd:		;4
    2330.  00:4F06  0A                  	ld	a,(bc)
    2331.  00:4F07  03                  	inc	bc
    2332.  00:4F08  32 B1 C1            	ld	(DRUM_regVolBD),a
    2333.  00:4F0B  C3 F5 4E            	jp	_process_drum_loop
    2334.  00:4F0E                      
    2335.  00:4F0E                      _drum_vol_sn:		;6
    2336.  00:4F0E  3A B7 C1            	ld	a,(DRUM_regVolSH)
    2337.  00:4F11  E6 F0               	and	0xf0
    2338.  00:4F13  57                  	ld	d,a
    2339.  00:4F14  0A                  	ld	a,(bc)
    2340.  00:4F15  03                  	inc	bc
    2341.  00:4F16  B2                  	or	d
    2342.  00:4F17  32 B7 C1            	ld	(DRUM_regVolSH),a
    2343.  00:4F1A  C3 F5 4E            	jp	_process_drum_loop
    2344.  00:4F1D                      
    2345.  00:4F1D                      _drum_vol_hh:		;8
    2346.  00:4F1D  3A B7 C1            	ld	a,(DRUM_regVolSH)
    2347.  00:4F20  E6 0F               	and	0x0f
    2348.  00:4F22  57                  	ld	d,a
    2349.  00:4F23  0A                  	ld	a,(bc)
    2350.  00:4F24  03                  	inc	bc
    2351.  00:4F25  B2                  	or	d
    2352.  00:4F26  32 B7 C1            	ld	(DRUM_regVolSH),a
    2353.  00:4F29  C3 F5 4E            	jp	_process_drum_loop
    2354.  00:4F2C                      
    2355.  00:4F2C                      _drum_vol_snhh:	;a
    2356.  00:4F2C  0A                  	ld	a,(bc)
    2357.  00:4F2D  03                  	inc	bc
    2358.  00:4F2E  32 B7 C1            	ld	(DRUM_regVolSH),a
    2359.  00:4F31  C3 F5 4E            	jp	_process_drum_loop
    2360.  00:4F34                      
    2361.  00:4F34                      
    2362.  00:4F34                      _drum_vol_cy:		;6
    2363.  00:4F34  3A BD C1            	ld	a,(DRUM_regVolCT)
    2364.  00:4F37  E6 F0               	and	0xf0
    2365.  00:4F39  57                  	ld	d,a
    2366.  00:4F3A  0A                  	ld	a,(bc)
    2367.  00:4F3B  03                  	inc	bc
    2368.  00:4F3C  B2                  	or	d
    2369.  00:4F3D  32 BD C1            	ld	(DRUM_regVolCT),a
    2370.  00:4F40  C3 F5 4E            	jp	_process_drum_loop
    2371.  00:4F43                      
    2372.  00:4F43                      _drum_vol_tt:		;8
    2373.  00:4F43  3A BD C1            	ld	a,(DRUM_regVolCT)
    2374.  00:4F46  E6 0F               	and	0x0f
    2375.  00:4F48  57                  	ld	d,a
    2376.  00:4F49  0A                  	ld	a,(bc)
    2377.  00:4F4A  03                  	inc	bc
    2378.  00:4F4B  B2                  	or	d
    2379.  00:4F4C  32 BD C1            	ld	(DRUM_regVolCT),a
    2380.  00:4F4F  C3 F5 4E            	jp	_process_drum_loop
    2381.  00:4F52                      
    2382.  00:4F52                      _drum_vol_cytt:	;a
    2383.  00:4F52  0A                  	ld	a,(bc)
    2384.  00:4F53  03                  	inc	bc
    2385.  00:4F54  32 BD C1            	ld	(DRUM_regVolCT),a
    2386.  00:4F57  C3 F5 4E            	jp	_process_drum_loop
    2387.  00:4F5A                      
    2388.  00:4F5A                      _drum_note_bd:	;12
    2389.  00:4F5A  0A                  	ld	a,(bc)
    2390.  00:4F5B  03                  	inc	bc
    2391.  00:4F5C  32 AD C1            	ld	(DRUM_regToneBD),a
    2392.  00:4F5F  0A                  	ld	a,(bc)
    2393.  00:4F60  03                  	inc	bc
    2394.  00:4F61  32 AE C1            	ld	(DRUM_regToneBD+1),a
    2395.  00:4F64  C3 F5 4E            	jp	_process_drum_loop
    2396.  00:4F67                      
    2397.  00:4F67                      _drum_tone_bd:	;14
    2398.  00:4F67  2A AD C1            	ld	hl,(DRUM_regToneBD)
    2399.  00:4F6A  0A                  	ld	a,(bc)
    2400.  00:4F6B  5F                  	ld	e,a
    2401.  00:4F6C  03                  	inc	bc
    2402.  00:4F6D  0A                  	ld	a,(bc)
    2403.  00:4F6E  03                  	inc	bc
    2404.  00:4F6F  57                  	ld	d,a
    2405.  00:4F70  19                  	add	hl,de
    2406.  00:4F71  C3 F5 4E            	jp	_process_drum_loop
    2407.  00:4F74                      
    2408.  00:4F74                      _drum_note_snhh:	;16
    2409.  00:4F74  0A                  	ld	a,(bc)
    2410.  00:4F75  03                  	inc	bc
    2411.  00:4F76  32 B3 C1            	ld	(DRUM_regToneSH),a
    2412.  00:4F79  0A                  	ld	a,(bc)
    2413.  00:4F7A  03                  	inc	bc
    2414.  00:4F7B  32 B4 C1            	ld	(DRUM_regToneSH+1),a
    2415.  00:4F7E  C3 F5 4E            	jp	_process_drum_loop
    2416.  00:4F81                      
    2417.  00:4F81                      _drum_tone_snhh:	;18
    2418.  00:4F81  2A B3 C1            	ld	hl,(DRUM_regToneSH)
    2419.  00:4F84  0A                  	ld	a,(bc)
    2420.  00:4F85  5F                  	ld	e,a
    2421.  00:4F86  03                  	inc	bc
    2422.  00:4F87  0A                  	ld	a,(bc)
    2423.  00:4F88  03                  	inc	bc
    2424.  00:4F89  57                  	ld	d,a
    2425.  00:4F8A  19                  	add	hl,de
    2426.  00:4F8B  22 B3 C1            	ld	(DRUM_regToneSH),hl
    2427.  00:4F8E  C3 F5 4E            	jp	_process_drum_loop
    2428.  00:4F91                      
    2429.  00:4F91                      _drum_note_cytt:	;1a
    2430.  00:4F91  0A                  	ld	a,(bc)
    2431.  00:4F92  03                  	inc	bc
    2432.  00:4F93  32 B9 C1            	ld	(DRUM_regToneCT),a
    2433.  00:4F96  0A                  	ld	a,(bc)
    2434.  00:4F97  03                  	inc	bc
    2435.  00:4F98  32 BA C1            	ld	(DRUM_regToneCT+1),a
    2436.  00:4F9B  C3 F5 4E            	jp	_process_drum_loop
    2437.  00:4F9E                      
    2438.  00:4F9E                      _drum_tone_cytt:	;1c
    2439.  00:4F9E  2A B9 C1            	ld	hl,(DRUM_regToneCT)
    2440.  00:4FA1  0A                  	ld	a,(bc)
    2441.  00:4FA2  5F                  	ld	e,a
    2442.  00:4FA3  03                  	inc	bc
    2443.  00:4FA4  0A                  	ld	a,(bc)
    2444.  00:4FA5  03                  	inc	bc
    2445.  00:4FA6  57                  	ld	d,a
    2446.  00:4FA7  19                  	add	hl,de
    2447.  00:4FA8  22 B9 C1            	ld	(DRUM_regToneCT),hl
    2448.  00:4FAB  C3 F5 4E            	jp	_process_drum_loop
    2449.  00:4FAE                      
    2450.  00:4FAE                      _drum_percussion:	;1e
    2451.  00:4FAE  0A                  	ld	a,(bc)
    2452.  00:4FAF  03                  	inc	bc
    2453.  00:4FB0  32 BF C1            	ld	(FM_DRUM),a
    2454.  00:4FB3                      .end:
    2455.  00:4FB3  ED 43 C2 C1         	ld	(FM_DRUM_MACRO),bc
    2456.  00:4FB7  C9                  	ret	
    2457.  00:4FB8                      
    2458.  00:4FB8                      
    2459.  00:4FB8                      
    2460.  00:4FB8                      
    2461.  00:4FB8                      ;===========================================================
    2462.  00:4FB8                      ; ---replay_route
    2463.  00:4FB8                      ; Output the data	to the CHIP	registers
    2464.  00:4FB8                      ; 
    2465.  00:4FB8                      ; 
    2466.  00:4FB8                      ;===========================================================
    2467.  00:4FB8                      replay_route:
    2468.  00:4FB8                      ;---------------
    2469.  00:4FB8                      ; P S G 
    2470.  00:4FB8                      ;---------------
    2471.  00:4FB8                      	;--- Push values to AY HW
    2472.  00:4FB8  21 78 C1            	ld	hl,PSG_registers+13
    2473.  00:4FBB  01 A1 0C            	ld	bc,$0c00+PSG_DATA		; 12 seq reg updates + port $a1
    2474.  00:4FBE                      
    2475.  00:4FBE                      	;--- Envelope shape R#13
    2476.  00:4FBE  7E                  	ld	a,(hl)
    2477.  00:4FBF  A7                  	and	a				; Value to write?
    2478.  00:4FC0  CA CC 4F            	jp	z,_ptAY_noEnv	
    2479.  00:4FC3  57                  	ld	d,a	
    2480.  00:4FC4  3E 0D               	ld	a,$0d
    2481.  00:4FC6  D3 A0               	out	(PSG_WRITE),a	
    2482.  00:4FC8  ED 51               	out	(c),d
    2483.  00:4FCA  36 00               	ld	(hl),0			;reset the envwrite	
    2484.  00:4FCC                      _ptAY_noEnv:
    2485.  00:4FCC  2B                  	dec	hl
    2486.  00:4FCD  3E 0C               	ld	a,$0c				; Start at reg $0c 
    2487.  00:4FCF                      
    2488.  00:4FCF                      	;--- Rolled out psg update 6 times
    2489.  00:4FCF  D3 A0               	out	(PSG_WRITE),a			; reg c
    2490.  00:4FD1  3D                  	dec	a
    2491.  00:4FD2  ED AB               	outd
    2492.  00:4FD4  D3 A0               	out	(PSG_WRITE),a			; reg b
    2493.  00:4FD6  3D                  	dec	a
    2494.  00:4FD7  ED AB               	outd
    2495.  00:4FD9  D3 A0               	out	(PSG_WRITE),a			; reg	a
    2496.  00:4FDB  3D                  	dec	a
    2497.  00:4FDC  ED AB               	outd
    2498.  00:4FDE  D3 A0               	out	(PSG_WRITE),a			; reg	9
    2499.  00:4FE0  3D                  	dec	a
    2500.  00:4FE1  ED AB               	outd
    2501.  00:4FE3  D3 A0               	out	(PSG_WRITE),a			; reg 8
    2502.  00:4FE5  3D                  	dec	a
    2503.  00:4FE6  ED AB               	outd
    2504.  00:4FE8  D3 A0               	out	(PSG_WRITE),a			; reg 7
    2505.  00:4FEA  3D                  	dec	a
    2506.  00:4FEB  ED AB               	outd
    2507.  00:4FED  D3 A0               	out	(PSG_WRITE),a			; reg 6
    2508.  00:4FEF  ED AB               	outd
    2509.  00:4FF1  3D                  	dec	a
    2510.  00:4FF2  16 FF               	ld	d,$ff
    2511.  00:4FF4                      _ptAY_loop:
    2512.  00:4FF4  3D                  	dec	a
    2513.  00:4FF5  D3 A0               	out	(PSG_WRITE),a
    2514.  00:4FF7  ED 51               	out	(c),d
    2515.  00:4FF9  3C                  	inc	a
    2516.  00:4FFA  D3 A0               	out	(PSG_WRITE),a
    2517.  00:4FFC  ED AB               	outd
    2518.  00:4FFE  3D                  	dec	a
    2519.  00:4FFF  D3 A0               	out	(PSG_WRITE),a
    2520.  00:5001  ED AB               	outd
    2521.  00:5003  3D                  	dec	a
    2522.  00:5004  F2 F4 4F            	jp	p,_ptAY_loop
    2523.  00:5007                      		
    2524.  00:5007                      	
    2525.  00:5007                      
    2526.  00:5007                      
    2527.  00:5007                      
    2528.  00:5007                      ;---------------
    2529.  00:5007                      ; F M
    2530.  00:5007                      ;---------------
    2531.  00:5007                      route_FM:
    2532.  00:5007                      	;--- 	Write FM channel registers
    2533.  00:5007                      	;--- Store CPU type for later.
    2534.  00:5007  3A 2F C0            	ld	a,(r800)
    2535.  00:500A  5F                  	ld	e,a
    2536.  00:500B  A7                  	and	a
    2537.  00:500C  CA 14 50            	jp	z,.skipcount
    2538.  00:500F                      	;--- init the r800 wait timer
    2539.  00:500F  DB E6               	in	a,($e6)
    2540.  00:5011  32 30 C0            	ld	(count_low),a
    2541.  00:5014                      .skipcount:
    2542.  00:5014                      	;--- Check if we need to update the voice regs
    2543.  00:5014  3A 2C C0            	ld	a,(FM_softvoice_req)
    2544.  00:5017  A7                  	and	a
    2545.  00:5018  CA 35 50            	jp	z,.channels
    2546.  00:501B                      
    2547.  00:501B                      	;--- update the voice registers
    2548.  00:501B  08                  	ex	af,af'
    2549.  00:501C  AF                  	xor	a
    2550.  00:501D  32 2C C0            	ld	(FM_softvoice_req),a
    2551.  00:5020  21 79 C1            	ld	hl,FM_Voicereg
    2552.  00:5023  01 00 08            	ld	bc,$0800		; 8 values, base register 0
    2553.  00:5026                      
    2554.  00:5026                      .voiceloop:
    2555.  00:5026  7E                  	ld	a,(hl)
    2556.  00:5027  23                  	inc	hl
    2557.  00:5028  BE                  	cp	(hl)
    2558.  00:5029  CA 31 50            	jp	z,.skipvoicereg
    2559.  00:502C  57                  	ld	d,a
    2560.  00:502D  79                  	ld	a,c
    2561.  00:502E  CD A1 50            	call	_writeFM	
    2562.  00:5031                      .skipvoicereg:
    2563.  00:5031  23                  	inc	hl
    2564.  00:5032  0C                  	inc	c
    2565.  00:5033  10 F1               	djnz	.voiceloop
    2566.  00:5035                      
    2567.  00:5035                      
    2568.  00:5035                      .channels:
    2569.  00:5035  01 10 09            	ld	bc, $0910			; 9 channels, start reg# is $10
    2570.  00:5038  21 8A C1            	ld	hl,FM_regToneA+1		; pointer to the backup of reg# $2x
    2571.  00:503B                      .channel_loop:
    2572.  00:503B                      ;	;--- Check if channel is active
    2573.  00:503B  7E                  	ld	a,(hl)
    2574.  00:503C  FE 40               	cp	64		; test bit 6	1 = note trigger
    2575.  00:503E  DA 54 50            	jp	c,.noKeyOnSwitch
    2576.  00:5041                      
    2577.  00:5041                      .keyOnSwitch:
    2578.  00:5041  23                  	inc	hl
    2579.  00:5042  23                  	inc	hl
    2580.  00:5043  7E                  	ld	a,(hl)
    2581.  00:5044                      	;--- Check if Key is already OFF
    2582.  00:5044  CB 67               	bit	4,a
    2583.  00:5046  CA 52 50            	jp	z,99f		      ; skip if key was not set
    2584.  00:5049  E6 2F               	and	00101111b		; reset keyon bit
    2585.  00:504B  57                  	ld	d,a
    2586.  00:504C  3E 10               	ld	a,$10
    2587.  00:504E  81                  	add	c
    2588.  00:504F  CD A1 50            	call	_writeFM
    2589.  00:5052                      99:
    2590.  00:5052  2B                  	dec	hl
    2591.  00:5053  2B                  	dec	hl
    2592.  00:5054                      .noKeyOnSwitch:
    2593.  00:5054  2B                  	dec	hl
    2594.  00:5055                      	;--- Write reg $1x
    2595.  00:5055  7E                  	ld	a,(hl)
    2596.  00:5056  23                  	inc	hl
    2597.  00:5057  23                  	inc	hl
    2598.  00:5058  BE                  	cp	(hl)
    2599.  00:5059  CA 61 50            	jp	z,99f			; No change in value
    2600.  00:505C  57                  	ld	d,a			; Store value in D
    2601.  00:505D  79                  	ld	a,c			; Store reg# in C
    2602.  00:505E  CD A1 50            	call	_writeFM
    2603.  00:5061                      99:
    2604.  00:5061  2B                  	dec	hl
    2605.  00:5062                      	;--- Write reg $2x
    2606.  00:5062  7E                  	ld	a,(hl)
    2607.  00:5063  23                  	inc	hl
    2608.  00:5064  23                  	inc	hl
    2609.  00:5065  BE                  	cp	(hl)
    2610.  00:5066  CA 70 50            	jp	z,99f			; No change in value
    2611.  00:5069  57                  	ld	d,a			; Store value in D
    2612.  00:506A  3E 10               	ld	a,$10
    2613.  00:506C  81                  	add	a,c			; Store reg# in C+10
    2614.  00:506D  CD A1 50            	call	_writeFM
    2615.  00:5070                      99:
    2616.  00:5070  23                  	inc	hl	
    2617.  00:5071                      	;--- Write reg $3x
    2618.  00:5071  7E                  	ld	a,(hl)
    2619.  00:5072  23                  	inc	hl
    2620.  00:5073  BE                  	cp	(hl)
    2621.  00:5074  CA 7E 50            	jp	z,99f			; No change in value
    2622.  00:5077  57                  	ld	d,a			; Store value in D
    2623.  00:5078  3E 20               	ld	a,$20
    2624.  00:507A  81                  	add	c			; Store reg# in C
    2625.  00:507B  CD A1 50            	call	_writeFM
    2626.  00:507E                      99:
    2627.  00:507E  23                  	inc	hl
    2628.  00:507F  23                  	inc	hl
    2629.  00:5080                      .continue:	
    2630.  00:5080  0C                  	inc	c			; increase base register with 1
    2631.  00:5081  10 B8               	djnz	.channel_loop
    2632.  00:5083                      
    2633.  00:5083                      	;--- write rythm register
    2634.  00:5083                      .rythm:	
    2635.  00:5083  2B                  	dec	hl
    2636.  00:5084  7E                  	ld	a,(hl)
    2637.  00:5085  A7                  	and	a			; no drums
    2638.  00:5086  C8                  	ret	z
    2639.  00:5087                      
    2640.  00:5087  23                  	inc	hl
    2641.  00:5088  46                  	ld	b,(hl)
    2642.  00:5089  4F                  	ld	c,a			; save new
    2643.  00:508A                      
    2644.  00:508A  A8                  	xor	b
    2645.  00:508B  F6 20               	or	00100000b		; enable rythm
    2646.  00:508D  57                  	ld	d,a
    2647.  00:508E  3E 0E               	ld	a,$0e			
    2648.  00:5090  CD A1 50            	call	_writeFM
    2649.  00:5093                      
    2650.  00:5093  79                  	ld	a,c
    2651.  00:5094  B0                  	or	b
    2652.  00:5095  57                  	ld	d,a
    2653.  00:5096  CD AD 50            	call	_writeFM_data
    2654.  00:5099  C9                  	ret
    2655.  00:509A                      
    2656.  00:509A                      
    2657.  00:509A                      .notActive:
    2658.  00:509A  11 06 00            	ld	de,6
    2659.  00:509D  19                  	add	hl,de
    2660.  00:509E  C3 80 50            	jp	.continue
    2661.  00:50A1                      	;--- Points to start address of next chan
    2662.  00:50A1                      
    2663.  00:50A1                      
    2664.  00:50A1                      
    2665.  00:50A1                      ; [A] reg#
    2666.  00:50A1                      ; [D] value
    2667.  00:50A1                      ; [E] R800	(0=Z80, 1 = R800)
    2668.  00:50A1                      ; [HL] points to previous value
    2669.  00:50A1                      _writeFM:
    2670.  00:50A1  CB 43               	bit	0,e				;  8 cycles
    2671.  00:50A3  C2 B7 50            	jp	nz,_writeFM_R800		; 10 cycles
    2672.  00:50A6  D3 7C               	out	(FM_WRITE),a		; 11 cycles
    2673.  00:50A8  7A                  	ld	a,d				;  4 cycles
    2674.  00:50A9                      _writeFM_cont:
    2675.  00:50A9  77                  	ld	(hl),a			;  7 cycles	
    2676.  00:50AA  D3 7D               	out	(FM_DATA),a			; 11 cycles
    2677.  00:50AC  C9                  	ret					; 10 cycles
    2678.  00:50AD                      
    2679.  00:50AD                      ; [D] value
    2680.  00:50AD                      ; [E] R800	(0=Z80, 1 = R800)
    2681.  00:50AD                      ; [HL] points to previous value
    2682.  00:50AD                      _writeFM_data:
    2683.  00:50AD  CB 43               	bit	0,e				;  8 cycles
    2684.  00:50AF  C2 E0 50            	jp	nz,_writeFM_data_R800	; 10 cycles
    2685.  00:50B2  C5                  	push	bc				; 11 cycles	Dummy for write delay
    2686.  00:50B3  C1                  	pop	bc				; 11 cycles	Dummy for write delay
    2687.  00:50B4  C3 A9 50            	jp	_writeFM_cont		; 10 cycles
    2688.  00:50B7                      
    2689.  00:50B7                      ; [A] reg#
    2690.  00:50B7                      ; [D] value
    2691.  00:50B7                      ; [HL] points to previous value
    2692.  00:50B7                      _writeFM_R800:		
    2693.  00:50B7                      	;--- wait to write
    2694.  00:50B7  D5                  	push	de
    2695.  00:50B8  08                  	ex	af,af'
    2696.  00:50B9  3A 30 C0            	ld	a,(count_low)
    2697.  00:50BC  57                  	ld	d,a
    2698.  00:50BD                      .loop_long:
    2699.  00:50BD  DB E6               	in	a,($e6)
    2700.  00:50BF  92                  	sub	d
    2701.  00:50C0  FE 06               	cp	6
    2702.  00:50C2  DA BD 50            	jp	c,.loop_long
    2703.  00:50C5                      
    2704.  00:50C5  D1                  	pop	de
    2705.  00:50C6  08                  	ex	af,af'
    2706.  00:50C7                      	;-- write address
    2707.  00:50C7  D3 7C               	out	(FM_WRITE),a		; 11 cycles
    2708.  00:50C9                      
    2709.  00:50C9  DB E6               	in	a,($e6)
    2710.  00:50CB                      	;--- wait to write
    2711.  00:50CB  D5                  	push	de
    2712.  00:50CC  57                  	ld	d,a
    2713.  00:50CD                      .loop_short
    2714.  00:50CD  DB E6               	in	a,($e6)
    2715.  00:50CF  92                  	sub	d
    2716.  00:50D0  FE 01               	cp	1
    2717.  00:50D2  DA CD 50            	jp	c,.loop_short
    2718.  00:50D5  D1                  	pop	de
    2719.  00:50D6                      _writeFM_R800_cont:
    2720.  00:50D6                      	;--- write data
    2721.  00:50D6  7A                  	ld	a,d				;  4 cycles
    2722.  00:50D7  72                  	ld	(hl),d			;  7 cycles	
    2723.  00:50D8  D3 7D               	out	(FM_DATA),a			; 11 cycles
    2724.  00:50DA  DB E6               	in	a,($e6)
    2725.  00:50DC  32 30 C0            	ld	(count_low),a
    2726.  00:50DF  C9                  	ret					; 10 cycles
    2727.  00:50E0                      
    2728.  00:50E0                      ; [D] value
    2729.  00:50E0                      ; [HL] points to previous value
    2730.  00:50E0                      _writeFM_data_R800:
    2731.  00:50E0                      	;--- wait to write
    2732.  00:50E0  D5                  	push	de
    2733.  00:50E1  3A 30 C0            	ld	a,(count_low)
    2734.  00:50E4  57                  	ld	d,a
    2735.  00:50E5                      .loop_long:
    2736.  00:50E5  DB E6               	in	a,($e6)
    2737.  00:50E7  92                  	sub	d
    2738.  00:50E8  FE 06               	cp	6
    2739.  00:50EA  DA E5 50            	jp	c,.loop_long
    2740.  00:50ED  D1                  	pop	de
    2741.  00:50EE  C3 D6 50            	jp	_writeFM_R800_cont
    2742.  00:50F1                      	;--- end
    2743.  00:50F1                      
    2744.  00:50F1                      
      84   00:50F1                      	include	"..\code\ttreplayFMDAT.asm"
       1.  00:50F1                      
       2.  00:50F1                      
       3.  00:50F1                      IFDEF TAIL_ON
       4.  00:50F1                    ~ 	; Balance setting space volume max - 4
       5.  00:50F1                    ~ 	db	 $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0
       6.  00:50F1                    ~ 	db	 $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0
       7.  00:50F1                    ~ 	db	 $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0
       8.  00:50F1                    ~ 	db	 $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0
       9.  00:50F1                    ~ _VOLUME_TABLE_PSG
      10.  00:50F1                    ~ 	; No tail mode
      11.  00:50F1                    ~ 	db	 $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0, $0
      12.  00:50F1                    ~ 	db	 $0, $0, $0, $0, $0, $0, $0, $1, $1, $1, $1, $1, $1, $1, $1, $1
      13.  00:50F1                    ~ 	db	 $0, $0, $0, $0, $1, $1, $1, $1, $1, $1, $1, $1, $2, $2, $2, $2
      14.  00:50F1                    ~ 	db	 $0, $0, $0, $1, $1, $1, $1, $1, $2, $2, $2, $2, $2, $3, $3, $3
      15.  00:50F1                    ~ 	db	 $0, $0, $1, $1, $1, $1, $2, $2, $2, $2, $3, $3, $3, $3, $4, $4
      16.  00:50F1                    ~ 	db	 $0, $0, $1, $1, $1, $2, $2, $2, $3, $3, $3, $4, $4, $4, $5, $5
      17.  00:50F1                    ~ 	db	 $0, $0, $1, $1, $2, $2, $2, $3, $3, $4, $4, $4, $5, $5, $6, $6
      18.  00:50F1                    ~ 	db	 $0, $0, $1, $1, $2, $2, $3, $3, $4, $4, $5, $5, $6, $6, $7, $7
      19.  00:50F1                    ~ 	db	 $0, $1, $1, $2, $2, $3, $3, $4, $4, $5, $5, $6, $6, $7, $7, $8
      20.  00:50F1                    ~ 	db	 $0, $1, $1, $2, $2, $3, $4, $4, $5, $5, $6, $7, $7, $8, $8, $9
      21.  00:50F1                    ~ 	db	 $0, $1, $1, $2, $3, $3, $4, $5, $5, $6, $7, $7, $8, $9, $9, $A
      22.  00:50F1                    ~ 	db	 $0, $1, $1, $2, $3, $4, $4, $5, $6, $7, $7, $8, $9, $A, $A, $B
      23.  00:50F1                    ~ 	db	 $0, $1, $2, $2, $3, $4, $5, $6, $6, $7, $8, $9, $A, $A, $B, $C
      24.  00:50F1                    ~ 	db	 $0, $1, $2, $3, $3, $4, $5, $6, $7, $8, $9, $A, $A, $B, $C, $D
      25.  00:50F1                    ~ 	db	 $0, $1, $2, $3, $4, $5, $6, $7, $7, $8, $9, $A, $B, $C, $D, $E
      26.  00:50F1                    ~ 	db	 $0, $1, $2, $3, $4, $5, $6, $7, $8, $9, $A, $B, $C, $D, $E, $F
      27.  00:50F1                    ~ 
      28.  00:50F1                    ~ 
      29.  00:50F1                    ~ 	; Balance setting space volume max - 4
      30.  00:50F1                    ~ 	db	 $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F
      31.  00:50F1                    ~ 	db	 $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F
      32.  00:50F1                    ~ 	db	 $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F
      33.  00:50F1                    ~ 	db	 $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F
      34.  00:50F1                    ~ _VOLUME_TABLE_FM
      35.  00:50F1                    ~ 	; No tail mode
      36.  00:50F1                    ~ 	db	 $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F
      37.  00:50F1                    ~ 	db	 $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $E
      38.  00:50F1                    ~ 	db	 $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $E, $D
      39.  00:50F1                    ~ 	db	 $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $E, $D, $C
      40.  00:50F1                    ~ 	db	 $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $E, $D, $C, $B
      41.  00:50F1                    ~ 	db	 $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $E, $D, $C, $B, $A
      42.  00:50F1                    ~ 	db	 $F, $F, $F, $F, $F, $F, $F, $F, $F, $F, $E, $D, $C, $B, $A, $9
      43.  00:50F1                    ~ 	db	 $F, $F, $F, $F, $F, $F, $F, $F, $F, $E, $D, $C, $B, $A, $9, $8
      44.  00:50F1                    ~ 	db	 $F, $F, $F, $F, $F, $F, $F, $F, $E, $D, $C, $B, $A, $9, $8, $7
      45.  00:50F1                    ~ 	db	 $F, $F, $F, $F, $F, $F, $F, $E, $D, $C, $B, $A, $9, $8, $7, $6
      46.  00:50F1                    ~ 	db	 $F, $F, $F, $F, $F, $F, $E, $D, $C, $B, $A, $9, $8, $7, $6, $5
      47.  00:50F1                    ~ 	db	 $F, $F, $F, $F, $F, $E, $D, $C, $B, $A, $9, $8, $7, $6, $5, $4
      48.  00:50F1                    ~ 	db	 $F, $F, $F, $F, $E, $D, $C, $B, $A, $9, $8, $7, $6, $5, $4, $3
      49.  00:50F1                    ~ 	db	 $F, $F, $F, $E, $D, $C, $B, $A, $9, $8, $7, $6, $5, $4, $3, $2
      50.  00:50F1                    ~ 	db	 $F, $F, $E, $D, $C, $B, $A, $9, $8, $7, $6, $5, $4, $3, $2, $1
      51.  00:50F1                    ~ 	db	 $F, $E, $D, $C, $B, $A, $9, $8, $7, $6, $5, $4, $3, $2, $1, $0
      52.  00:50F1                    ~ 
      53.  00:50F1                    ~ 
      54.  00:50F1                    ~ ELSE
      55.  00:50F1                      	; Balance setting space volume max - 4
      56.  00:50F1                      	db	 $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1
      56.  00:50F1  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
      57.  00:5101                      	db	 $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1
      57.  00:5101  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
      58.  00:5111                      	db	 $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1
      58.  00:5111  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
      59.  00:5121                      	db	 $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1
      59.  00:5121  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
      60.  00:5131                      _VOLUME_TABLE_PSG
      61.  00:5131                      	; Tail mode on (psg 1/ FM E)	
      62.  00:5131                      	db	 $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1
      62.  00:5131  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
      63.  00:5141                      	db	 $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1
      63.  00:5141  01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 01 
      64.  00:5151                      	db	 $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $1, $2, $2, $2, $2
      64.  00:5151  01 01 01 01 01 01 01 01 01 01 01 01 02 02 02 02 
      65.  00:5161                      	db	 $1, $1, $1, $1, $1, $1, $1, $1, $2, $2, $2, $2, $2, $3, $3, $3
      65.  00:5161  01 01 01 01 01 01 01 01 02 02 02 02 02 03 03 03 
      66.  00:5171                      	db	 $1, $1, $1, $1, $1, $1, $2, $2, $2, $2, $3, $3, $3, $3, $4, $4
      66.  00:5171  01 01 01 01 01 01 02 02 02 02 03 03 03 03 04 04 
      67.  00:5181                      	db	 $1, $1, $1, $1, $1, $2, $2, $2, $3, $3, $3, $4, $4, $4, $5, $5
      67.  00:5181  01 01 01 01 01 02 02 02 03 03 03 04 04 04 05 05 
      68.  00:5191                      	db	 $1, $1, $1, $1, $2, $2, $2, $3, $3, $4, $4, $4, $5, $5, $6, $6
      68.  00:5191  01 01 01 01 02 02 02 03 03 04 04 04 05 05 06 06 
      69.  00:51A1                      	db	 $1, $1, $1, $1, $2, $2, $3, $3, $4, $4, $5, $5, $6, $6, $7, $7
      69.  00:51A1  01 01 01 01 02 02 03 03 04 04 05 05 06 06 07 07 
      70.  00:51B1                      	db	 $1, $1, $1, $2, $2, $3, $3, $4, $4, $5, $5, $6, $6, $7, $7, $8
      70.  00:51B1  01 01 01 02 02 03 03 04 04 05 05 06 06 07 07 08 
      71.  00:51C1                      	db	 $1, $1, $1, $2, $2, $3, $4, $4, $5, $5, $6, $7, $7, $8, $8, $9
      71.  00:51C1  01 01 01 02 02 03 04 04 05 05 06 07 07 08 08 09 
      72.  00:51D1                      	db	 $1, $1, $1, $2, $3, $3, $4, $5, $5, $6, $7, $7, $8, $9, $9, $A
      72.  00:51D1  01 01 01 02 03 03 04 05 05 06 07 07 08 09 09 0A 
      73.  00:51E1                      	db	 $1, $1, $1, $2, $3, $4, $4, $5, $6, $7, $7, $8, $9, $A, $A, $B
      73.  00:51E1  01 01 01 02 03 04 04 05 06 07 07 08 09 0A 0A 0B 
      74.  00:51F1                      	db	 $1, $1, $2, $2, $3, $4, $5, $6, $6, $7, $8, $9, $A, $A, $B, $C
      74.  00:51F1  01 01 02 02 03 04 05 06 06 07 08 09 0A 0A 0B 0C 
      75.  00:5201                      	db	 $1, $1, $2, $3, $3, $4, $5, $6, $7, $8, $9, $A, $A, $B, $C, $D
      75.  00:5201  01 01 02 03 03 04 05 06 07 08 09 0A 0A 0B 0C 0D 
      76.  00:5211                      	db	 $1, $1, $2, $3, $4, $5, $6, $7, $7, $8, $9, $A, $B, $C, $D, $E
      76.  00:5211  01 01 02 03 04 05 06 07 07 08 09 0A 0B 0C 0D 0E 
      77.  00:5221                      	db	 $1, $1, $2, $3, $4, $5, $6, $7, $8, $9, $A, $B, $C, $D, $E, $F
      77.  00:5221  01 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F 
      78.  00:5231                      
      79.  00:5231                      
      80.  00:5231                      	; Balance setting space volume max - 4
      81.  00:5231                      	db	 $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E
      81.  00:5231  0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 
      82.  00:5241                      	db	 $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E
      82.  00:5241  0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 
      83.  00:5251                      	db	 $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E
      83.  00:5251  0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 
      84.  00:5261                      	db	 $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E
      84.  00:5261  0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 
      85.  00:5271                      _VOLUME_TABLE_FM
      86.  00:5271                      	; Tail mode on (psg 1/ FM E)	
      87.  00:5271                      	db	 $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E
      87.  00:5271  0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 
      88.  00:5281                      	db	 $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E
      88.  00:5281  0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 
      89.  00:5291                      	db	 $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $D
      89.  00:5291  0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0D 
      90.  00:52A1                      	db	 $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $D, $C
      90.  00:52A1  0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0D 0C 
      91.  00:52B1                      	db	 $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $D, $C, $B
      91.  00:52B1  0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0D 0C 0B 
      92.  00:52C1                      	db	 $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $D, $C, $B, $A
      92.  00:52C1  0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0D 0C 0B 0A 
      93.  00:52D1                      	db	 $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $D, $C, $B, $A, $9
      93.  00:52D1  0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0D 0C 0B 0A 09 
      94.  00:52E1                      	db	 $E, $E, $E, $E, $E, $E, $E, $E, $E, $E, $D, $C, $B, $A, $9, $8
      94.  00:52E1  0E 0E 0E 0E 0E 0E 0E 0E 0E 0E 0D 0C 0B 0A 09 08 
      95.  00:52F1                      	db	 $E, $E, $E, $E, $E, $E, $E, $E, $E, $D, $C, $B, $A, $9, $8, $7
      95.  00:52F1  0E 0E 0E 0E 0E 0E 0E 0E 0E 0D 0C 0B 0A 09 08 07 
      96.  00:5301                      	db	 $E, $E, $E, $E, $E, $E, $E, $E, $D, $C, $B, $A, $9, $8, $7, $6
      96.  00:5301  0E 0E 0E 0E 0E 0E 0E 0E 0D 0C 0B 0A 09 08 07 06 
      97.  00:5311                      	db	 $E, $E, $E, $E, $E, $E, $E, $D, $C, $B, $A, $9, $8, $7, $6, $5
      97.  00:5311  0E 0E 0E 0E 0E 0E 0E 0D 0C 0B 0A 09 08 07 06 05 
      98.  00:5321                      	db	 $E, $E, $E, $E, $E, $E, $D, $C, $B, $A, $9, $8, $7, $6, $5, $4
      98.  00:5321  0E 0E 0E 0E 0E 0E 0D 0C 0B 0A 09 08 07 06 05 04 
      99.  00:5331                      	db	 $E, $E, $E, $E, $E, $D, $C, $B, $A, $9, $8, $7, $6, $5, $4, $3
      99.  00:5331  0E 0E 0E 0E 0E 0D 0C 0B 0A 09 08 07 06 05 04 03 
     100.  00:5341                      	db	 $E, $E, $E, $E, $D, $C, $B, $A, $9, $8, $7, $6, $5, $4, $3, $2
     100.  00:5341  0E 0E 0E 0E 0D 0C 0B 0A 09 08 07 06 05 04 03 02 
     101.  00:5351                      	db	 $E, $E, $E, $D, $C, $B, $A, $9, $8, $7, $6, $5, $4, $3, $2, $1
     101.  00:5351  0E 0E 0E 0D 0C 0B 0A 09 08 07 06 05 04 03 02 01 
     102.  00:5361                      	db	 $E, $E, $D, $C, $B, $A, $9, $8, $7, $6, $5, $4, $3, $2, $1, $0
     102.  00:5361  0E 0E 0D 0C 0B 0A 09 08 07 06 05 04 03 02 01 00 
     103.  00:5371                      
     104.  00:5371                      ENDIF
     105.  00:5371                      
     106.  00:5371                      TRACK_ToneTable_PSG:
     107.  00:5371                      IFDEF PERIOD_A432
     108.  00:5371                    ~       dw      $0D9C, $0CD8, $0C20, $0B72, $0ACD, $0A32, $099F, $0915, $0893, $0817, $07A3, $0735
     109.  00:5371                    ~       dw      $06CE, $066C, $0610, $05B9, $0567, $0519, $04D0, $048B, $0449, $040C, $03D2, $039B
     110.  00:5371                    ~       dw      $0367, $0336, $0308, $02DC, $02B3, $028C, $0268, $0245, $0225, $0206, $01E9, $01CD
     111.  00:5371                    ~       dw      $01B3, $019B, $0184, $016E, $015A, $0146, $0134, $0123, $0112, $0103, $00F4, $00E7
     112.  00:5371                    ~       dw      $00DA, $00CE, $00C2, $00B7, $00AD, $00A3, $009A, $0091, $0089, $0081, $007A, $0073
     113.  00:5371                    ~       dw      $006D, $0067, $0061, $005C, $0056, $0052, $004D, $0049, $0045, $0041, $003D, $003A
     114.  00:5371                    ~       dw      $0036, $0033, $0030, $002E, $002B, $0029, $0026, $0024, $0022, $0020, $001F, $001D
     115.  00:5371                    ~       dw      $001B, $001A, $0018, $0017, $0016, $0014, $0013, $0012, $0011, $0010, $000F, $000E
     116.  00:5371                    ~  ;     dw      $000E, $000D, $000C, $000B, $000B, $000A, $000A, $0009, $0009, $0008, $0008, $0007
     117.  00:5371                    ~   ;    dw      $0007, $0006, $0006, $0006, $0005, $0005, $0005, $0005, $0004, $0004, $0004, $0004
     118.  00:5371                    ~ ELSEIFDEF PERIOD_A440  
     119.  00:5371                            dw      $0D5C, $0C9D, $0BE7, $0B3C, $0A9B, $0A02, $0973, $08EB, $086B, $07F2, $0780, $0714
     119.  00:5371  5C 0D 9D 0C E7 0B 3C 0B 9B 0A 02 0A 73 09 EB 08 
     119.  00:5381  6B 08 F2 07 80 07 14 07 
     120.  00:5389                            dw      $06AE, $064E, $05F4, $059E, $054D, $0501, $04B9, $0475, $0435, $03F9, $03C0, $038A
     120.  00:5389  AE 06 4E 06 F4 05 9E 05 4D 05 01 05 B9 04 75 04 
     120.  00:5399  35 04 F9 03 C0 03 8A 03 
     121.  00:53A1                            dw      $0357, $0327, $02FA, $02CF, $02A7, $0281, $025D, $023B, $021B, $01FC, $01E0, $01C5
     121.  00:53A1  57 03 27 03 FA 02 CF 02 A7 02 81 02 5D 02 3B 02 
     121.  00:53B1  1B 02 FC 01 E0 01 C5 01 
     122.  00:53B9                            dw      $01AC, $0194, $017D, $0168, $0153, $0140, $012E, $011D, $010D, $00FE, $00F0, $00E2
     122.  00:53B9  AC 01 94 01 7D 01 68 01 53 01 40 01 2E 01 1D 01 
     122.  00:53C9  0D 01 FE 00 F0 00 E2 00 
     123.  00:53D1                            dw      $00D6, $00CA, $00BE, $00B4, $00AA, $00A0, $0097, $008F, $0087, $007F, $0078, $0071
     123.  00:53D1  D6 00 CA 00 BE 00 B4 00 AA 00 A0 00 97 00 8F 00 
     123.  00:53E1  87 00 7F 00 78 00 71 00 
     124.  00:53E9                            dw      $006B, $0065, $005F, $005A, $0055, $0050, $004C, $0047, $0043, $0040, $003C, $0039
     124.  00:53E9  6B 00 65 00 5F 00 5A 00 55 00 50 00 4C 00 47 00 
     124.  00:53F9  43 00 40 00 3C 00 39 00 
     125.  00:5401                            dw      $0035, $0032, $0030, $002D, $002A, $0028, $0026, $0024, $0022, $0020, $001E, $001C
     125.  00:5401  35 00 32 00 30 00 2D 00 2A 00 28 00 26 00 24 00 
     125.  00:5411  22 00 20 00 1E 00 1C 00 
     126.  00:5419                            dw      $001B, $0019, $0018, $0016, $0015, $0014, $0013, $0012, $0011, $0010, $000F, $000E
     126.  00:5419  1B 00 19 00 18 00 16 00 15 00 14 00 13 00 12 00 
     126.  00:5429  11 00 10 00 0F 00 0E 00 
     127.  00:5431                      ;      dw      $000D, $000D, $000C, $000B, $000B, $000A, $0009, $0009, $0008, $0008, $0007, $0007
     128.  00:5431                      ;      dw      $0007, $0006, $0006, $0006, $0005, $0005, $0005, $0004, $0004, $0004, $0004, $0004
     129.  00:5431                      ELSEIFDEF PERIOD_A448
     130.  00:5431                    ~       dw      $0D1F, $0C63, $0BB1, $0B09, $0A6A, $09D5, $0947, $08C2, $0844, $07CE, $075D, $06F4
     131.  00:5431                    ~       dw      $0690, $0631, $05D8, $0584, $0535, $04EA, $04A4, $0461, $0422, $03E7, $03AF, $037A
     132.  00:5431                    ~       dw      $0348, $0319, $02EC, $02C2, $029B, $0275, $0252, $0231, $0211, $01F3, $01D7, $01BD
     133.  00:5431                    ~       dw      $01A4, $018C, $0176, $0161, $014D, $013B, $0129, $0118, $0109, $00FA, $00EC, $00DE
     134.  00:5431                    ~       dw      $00D2, $00C6, $00BB, $00B1, $00A7, $009D, $0094, $008C, $0084, $007D, $0076, $006F
     135.  00:5431                    ~       dw      $0069, $0063, $005E, $0058, $0053, $004F, $004A, $0046, $0042, $003E, $003B, $0038
     136.  00:5431                    ~       dw      $0034, $0032, $002F, $002C, $002A, $0027, $0025, $0023, $0021, $001F, $001D, $001C
     137.  00:5431                    ~       dw      $001A, $0019, $0017, $0016, $0015, $0014, $0013, $0012, $0011, $0010, $000F, $000E
     138.  00:5431                    ~ ELSE
     139.  00:5431                    ~       dw      $0D36, $0C78, $0BC5, $0B1C, $0A7C, $09E6, $0957, $08D1, $0853, $07DB, $076A, $0700
     140.  00:5431                    ~       dw      $069B, $063C, $05E3, $058E, $053E, $04F3, $04AC, $0469, $0429, $03ED, $03B5, $0380
     141.  00:5431                    ~       dw      $034E, $031E, $02F1, $02C7, $029F, $0279, $0256, $0234, $0215, $01F7, $01DB, $01C0
     142.  00:5431                    ~       dw      $01A7, $018F, $0179, $0163, $0150, $013D, $012B, $011A, $010A, $00FB, $00ED, $00E0
     143.  00:5431                    ~       dw      $00D3, $00C8, $00BC, $00B2, $00A8, $009E, $0095, $008D, $0085, $007E, $0077, $0070
     144.  00:5431                    ~       dw      $006A, $0064, $005E, $0059, $0054, $004F, $004B, $0047, $0043, $003F, $003B, $0038
     145.  00:5431                    ~       dw      $0035, $0032, $002F, $002C, $002A, $0028, $0025, $0023, $0021, $001F, $001E, $001C
     146.  00:5431                    ~       dw      $001A, $0019, $0018, $0016, $0015, $0014, $0013, $0012, $0011, $0010, $000F, $000E
     147.  00:5431                    ~ ;      dw      $000D, $000C, $000C, $000B, $000A, $000A, $0009, $0009, $0008, $0008, $0007, $0007
     148.  00:5431                    ~ ;      dw      $0007, $0006, $0006, $0006, $0005, $0005, $0005, $0004, $0004, $0004, $0004, $0003
     149.  00:5431                    ~ ENDIF
     150.  00:5431                      
     151.  00:5431                      TRACK_ToneTable_FM:
     152.  00:5431                      IFDEF PERIOD_A432
     153.  00:5431                    ~       dw      $00A8, $00B2, $00BC, $00C8, $00D4, $00E0, $00EE, $00FC, $010B, $011B, $012B, $013D
     154.  00:5431                    ~       dw      $02A8, $02B2, $02BC, $02C8, $02D4, $02E0, $02EE, $02FC, $030B, $031B, $032B, $033D
     155.  00:5431                    ~       dw      $04A8, $04B2, $04BC, $04C8, $04D4, $04E0, $04EE, $04FC, $050B, $051B, $052B, $053D
     156.  00:5431                    ~       dw      $06A8, $06B2, $06BC, $06C8, $06D4, $06E0, $06EE, $06FC, $070B, $071B, $072B, $073D
     157.  00:5431                    ~       dw      $08A8, $08B2, $08BC, $08C8, $08D4, $08E0, $08EE, $08FC, $090B, $091B, $092B, $093D
     158.  00:5431                    ~       dw      $0AA8, $0AB2, $0ABC, $0AC8, $0AD4, $0AE0, $0AEE, $0AFC, $0B0B, $0B1B, $0B2B, $0B3D
     159.  00:5431                    ~       dw      $0CA8, $0CB2, $0CBC, $0CC8, $0CD4, $0CE0, $0CEE, $0CFC, $0D0B, $0D1B, $0D2B, $0D3D
     160.  00:5431                    ~       dw      $0EA8, $0EB2, $0EBC, $0EC8, $0ED4, $0EE0, $0EEE, $0EFC, $0F0B, $0F1B, $0F2B, $0F3D
     161.  00:5431                    ~ 
     162.  00:5431                    ~ ELSEIFDEF PERIOD_A440
     163.  00:5431                            dw      $00AB, $00B5, $00C0, $00CB, $00D8, $00E4, $00F2, $0100, $0110, $0120, $0131, $0143
     163.  00:5431  AB 00 B5 00 C0 00 CB 00 D8 00 E4 00 F2 00 00 01 
     163.  00:5441  10 01 20 01 31 01 43 01 
     164.  00:5449                            dw      $02AB, $02B5, $02C0, $02CB, $02D8, $02E4, $02F2, $0300, $0310, $0320, $0331, $0343
     164.  00:5449  AB 02 B5 02 C0 02 CB 02 D8 02 E4 02 F2 02 00 03 
     164.  00:5459  10 03 20 03 31 03 43 03 
     165.  00:5461                            dw      $04AB, $04B5, $04C0, $04CB, $04D8, $04E4, $04F2, $0500, $0510, $0520, $0531, $0543
     165.  00:5461  AB 04 B5 04 C0 04 CB 04 D8 04 E4 04 F2 04 00 05 
     165.  00:5471  10 05 20 05 31 05 43 05 
     166.  00:5479                            dw      $06AB, $06B5, $06C0, $06CB, $06D8, $06E4, $06F2, $0700, $0710, $0720, $0731, $0743
     166.  00:5479  AB 06 B5 06 C0 06 CB 06 D8 06 E4 06 F2 06 00 07 
     166.  00:5489  10 07 20 07 31 07 43 07 
     167.  00:5491                            dw      $08AB, $08B5, $08C0, $08CB, $08D8, $08E4, $08F2, $0900, $0910, $0920, $0931, $0943
     167.  00:5491  AB 08 B5 08 C0 08 CB 08 D8 08 E4 08 F2 08 00 09 
     167.  00:54A1  10 09 20 09 31 09 43 09 
     168.  00:54A9                            dw      $0AAB, $0AB5, $0AC0, $0ACB, $0AD8, $0AE4, $0AF2, $0B00, $0B10, $0B20, $0B31, $0B43
     168.  00:54A9  AB 0A B5 0A C0 0A CB 0A D8 0A E4 0A F2 0A 00 0B 
     168.  00:54B9  10 0B 20 0B 31 0B 43 0B 
     169.  00:54C1                            dw      $0CAB, $0CB5, $0CC0, $0CCB, $0CD8, $0CE4, $0CF2, $0D00, $0D10, $0D20, $0D31, $0D43
     169.  00:54C1  AB 0C B5 0C C0 0C CB 0C D8 0C E4 0C F2 0C 00 0D 
     169.  00:54D1  10 0D 20 0D 31 0D 43 0D 
     170.  00:54D9                            dw      $0EAB, $0EB5, $0EC0, $0ECB, $0ED8, $0EE4, $0EF2, $0F00, $0F10, $0F20, $0F31, $0F43
     170.  00:54D9  AB 0E B5 0E C0 0E CB 0E D8 0E E4 0E F2 0E 00 0F 
     170.  00:54E9  10 0F 20 0F 31 0F 43 0F 
     171.  00:54F1                      
     172.  00:54F1                      ELSEIFDEF PERIOD_A448
     173.  00:54F1                    ~       dw      $00AE, $00B8, $00C3, $00CF, $00DB, $00E9, $00F6, $0105, $0115, $0125, $0137, $0149
     174.  00:54F1                    ~       dw      $02AE, $02B8, $02C3, $02CF, $02DB, $02E9, $02F6, $0305, $0315, $0325, $0337, $0349
     175.  00:54F1                    ~       dw      $04AE, $04B8, $04C3, $04CF, $04DB, $04E9, $04F6, $0505, $0515, $0525, $0537, $0549
     176.  00:54F1                    ~       dw      $06AE, $06B8, $06C3, $06CF, $06DB, $06E9, $06F6, $0705, $0715, $0725, $0737, $0749
     177.  00:54F1                    ~       dw      $08AE, $08B8, $08C3, $08CF, $08DB, $08E9, $08F6, $0905, $0915, $0925, $0937, $0949
     178.  00:54F1                    ~       dw      $0AAE, $0AB8, $0AC3, $0ACF, $0ADB, $0AE9, $0AF6, $0B05, $0B15, $0B25, $0B37, $0B49
     179.  00:54F1                    ~       dw      $0CAE, $0CB8, $0CC3, $0CCF, $0CDB, $0CE9, $0CF6, $0D05, $0D15, $0D25, $0D37, $0D49
     180.  00:54F1                    ~       dw      $0EAE, $0EB8, $0EC3, $0ECF, $0EDB, $0EE9, $0EF6, $0F05, $0F15, $0F25, $0F37, $0F49
     181.  00:54F1                    ~ 
     182.  00:54F1                    ~ ELSE
     183.  00:54F1                    ~       dw      $00AD, $00B7, $00C2, $00CE, $00DA, $00E7, $00F5, $0103, $0113, $0123, $0134, $0147
     184.  00:54F1                    ~       dw      $02AD, $02B7, $02C2, $02CE, $02DA, $02E7, $02F5, $0303, $0313, $0323, $0334, $0347
     185.  00:54F1                    ~       dw      $04AD, $04B7, $04C2, $04CE, $04DA, $04E7, $04F5, $0503, $0513, $0523, $0534, $0547
     186.  00:54F1                    ~       dw      $06AD, $06B7, $06C2, $06CE, $06DA, $06E7, $06F5, $0703, $0713, $0723, $0734, $0747
     187.  00:54F1                    ~       dw      $08AD, $08B7, $08C2, $08CE, $08DA, $08E7, $08F5, $0903, $0913, $0923, $0934, $0947
     188.  00:54F1                    ~       dw      $0AAD, $0AB7, $0AC2, $0ACE, $0ADA, $0AE7, $0AF5, $0B03, $0B13, $0B23, $0B34, $0B47
     189.  00:54F1                    ~       dw      $0CAD, $0CB7, $0CC2, $0CCE, $0CDA, $0CE7, $0CF5, $0D03, $0D13, $0D23, $0D34, $0D47
     190.  00:54F1                    ~       dw      $0EAD, $0EB7, $0EC2, $0ECE, $0EDA, $0EE7, $0EF5, $0F03, $0F13, $0F23, $0F34, $0F47
     191.  00:54F1                    ~ ENDIF
     192.  00:54F1                      
     193.  00:54F1                      
     194.  00:54F1                      
      85   00:54F1                      
      86   00:54F1                      demo_song:
      87   00:54F1                      	include	"CCCSCORE.asm"
       1.  00:54F1                      ; Song: Chriet Can Cope With Numbers    
       2.  00:54F1                      ; By:   Jorito 2022                     
       3.  00:54F1                      ; Period table: A440 Modern
       4.  00:54F1                      
       5.  00:54F1                      ; [ Song start data ]
       6.  00:54F1  06                  	db $06					; Initial song speed.
       7.  00:54F2  00                  	db $00					; Channel setup.
       8.  00:54F3  35 55               	dw .customvoice_start-8			; Start of the custom voices data.
       9.  00:54F5  4D 55               	dw .drummacro_start			; Start of the drum macro data.
      10.  00:54F7  84 55               	dw .instrument_start			; Start of the instrument data.
      11.  00:54F9                      
      12.  00:54F9                      ; [ Song order pointer list ]
      13.  00:54F9                      	dw .track_000, .track_001, .track_002, .track_003, .track_003, .track_005, .track_006, .track_007	; Step:000 Pattern:000
      13.  00:54F9  CE 56 42 57 81 57 BE 57 BE 57 C3 57 02 58 1E 58 
      14.  00:5509                      	dw .track_008, .track_009, .track_010, .track_011, .track_011, .track_013, .track_014, .track_015	; Step:001 Pattern:001
      14.  00:5509  7C 58 F0 58 2D 59 68 59 68 59 6A 59 A7 59 C3 59 
      15.  00:5519                      .restart:
      16.  00:5519                      	dw .track_000, .track_001, .track_018, .track_019, .track_020, .track_005, .track_014, .track_023	; Step:002 Pattern:002
      16.  00:5519  CE 56 42 57 27 5A 62 5A A4 5A C3 57 A7 59 E8 5A 
      17.  00:5529                      	dw .track_024, .track_001, .track_010, .track_027, .track_028, .track_013, .track_014, .track_031	; Step:003 Pattern:003
      17.  00:5529  44 5B 42 57 2D 59 B6 5B F5 5B 6A 59 A7 59 33 5C 
      18.  00:5539  00 00 19 55         	dw 0x0000, .restart				; End of sequence delimiter + restart address.
      19.  00:553D                      
      20.  00:553D                      ; [ Custom FM voices ]
      21.  00:553D                      .customvoice_start:
      22.  00:553D                      	db $31,$12,$10,$06,$f0,$f1,$67,$95 		; Custom voice:57
      22.  00:553D  31 12 10 06 F0 F1 67 95 
      23.  00:5545                      	db $32,$a1,$16,$07,$c0,$c0,$20,$17 		; Custom voice:126
      23.  00:5545  32 A1 16 07 C0 C0 20 17 
      24.  00:554D                      
      25.  00:554D                      ; [ FM Drum macros]
      26.  00:554D                      .drummacro_start:
      27.  00:554D  55 55               	dw .drum_00
      28.  00:554F  62 55               	dw .drum_02
      29.  00:5551  74 55               	dw .drum_04
      30.  00:5553  7C 55               	dw .drum_06
      31.  00:5555                      
      32.  00:5555                      .drum_00:						; Drum 0. Kick            
      33.  00:5555  04 00               	db $04, $00							; volume Base drum
      34.  00:5557  0C 10               	db $0c, $10							; volume Cymbal
      35.  00:5559  12 D8 04            	db $12, $d8, $04						; note Bdrum
      36.  00:555C  1A 00 01            	db $1a, $00, $01						; note Cymbal 
      37.  00:555F  1E 14               	db $1e, $14							; Percussion
      38.  00:5561  02                  	db $02							; STOP - End of Drum macro
      39.  00:5562                      
      40.  00:5562                      .drum_02:						; Drum 1. Snare           
      41.  00:5562  04 00               	db $04, $00							; volume Base drum
      42.  00:5564  08 00               	db $08, $00							; volume HiHat
      43.  00:5566  0C 10               	db $0c, $10							; volume Cymbal
      44.  00:5568  12 43 05            	db $12, $43, $05						; note Bdrum
      45.  00:556B  16 20 03            	db $16, $20, $03						; note Snare 
      46.  00:556E  1A 00 01            	db $1a, $00, $01						; note Cymbal 
      47.  00:5571  1E 1C               	db $1e, $1c							; Percussion
      48.  00:5573  02                  	db $02							; STOP - End of Drum macro
      49.  00:5574                      
      50.  00:5574                      .drum_04:						; Drum 2. Hihat           
      51.  00:5574  06 30               	db $06, $30							; volume Snare
      52.  00:5576  16 D8 08            	db $16, $d8, $08						; note Snare 
      53.  00:5579  1E 01               	db $1e, $01							; Percussion
      54.  00:557B  02                  	db $02							; STOP - End of Drum macro
      55.  00:557C                      
      56.  00:557C                      .drum_06:						; Drum 3. Open hihat      
      57.  00:557C  0E 03               	db $0e, $03							; volume Tom
      58.  00:557E  1A D8 06            	db $1a, $d8, $06						; note Cymbal 
      59.  00:5581  1E 02               	db $1e, $02							; Percussion
      60.  00:5583  02                  	db $02							; STOP - End of Drum macro
      61.  00:5584                      
      62.  00:5584                      ; [ Instruments]
      63.  00:5584                      .instrument_start:
      64.  00:5584  98 55               	dw .instrument_00				; Violin          
      65.  00:5586  9F 55               	dw .instrument_01				; Synth           
      66.  00:5588  A6 55               	dw .instrument_02				; Short synth     
      67.  00:558A  D7 55               	dw .instrument_03				; Acoustic Bass   
      68.  00:558C  DE 55               	dw .instrument_04				; Electric Guitar 
      69.  00:558E  02 56               	dw .instrument_05				; SD POW          
      70.  00:5590  42 56               	dw .instrument_06				; PSG arp         
      71.  00:5592  8C 56               	dw .instrument_07				; Bassdrum XLR8 D2
      72.  00:5594  A3 56               	dw .instrument_08				; Bass-HHT        
      73.  00:5596  C6 56               	dw .instrument_09				; FM PSG lead     
      74.  00:5598                      
      75.  00:5598                      .instrument_00:					; Violin          
      76.  00:5598  10                  	db $10					; FM Hardware Voice 1
      77.  00:5599                      								; --- Macro loop
      78.  00:5599  02 10               	db $02,$10						; Mixer (T)
      79.  00:559B  08 0F               	db $08,$0f						; Volume _
      80.  00:559D  18 FB               	db $18,$fb						; Loop (-6)
      81.  00:559F                      
      82.  00:559F                      .instrument_01:					; Synth           
      83.  00:559F  A0                  	db $a0					; FM Hardware Voice 10
      84.  00:55A0                      								; --- Macro loop
      85.  00:55A0  02 10               	db $02,$10						; Mixer (T)
      86.  00:55A2  08 0F               	db $08,$0f						; Volume _
      87.  00:55A4  18 FB               	db $18,$fb						; Loop (-6)
      88.  00:55A6                      
      89.  00:55A6                      .instrument_02:					; Short synth     
      90.  00:55A6  A0                  	db $a0					; FM Hardware Voice 10
      91.  00:55A7  02 10               	db $02,$10						; Mixer (T)
      92.  00:55A9  08 0F               	db $08,$0f						; Volume _
      93.  00:55AB  02 10               	db $02,$10						; Mixer (T)
      94.  00:55AD  08 0F               	db $08,$0f						; Volume _
      95.  00:55AF  02 10               	db $02,$10						; Mixer (T)
      96.  00:55B1  08 0E               	db $08,$0e						; Volume _
      97.  00:55B3  02 10               	db $02,$10						; Mixer (T)
      98.  00:55B5  00                  	db $00							; Volume same
      99.  00:55B6  02 10               	db $02,$10						; Mixer (T)
     100.  00:55B8  08 0D               	db $08,$0d						; Volume _
     101.  00:55BA  02 10               	db $02,$10						; Mixer (T)
     102.  00:55BC  00                  	db $00							; Volume same
     103.  00:55BD  02 10               	db $02,$10						; Mixer (T)
     104.  00:55BF  08 0C               	db $08,$0c						; Volume _
     105.  00:55C1  02 10               	db $02,$10						; Mixer (T)
     106.  00:55C3  08 0B               	db $08,$0b						; Volume _
     107.  00:55C5  02 10               	db $02,$10						; Mixer (T)
     108.  00:55C7  08 0A               	db $08,$0a						; Volume _
     109.  00:55C9  02 10               	db $02,$10						; Mixer (T)
     110.  00:55CB  08 09               	db $08,$09						; Volume _
     111.  00:55CD  02 10               	db $02,$10						; Mixer (T)
     112.  00:55CF  08 08               	db $08,$08						; Volume _
     113.  00:55D1                      								; --- Macro loop
     114.  00:55D1  02 10               	db $02,$10						; Mixer (T)
     115.  00:55D3  08 00               	db $08,$00						; Volume _
     116.  00:55D5  18 FB               	db $18,$fb						; Loop (-6)
     117.  00:55D7                      
     118.  00:55D7                      .instrument_03:					; Acoustic Bass   
     119.  00:55D7  E0                  	db $e0					; FM Hardware Voice 14
     120.  00:55D8                      								; --- Macro loop
     121.  00:55D8  02 10               	db $02,$10						; Mixer (T)
     122.  00:55DA  08 0F               	db $08,$0f						; Volume _
     123.  00:55DC  18 FB               	db $18,$fb						; Loop (-6)
     124.  00:55DE                      
     125.  00:55DE                      .instrument_04:					; Electric Guitar 
     126.  00:55DE  F0                  	db $f0					; FM Hardware Voice 15
     127.  00:55DF  02 10               	db $02,$10						; Mixer (T)
     128.  00:55E1  08 0F               	db $08,$0f						; Volume _
     129.  00:55E3  02 10               	db $02,$10						; Mixer (T)
     130.  00:55E5  08 0F               	db $08,$0f						; Volume _
     131.  00:55E7  02 10               	db $02,$10						; Mixer (T)
     132.  00:55E9  00                  	db $00							; Volume same
     133.  00:55EA  02 10               	db $02,$10						; Mixer (T)
     134.  00:55EC  08 0E               	db $08,$0e						; Volume _
     135.  00:55EE  02 10               	db $02,$10						; Mixer (T)
     136.  00:55F0  00                  	db $00							; Volume same
     137.  00:55F1  02 10               	db $02,$10						; Mixer (T)
     138.  00:55F3  08 0D               	db $08,$0d						; Volume _
     139.  00:55F5  02 10               	db $02,$10						; Mixer (T)
     140.  00:55F7  00                  	db $00							; Volume same
     141.  00:55F8  02 10               	db $02,$10						; Mixer (T)
     142.  00:55FA  08 0C               	db $08,$0c						; Volume _
     143.  00:55FC                      								; --- Macro loop
     144.  00:55FC  02 10               	db $02,$10						; Mixer (T)
     145.  00:55FE  08 00               	db $08,$00						; Volume _
     146.  00:5600  18 FB               	db $18,$fb						; Loop (-6)
     147.  00:5602                      
     148.  00:5602                      .instrument_05:					; SD POW          
     149.  00:5602  F0                  	db $f0					; FM Hardware Voice 15
     150.  00:5603  02 10               	db $02,$10						; Mixer (T)
     151.  00:5605  08 0D               	db $08,$0d						; Volume _
     152.  00:5607  02 80               	db $02,$80						; Mixer (N)
     153.  00:5609  0E 10               	db $0E,$10						; Noise _
     154.  00:560B  08 0D               	db $08,$0d						; Volume _
     155.  00:560D  02 80               	db $02,$80						; Mixer (N)
     156.  00:560F  0E 06               	db $0E,$06						; Noise _
     157.  00:5611  08 0C               	db $08,$0c						; Volume _
     158.  00:5613  02 80               	db $02,$80						; Mixer (N)
     159.  00:5615  0E 05               	db $0E,$05						; Noise _
     160.  00:5617  08 0B               	db $08,$0b						; Volume _
     161.  00:5619  02 80               	db $02,$80						; Mixer (N)
     162.  00:561B  0E 04               	db $0E,$04						; Noise _
     163.  00:561D  08 0A               	db $08,$0a						; Volume _
     164.  00:561F  02 80               	db $02,$80						; Mixer (N)
     165.  00:5621  0E 03               	db $0E,$03						; Noise _
     166.  00:5623  08 09               	db $08,$09						; Volume _
     167.  00:5625  02 80               	db $02,$80						; Mixer (N)
     168.  00:5627  0E 00               	db $0E,$00						; Noise _
     169.  00:5629  08 08               	db $08,$08						; Volume _
     170.  00:562B  02 80               	db $02,$80						; Mixer (N)
     171.  00:562D  08 05               	db $08,$05						; Volume _
     172.  00:562F  02 80               	db $02,$80						; Mixer (N)
     173.  00:5631  00                  	db $00							; Volume same
     174.  00:5632  02 80               	db $02,$80						; Mixer (N)
     175.  00:5634  08 04               	db $08,$04						; Volume _
     176.  00:5636  02 80               	db $02,$80						; Mixer (N)
     177.  00:5638  08 03               	db $08,$03						; Volume _
     178.  00:563A                      								; --- Macro loop
     179.  00:563A  02 80               	db $02,$80						; Mixer (N)
     180.  00:563C  0E 00               	db $0E,$00						; Noise _
     181.  00:563E  08 01               	db $08,$01						; Volume _
     182.  00:5640  18 F9               	db $18,$f9						; Loop (-8)
     183.  00:5642                      
     184.  00:5642                      .instrument_06:					; PSG arp         
     185.  00:5642  0F                  	db $0F					; FM Hardware Voice was not set
     186.  00:5643  02 90               	db $02,$90						; Mixer (TN)
     187.  00:5645  0E 01               	db $0E,$01						; Noise _
     188.  00:5647  08 0F               	db $08,$0f						; Volume _
     189.  00:5649  02 10               	db $02,$10						; Mixer (T)
     190.  00:564B  08 0F               	db $08,$0f						; Volume _
     191.  00:564D  02 10               	db $02,$10						; Mixer (T)
     192.  00:564F  08 0E               	db $08,$0e						; Volume _
     193.  00:5651  02 10               	db $02,$10						; Mixer (T)
     194.  00:5653  00                  	db $00							; Volume same
     195.  00:5654  02 10               	db $02,$10						; Mixer (T)
     196.  00:5656  08 0D               	db $08,$0d						; Volume _
     197.  00:5658  02 10               	db $02,$10						; Mixer (T)
     198.  00:565A  08 0C               	db $08,$0c						; Volume _
     199.  00:565C  02 10               	db $02,$10						; Mixer (T)
     200.  00:565E  08 0B               	db $08,$0b						; Volume _
     201.  00:5660  02 10               	db $02,$10						; Mixer (T)
     202.  00:5662  08 0A               	db $08,$0a						; Volume _
     203.  00:5664  02 10               	db $02,$10						; Mixer (T)
     204.  00:5666  08 09               	db $08,$09						; Volume _
     205.  00:5668  02 10               	db $02,$10						; Mixer (T)
     206.  00:566A  08 08               	db $08,$08						; Volume _
     207.  00:566C  02 10               	db $02,$10						; Mixer (T)
     208.  00:566E  08 07               	db $08,$07						; Volume _
     209.  00:5670  02 10               	db $02,$10						; Mixer (T)
     210.  00:5672  08 06               	db $08,$06						; Volume _
     211.  00:5674  02 10               	db $02,$10						; Mixer (T)
     212.  00:5676  08 05               	db $08,$05						; Volume _
     213.  00:5678  02 10               	db $02,$10						; Mixer (T)
     214.  00:567A  08 04               	db $08,$04						; Volume _
     215.  00:567C  02 10               	db $02,$10						; Mixer (T)
     216.  00:567E  08 03               	db $08,$03						; Volume _
     217.  00:5680  02 10               	db $02,$10						; Mixer (T)
     218.  00:5682  08 02               	db $08,$02						; Volume _
     219.  00:5684  02 10               	db $02,$10						; Mixer (T)
     220.  00:5686  08 01               	db $08,$01						; Volume _
     221.  00:5688                      								; --- Macro loop
     222.  00:5688  08 00               	db $08,$00						; Volume _
     223.  00:568A  18 FD               	db $18,$fd						; Loop (-4)
     224.  00:568C                      
     225.  00:568C                      .instrument_07:					; Bassdrum XLR8 D2
     226.  00:568C  00 04               	db $00,$04					; FM Software Voice 0
     227.  00:568E  02 90               	db $02,$90						; Mixer (TN)
     228.  00:5690  0E 04               	db $0E,$04						; Noise _
     229.  00:5692  08 0F               	db $08,$0f						; Volume _
     230.  00:5694  02 10               	db $02,$10						; Mixer (T)
     231.  00:5696  08 0F               	db $08,$0f						; Volume _
     232.  00:5698  02 10               	db $02,$10						; Mixer (T)
     233.  00:569A  00                  	db $00							; Volume same
     234.  00:569B  02 10               	db $02,$10						; Mixer (T)
     235.  00:569D  08 0E               	db $08,$0e						; Volume _
     236.  00:569F                      								; --- Macro loop
     237.  00:569F  08 00               	db $08,$00						; Volume _
     238.  00:56A1  18 FD               	db $18,$fd						; Loop (-4)
     239.  00:56A3                      
     240.  00:56A3                      .instrument_08:					; Bass-HHT        
     241.  00:56A3  0F                  	db $0F					; FM Hardware Voice was not set
     242.  00:56A4  02 90               	db $02,$90						; Mixer (TN)
     243.  00:56A6  0E 01               	db $0E,$01						; Noise _
     244.  00:56A8  08 0F               	db $08,$0f						; Volume _
     245.  00:56AA  02 90               	db $02,$90						; Mixer (TN)
     246.  00:56AC  08 0F               	db $08,$0f						; Volume _
     247.  00:56AE  02 10               	db $02,$10						; Mixer (T)
     248.  00:56B0  08 0E               	db $08,$0e						; Volume _
     249.  00:56B2  02 10               	db $02,$10						; Mixer (T)
     250.  00:56B4  08 0D               	db $08,$0d						; Volume _
     251.  00:56B6  02 10               	db $02,$10						; Mixer (T)
     252.  00:56B8  08 0C               	db $08,$0c						; Volume _
     253.  00:56BA  02 10               	db $02,$10						; Mixer (T)
     254.  00:56BC  08 0B               	db $08,$0b						; Volume _
     255.  00:56BE  02 10               	db $02,$10						; Mixer (T)
     256.  00:56C0  08 0A               	db $08,$0a						; Volume _
     257.  00:56C2                      								; --- Macro loop
     258.  00:56C2  08 00               	db $08,$00						; Volume _
     259.  00:56C4  18 FD               	db $18,$fd						; Loop (-4)
     260.  00:56C6                      
     261.  00:56C6                      .instrument_09:					; FM PSG lead     
     262.  00:56C6  00 08               	db $00,$08					; FM Software Voice 1
     263.  00:56C8                      								; --- Macro loop
     264.  00:56C8  02 10               	db $02,$10						; Mixer (T)
     265.  00:56CA  08 0F               	db $08,$0f						; Volume _
     266.  00:56CC  18 FB               	db $18,$fb						; Loop (-6)
     267.  00:56CE                      
     268.  00:56CE                      
     269.  00:56CE                      ; [ Song track data ]
     270.  00:56CE                      .track_000:
     271.  00:56CE  0C                  	db $0c			;Note C-2
     272.  00:56CF  71                  	db $71			;Volume 15
     273.  00:56D0  79                  	db $79			;Instrument 7
     274.  00:56D1  C1                  	db $c1			;Wait 2
     275.  00:56D2  0D                  	db $0d			;Note C#2
     276.  00:56D3  6E                  	db $6e			;Volume 12
     277.  00:56D4  7A                  	db $7a			;Instrument 8
     278.  00:56D5  C0                  	db $c0			;Wait 1
     279.  00:56D6  60                  	db $60			;Release 96
     280.  00:56D7  C0                  	db $c0			;Wait 1
     281.  00:56D8  0D                  	db $0d			;Note C#2
     282.  00:56D9  71                  	db $71			;Volume 15
     283.  00:56DA  C1                  	db $c1			;Wait 2
     284.  00:56DB  0D                  	db $0d			;Note C#2
     285.  00:56DC  70                  	db $70			;Volume 14
     286.  00:56DD                      					;Wait Repeat 2
     287.  00:56DD  19                  	db $19			;Note C#3
     288.  00:56DE  71                  	db $71			;Volume 15
     289.  00:56DF  77                  	db $77			;Instrument 5
     290.  00:56E0                      					;Wait Repeat 2
     291.  00:56E0  0D                  	db $0d			;Note C#2
     292.  00:56E1  6E                  	db $6e			;Volume 12
     293.  00:56E2  7A                  	db $7a			;Instrument 8
     294.  00:56E3  C0                  	db $c0			;Wait 1
     295.  00:56E4  60                  	db $60			;Release 96
     296.  00:56E5  C0                  	db $c0			;Wait 1
     297.  00:56E6  0D                  	db $0d			;Note C#2
     298.  00:56E7  71                  	db $71			;Volume 15
     299.  00:56E8  C1                  	db $c1			;Wait 2
     300.  00:56E9  0D                  	db $0d			;Note C#2
     301.  00:56EA  70                  	db $70			;Volume 14
     302.  00:56EB                      					;Wait Repeat 2
     303.  00:56EB  0C                  	db $0c			;Note C-2
     304.  00:56EC  71                  	db $71			;Volume 15
     305.  00:56ED  79                  	db $79			;Instrument 7
     306.  00:56EE                      					;Wait Repeat 2
     307.  00:56EE  0D                  	db $0d			;Note C#2
     308.  00:56EF  6E                  	db $6e			;Volume 12
     309.  00:56F0  7A                  	db $7a			;Instrument 8
     310.  00:56F1  C0                  	db $c0			;Wait 1
     311.  00:56F2  60                  	db $60			;Release 96
     312.  00:56F3  C0                  	db $c0			;Wait 1
     313.  00:56F4  0D                  	db $0d			;Note C#2
     314.  00:56F5  71                  	db $71			;Volume 15
     315.  00:56F6  C1                  	db $c1			;Wait 2
     316.  00:56F7  0D                  	db $0d			;Note C#2
     317.  00:56F8  70                  	db $70			;Volume 14
     318.  00:56F9                      					;Wait Repeat 2
     319.  00:56F9  19                  	db $19			;Note C#3
     320.  00:56FA  71                  	db $71			;Volume 15
     321.  00:56FB  77                  	db $77			;Instrument 5
     322.  00:56FC                      					;Wait Repeat 2
     323.  00:56FC  0D                  	db $0d			;Note C#2
     324.  00:56FD  6E                  	db $6e			;Volume 12
     325.  00:56FE  7A                  	db $7a			;Instrument 8
     326.  00:56FF  C0                  	db $c0			;Wait 1
     327.  00:5700  60                  	db $60			;Release 96
     328.  00:5701  C0                  	db $c0			;Wait 1
     329.  00:5702  0D                  	db $0d			;Note C#2
     330.  00:5703  71                  	db $71			;Volume 15
     331.  00:5704  C1                  	db $c1			;Wait 2
     332.  00:5705  0D                  	db $0d			;Note C#2
     333.  00:5706  70                  	db $70			;Volume 14
     334.  00:5707                      					;Wait Repeat 2
     335.  00:5707  0C                  	db $0c			;Note C-2
     336.  00:5708  71                  	db $71			;Volume 15
     337.  00:5709  79                  	db $79			;Instrument 7
     338.  00:570A                      					;Wait Repeat 2
     339.  00:570A  0D                  	db $0d			;Note C#2
     340.  00:570B  6E                  	db $6e			;Volume 12
     341.  00:570C  7A                  	db $7a			;Instrument 8
     342.  00:570D  C0                  	db $c0			;Wait 1
     343.  00:570E  60                  	db $60			;Release 96
     344.  00:570F  C0                  	db $c0			;Wait 1
     345.  00:5710  0D                  	db $0d			;Note C#2
     346.  00:5711  71                  	db $71			;Volume 15
     347.  00:5712  C1                  	db $c1			;Wait 2
     348.  00:5713  0D                  	db $0d			;Note C#2
     349.  00:5714  70                  	db $70			;Volume 14
     350.  00:5715                      					;Wait Repeat 2
     351.  00:5715  19                  	db $19			;Note C#3
     352.  00:5716  71                  	db $71			;Volume 15
     353.  00:5717  77                  	db $77			;Instrument 5
     354.  00:5718                      					;Wait Repeat 2
     355.  00:5718  0D                  	db $0d			;Note C#2
     356.  00:5719  6E                  	db $6e			;Volume 12
     357.  00:571A  7A                  	db $7a			;Instrument 8
     358.  00:571B  C0                  	db $c0			;Wait 1
     359.  00:571C  60                  	db $60			;Release 96
     360.  00:571D  C0                  	db $c0			;Wait 1
     361.  00:571E  0D                  	db $0d			;Note C#2
     362.  00:571F  71                  	db $71			;Volume 15
     363.  00:5720  C1                  	db $c1			;Wait 2
     364.  00:5721  0D                  	db $0d			;Note C#2
     365.  00:5722  70                  	db $70			;Volume 14
     366.  00:5723                      					;Wait Repeat 2
     367.  00:5723  0C                  	db $0c			;Note C-2
     368.  00:5724  71                  	db $71			;Volume 15
     369.  00:5725  79                  	db $79			;Instrument 7
     370.  00:5726                      					;Wait Repeat 2
     371.  00:5726  10                  	db $10			;Note E-2
     372.  00:5727  6E                  	db $6e			;Volume 12
     373.  00:5728  7A                  	db $7a			;Instrument 8
     374.  00:5729  C0                  	db $c0			;Wait 1
     375.  00:572A  60                  	db $60			;Release 96
     376.  00:572B  C0                  	db $c0			;Wait 1
     377.  00:572C  10                  	db $10			;Note E-2
     378.  00:572D  71                  	db $71			;Volume 15
     379.  00:572E  C1                  	db $c1			;Wait 2
     380.  00:572F  10                  	db $10			;Note E-2
     381.  00:5730  70                  	db $70			;Volume 14
     382.  00:5731                      					;Wait Repeat 2
     383.  00:5731  19                  	db $19			;Note C#3
     384.  00:5732  71                  	db $71			;Volume 15
     385.  00:5733  77                  	db $77			;Instrument 5
     386.  00:5734                      					;Wait Repeat 2
     387.  00:5734  0B                  	db $0b			;Note B-1
     388.  00:5735  6E                  	db $6e			;Volume 12
     389.  00:5736  7A                  	db $7a			;Instrument 8
     390.  00:5737  C0                  	db $c0			;Wait 1
     391.  00:5738  60                  	db $60			;Release 96
     392.  00:5739  C0                  	db $c0			;Wait 1
     393.  00:573A  0B                  	db $0b			;Note B-1
     394.  00:573B  71                  	db $71			;Volume 15
     395.  00:573C  C1                  	db $c1			;Wait 2
     396.  00:573D  19                  	db $19			;Note C#3
     397.  00:573E  71                  	db $71			;Volume 15
     398.  00:573F  77                  	db $77			;Instrument 5
     399.  00:5740  C1                  	db $c1			;Wait 2
     400.  00:5741  BF                  	db $bf			;[End-Of-Track]
     401.  00:5742                      .track_001:
     402.  00:5742  60                  	db $60			;Release 96
     403.  00:5743  C1                  	db $c1			;Wait 2
     404.  00:5744  31                  	db $31			;Note C#5
     405.  00:5745  6F                  	db $6f			;Volume 13
     406.  00:5746  78                  	db $78			;Instrument 6
     407.  00:5747  94 37               	db $94,$37			;CMD Arpeggio
     408.  00:5749                      					;Wait Repeat 2
     409.  00:5749  60                  	db $60			;Release 96
     410.  00:574A  C3                  	db $c3			;Wait 4
     411.  00:574B  31                  	db $31			;Note C#5
     412.  00:574C                      					;Wait Repeat 4
     413.  00:574C  60                  	db $60			;Release 96
     414.  00:574D  C1                  	db $c1			;Wait 2
     415.  00:574E  34                  	db $34			;Note E-5
     416.  00:574F  94 27               	db $94,$27			;CMD Arpeggio
     417.  00:5751                      					;Wait Repeat 2
     418.  00:5751  31                  	db $31			;Note C#5
     419.  00:5752  94 37               	db $94,$37			;CMD Arpeggio
     420.  00:5754  C5                  	db $c5			;Wait 6
     421.  00:5755  31                  	db $31			;Note C#5
     422.  00:5756  94 27               	db $94,$27			;CMD Arpeggio
     423.  00:5758  C3                  	db $c3			;Wait 4
     424.  00:5759  31                  	db $31			;Note C#5
     425.  00:575A  C1                  	db $c1			;Wait 2
     426.  00:575B  31                  	db $31			;Note C#5
     427.  00:575C  94 37               	db $94,$37			;CMD Arpeggio
     428.  00:575E                      					;Wait Repeat 2
     429.  00:575E  60                  	db $60			;Release 96
     430.  00:575F                      					;Wait Repeat 2
     431.  00:575F  60                  	db $60			;Release 96
     432.  00:5760  C1                  	db $c1			;Wait 2
     433.  00:5761  31                  	db $31			;Note C#5
     434.  00:5762  94 37               	db $94,$37			;CMD Arpeggio
     435.  00:5764                      					;Wait Repeat 2
     436.  00:5764  60                  	db $60			;Release 96
     437.  00:5765  C3                  	db $c3			;Wait 4
     438.  00:5766  31                  	db $31			;Note C#5
     439.  00:5767                      					;Wait Repeat 4
     440.  00:5767  60                  	db $60			;Release 96
     441.  00:5768  C1                  	db $c1			;Wait 2
     442.  00:5769  34                  	db $34			;Note E-5
     443.  00:576A  94 27               	db $94,$27			;CMD Arpeggio
     444.  00:576C                      					;Wait Repeat 2
     445.  00:576C  31                  	db $31			;Note C#5
     446.  00:576D  94 37               	db $94,$37			;CMD Arpeggio
     447.  00:576F  C5                  	db $c5			;Wait 6
     448.  00:5770  34                  	db $34			;Note E-5
     449.  00:5771  94 27               	db $94,$27			;CMD Arpeggio
     450.  00:5773  C1                  	db $c1			;Wait 2
     451.  00:5774  60                  	db $60			;Release 96
     452.  00:5775  C1                  	db $c1			;Wait 2
     453.  00:5776  31                  	db $31			;Note C#5
     454.  00:5777  94 27               	db $94,$27			;CMD Arpeggio
     455.  00:5779                      					;Wait Repeat 2
     456.  00:5779  31                  	db $31			;Note C#5
     457.  00:577A  94 57               	db $94,$57			;CMD Arpeggio
     458.  00:577C                      					;Wait Repeat 2
     459.  00:577C  2F                  	db $2f			;Note B-4
     460.  00:577D  94 27               	db $94,$27			;CMD Arpeggio
     461.  00:577F  C1                  	db $c1			;Wait 2
     462.  00:5780  BF                  	db $bf			;[End-Of-Track]
     463.  00:5781                      .track_002:
     464.  00:5781  60                  	db $60			;Release 96
     465.  00:5782  C1                  	db $c1			;Wait 2
     466.  00:5783  19                  	db $19			;Note C#3
     467.  00:5784  70                  	db $70			;Volume 14
     468.  00:5785  73                  	db $73			;Instrument 1
     469.  00:5786  C0                  	db $c0			;Wait 1
     470.  00:5787  60                  	db $60			;Release 96
     471.  00:5788                      					;Wait Repeat 1
     472.  00:5788  19                  	db $19			;Note C#3
     473.  00:5789  C1                  	db $c1			;Wait 2
     474.  00:578A  19                  	db $19			;Note C#3
     475.  00:578B                      					;Wait Repeat 2
     476.  00:578B  60                  	db $60			;Release 96
     477.  00:578C                      					;Wait Repeat 2
     478.  00:578C  19                  	db $19			;Note C#3
     479.  00:578D  C0                  	db $c0			;Wait 1
     480.  00:578E  60                  	db $60			;Release 96
     481.  00:578F                      					;Wait Repeat 1
     482.  00:578F  19                  	db $19			;Note C#3
     483.  00:5790  C1                  	db $c1			;Wait 2
     484.  00:5791  19                  	db $19			;Note C#3
     485.  00:5792                      					;Wait Repeat 2
     486.  00:5792  60                  	db $60			;Release 96
     487.  00:5793                      					;Wait Repeat 2
     488.  00:5793  19                  	db $19			;Note C#3
     489.  00:5794  C0                  	db $c0			;Wait 1
     490.  00:5795  60                  	db $60			;Release 96
     491.  00:5796                      					;Wait Repeat 1
     492.  00:5796  19                  	db $19			;Note C#3
     493.  00:5797  C1                  	db $c1			;Wait 2
     494.  00:5798  19                  	db $19			;Note C#3
     495.  00:5799                      					;Wait Repeat 2
     496.  00:5799  60                  	db $60			;Release 96
     497.  00:579A                      					;Wait Repeat 2
     498.  00:579A  19                  	db $19			;Note C#3
     499.  00:579B  C0                  	db $c0			;Wait 1
     500.  00:579C  60                  	db $60			;Release 96
     501.  00:579D                      					;Wait Repeat 1
     502.  00:579D  19                  	db $19			;Note C#3
     503.  00:579E  C1                  	db $c1			;Wait 2
     504.  00:579F  19                  	db $19			;Note C#3
     505.  00:57A0                      					;Wait Repeat 2
     506.  00:57A0  60                  	db $60			;Release 96
     507.  00:57A1                      					;Wait Repeat 2
     508.  00:57A1  19                  	db $19			;Note C#3
     509.  00:57A2  C0                  	db $c0			;Wait 1
     510.  00:57A3  60                  	db $60			;Release 96
     511.  00:57A4                      					;Wait Repeat 1
     512.  00:57A4  19                  	db $19			;Note C#3
     513.  00:57A5  C1                  	db $c1			;Wait 2
     514.  00:57A6  19                  	db $19			;Note C#3
     515.  00:57A7                      					;Wait Repeat 2
     516.  00:57A7  60                  	db $60			;Release 96
     517.  00:57A8                      					;Wait Repeat 2
     518.  00:57A8  19                  	db $19			;Note C#3
     519.  00:57A9  C0                  	db $c0			;Wait 1
     520.  00:57AA  60                  	db $60			;Release 96
     521.  00:57AB                      					;Wait Repeat 1
     522.  00:57AB  19                  	db $19			;Note C#3
     523.  00:57AC  C1                  	db $c1			;Wait 2
     524.  00:57AD  19                  	db $19			;Note C#3
     525.  00:57AE                      					;Wait Repeat 2
     526.  00:57AE  60                  	db $60			;Release 96
     527.  00:57AF                      					;Wait Repeat 2
     528.  00:57AF  1C                  	db $1c			;Note E-3
     529.  00:57B0  C0                  	db $c0			;Wait 1
     530.  00:57B1  60                  	db $60			;Release 96
     531.  00:57B2                      					;Wait Repeat 1
     532.  00:57B2  1C                  	db $1c			;Note E-3
     533.  00:57B3  C1                  	db $c1			;Wait 2
     534.  00:57B4  1C                  	db $1c			;Note E-3
     535.  00:57B5                      					;Wait Repeat 2
     536.  00:57B5  60                  	db $60			;Release 96
     537.  00:57B6                      					;Wait Repeat 2
     538.  00:57B6  17                  	db $17			;Note B-2
     539.  00:57B7  C0                  	db $c0			;Wait 1
     540.  00:57B8  60                  	db $60			;Release 96
     541.  00:57B9                      					;Wait Repeat 1
     542.  00:57B9  17                  	db $17			;Note B-2
     543.  00:57BA  C1                  	db $c1			;Wait 2
     544.  00:57BB  17                  	db $17			;Note B-2
     545.  00:57BC  C1                  	db $c1			;Wait 2
     546.  00:57BD  BF                  	db $bf			;[End-Of-Track]
     547.  00:57BE                      .track_003:
     548.  00:57BE  60                  	db $60			;Release 96
     549.  00:57BF  71                  	db $71			;Volume 15
     550.  00:57C0  72                  	db $72			;Instrument 0
     551.  00:57C1  FF                  	db $ff			;Wait 64
     552.  00:57C2  BF                  	db $bf			;[End-Of-Track]
     553.  00:57C3                      .track_005:
     554.  00:57C3  60                  	db $60			;Release 96
     555.  00:57C4  C1                  	db $c1			;Wait 2
     556.  00:57C5  3D                  	db $3d			;Note C#6
     557.  00:57C6  6F                  	db $6f			;Volume 13
     558.  00:57C7  76                  	db $76			;Instrument 4
     559.  00:57C8  94 37               	db $94,$37			;CMD Arpeggio
     560.  00:57CA                      					;Wait Repeat 2
     561.  00:57CA  60                  	db $60			;Release 96
     562.  00:57CB  C3                  	db $c3			;Wait 4
     563.  00:57CC  3D                  	db $3d			;Note C#6
     564.  00:57CD                      					;Wait Repeat 4
     565.  00:57CD  60                  	db $60			;Release 96
     566.  00:57CE  C1                  	db $c1			;Wait 2
     567.  00:57CF  40                  	db $40			;Note E-6
     568.  00:57D0  94 27               	db $94,$27			;CMD Arpeggio
     569.  00:57D2                      					;Wait Repeat 2
     570.  00:57D2  3D                  	db $3d			;Note C#6
     571.  00:57D3  94 37               	db $94,$37			;CMD Arpeggio
     572.  00:57D5  C5                  	db $c5			;Wait 6
     573.  00:57D6  3D                  	db $3d			;Note C#6
     574.  00:57D7  94 27               	db $94,$27			;CMD Arpeggio
     575.  00:57D9  C3                  	db $c3			;Wait 4
     576.  00:57DA  3D                  	db $3d			;Note C#6
     577.  00:57DB  C1                  	db $c1			;Wait 2
     578.  00:57DC  3D                  	db $3d			;Note C#6
     579.  00:57DD  94 37               	db $94,$37			;CMD Arpeggio
     580.  00:57DF                      					;Wait Repeat 2
     581.  00:57DF  60                  	db $60			;Release 96
     582.  00:57E0                      					;Wait Repeat 2
     583.  00:57E0  60                  	db $60			;Release 96
     584.  00:57E1  C1                  	db $c1			;Wait 2
     585.  00:57E2  3D                  	db $3d			;Note C#6
     586.  00:57E3  94 37               	db $94,$37			;CMD Arpeggio
     587.  00:57E5                      					;Wait Repeat 2
     588.  00:57E5  60                  	db $60			;Release 96
     589.  00:57E6  C3                  	db $c3			;Wait 4
     590.  00:57E7  3D                  	db $3d			;Note C#6
     591.  00:57E8                      					;Wait Repeat 4
     592.  00:57E8  60                  	db $60			;Release 96
     593.  00:57E9  C1                  	db $c1			;Wait 2
     594.  00:57EA  40                  	db $40			;Note E-6
     595.  00:57EB  94 27               	db $94,$27			;CMD Arpeggio
     596.  00:57ED                      					;Wait Repeat 2
     597.  00:57ED  3D                  	db $3d			;Note C#6
     598.  00:57EE  94 37               	db $94,$37			;CMD Arpeggio
     599.  00:57F0  C5                  	db $c5			;Wait 6
     600.  00:57F1  40                  	db $40			;Note E-6
     601.  00:57F2  94 27               	db $94,$27			;CMD Arpeggio
     602.  00:57F4  C1                  	db $c1			;Wait 2
     603.  00:57F5  60                  	db $60			;Release 96
     604.  00:57F6  C1                  	db $c1			;Wait 2
     605.  00:57F7  3D                  	db $3d			;Note C#6
     606.  00:57F8  94 27               	db $94,$27			;CMD Arpeggio
     607.  00:57FA                      					;Wait Repeat 2
     608.  00:57FA  3D                  	db $3d			;Note C#6
     609.  00:57FB  94 57               	db $94,$57			;CMD Arpeggio
     610.  00:57FD                      					;Wait Repeat 2
     611.  00:57FD  3B                  	db $3b			;Note B-5
     612.  00:57FE  94 27               	db $94,$27			;CMD Arpeggio
     613.  00:5800  C1                  	db $c1			;Wait 2
     614.  00:5801  BF                  	db $bf			;[End-Of-Track]
     615.  00:5802                      .track_006:
     616.  00:5802  60                  	db $60			;Release 96
     617.  00:5803  94 C0               	db $94,$c0			;CMD Arpeggio
     618.  00:5805  C1                  	db $c1			;Wait 2
     619.  00:5806  49                  	db $49			;Note C#7
     620.  00:5807  70                  	db $70			;Volume 14
     621.  00:5808  74                  	db $74			;Instrument 2
     622.  00:5809                      					;Wait Repeat 2
     623.  00:5809  47                  	db $47			;Note B-6
     624.  00:580A                      					;Wait Repeat 2
     625.  00:580A  44                  	db $44			;Note G#6
     626.  00:580B                      					;Wait Repeat 2
     627.  00:580B  42                  	db $42			;Note F#6
     628.  00:580C                      					;Wait Repeat 2
     629.  00:580C  40                  	db $40			;Note E-6
     630.  00:580D                      					;Wait Repeat 2
     631.  00:580D  42                  	db $42			;Note F#6
     632.  00:580E                      					;Wait Repeat 2
     633.  00:580E  40                  	db $40			;Note E-6
     634.  00:580F                      					;Wait Repeat 2
     635.  00:580F  3D                  	db $3d			;Note C#6
     636.  00:5810                      					;Wait Repeat 2
     637.  00:5810  60                  	db $60			;Release 96
     638.  00:5811  CF                  	db $cf			;Wait 16
     639.  00:5812  3D                  	db $3d			;Note C#6
     640.  00:5813  C1                  	db $c1			;Wait 2
     641.  00:5814  3F                  	db $3f			;Note D#6
     642.  00:5815                      					;Wait Repeat 2
     643.  00:5815  40                  	db $40			;Note E-6
     644.  00:5816                      					;Wait Repeat 2
     645.  00:5816  42                  	db $42			;Note F#6
     646.  00:5817                      					;Wait Repeat 2
     647.  00:5817  40                  	db $40			;Note E-6
     648.  00:5818                      					;Wait Repeat 2
     649.  00:5818  42                  	db $42			;Note F#6
     650.  00:5819                      					;Wait Repeat 2
     651.  00:5819  47                  	db $47			;Note B-6
     652.  00:581A                      					;Wait Repeat 2
     653.  00:581A  44                  	db $44			;Note G#6
     654.  00:581B                      					;Wait Repeat 2
     655.  00:581B  60                  	db $60			;Release 96
     656.  00:581C  CD                  	db $cd			;Wait 14
     657.  00:581D  BF                  	db $bf			;[End-Of-Track]
     658.  00:581E                      .track_007:
     659.  00:581E  19                  	db $19			;Note C#3
     660.  00:581F  70                  	db $70			;Volume 14
     661.  00:5820  75                  	db $75			;Instrument 3
     662.  00:5821  9D 00               	db $9d,$00			;CMD Drum $01
     663.  00:5823  C1                  	db $c1			;Wait 2
     664.  00:5824  19                  	db $19			;Note C#3
     665.  00:5825  9D 04               	db $9d,$04			;CMD Drum $03
     666.  00:5827                      					;Wait Repeat 2
     667.  00:5827  60                  	db $60			;Release 96
     668.  00:5828  9D 04               	db $9d,$04			;CMD Drum $03
     669.  00:582A                      					;Wait Repeat 2
     670.  00:582A  9D 06               	db $9d,$06			;CMD Drum $04
     671.  00:582C                      					;Wait Repeat 2
     672.  00:582C  19                  	db $19			;Note C#3
     673.  00:582D  9D 02               	db $9d,$02			;CMD Drum $02
     674.  00:582F                      					;Wait Repeat 2
     675.  00:582F  19                  	db $19			;Note C#3
     676.  00:5830  9D 04               	db $9d,$04			;CMD Drum $03
     677.  00:5832                      					;Wait Repeat 2
     678.  00:5832  60                  	db $60			;Release 96
     679.  00:5833  9D 04               	db $9d,$04			;CMD Drum $03
     680.  00:5835                      					;Wait Repeat 2
     681.  00:5835  9D 06               	db $9d,$06			;CMD Drum $04
     682.  00:5837                      					;Wait Repeat 2
     683.  00:5837  19                  	db $19			;Note C#3
     684.  00:5838  9D 00               	db $9d,$00			;CMD Drum $01
     685.  00:583A                      					;Wait Repeat 2
     686.  00:583A  19                  	db $19			;Note C#3
     687.  00:583B  9D 04               	db $9d,$04			;CMD Drum $03
     688.  00:583D                      					;Wait Repeat 2
     689.  00:583D  60                  	db $60			;Release 96
     690.  00:583E  9D 04               	db $9d,$04			;CMD Drum $03
     691.  00:5840                      					;Wait Repeat 2
     692.  00:5840  9D 06               	db $9d,$06			;CMD Drum $04
     693.  00:5842                      					;Wait Repeat 2
     694.  00:5842  9D 02               	db $9d,$02			;CMD Drum $02
     695.  00:5844                      					;Wait Repeat 2
     696.  00:5844  9D 06               	db $9d,$06			;CMD Drum $04
     697.  00:5846                      					;Wait Repeat 2
     698.  00:5846  19                  	db $19			;Note C#3
     699.  00:5847  9D 00               	db $9d,$00			;CMD Drum $01
     700.  00:5849                      					;Wait Repeat 2
     701.  00:5849  9D 02               	db $9d,$02			;CMD Drum $02
     702.  00:584B                      					;Wait Repeat 2
     703.  00:584B  9D 00               	db $9d,$00			;CMD Drum $01
     704.  00:584D                      					;Wait Repeat 2
     705.  00:584D  60                  	db $60			;Release 96
     706.  00:584E  9D 04               	db $9d,$04			;CMD Drum $03
     707.  00:5850                      					;Wait Repeat 2
     708.  00:5850  19                  	db $19			;Note C#3
     709.  00:5851  9D 04               	db $9d,$04			;CMD Drum $03
     710.  00:5853                      					;Wait Repeat 2
     711.  00:5853  60                  	db $60			;Release 96
     712.  00:5854  9D 04               	db $9d,$04			;CMD Drum $03
     713.  00:5856                      					;Wait Repeat 2
     714.  00:5856  19                  	db $19			;Note C#3
     715.  00:5857  9D 02               	db $9d,$02			;CMD Drum $02
     716.  00:5859                      					;Wait Repeat 2
     717.  00:5859  60                  	db $60			;Release 96
     718.  00:585A  9D 04               	db $9d,$04			;CMD Drum $03
     719.  00:585C                      					;Wait Repeat 2
     720.  00:585C  19                  	db $19			;Note C#3
     721.  00:585D  9D 04               	db $9d,$04			;CMD Drum $03
     722.  00:585F  C0                  	db $c0			;Wait 1
     723.  00:5860  60                  	db $60			;Release 96
     724.  00:5861  C0                  	db $c0			;Wait 1
     725.  00:5862  19                  	db $19			;Note C#3
     726.  00:5863  9D 04               	db $9d,$04			;CMD Drum $03
     727.  00:5865  C1                  	db $c1			;Wait 2
     728.  00:5866  9D 00               	db $9d,$00			;CMD Drum $01
     729.  00:5868                      					;Wait Repeat 2
     730.  00:5868  9D 04               	db $9d,$04			;CMD Drum $03
     731.  00:586A  C0                  	db $c0			;Wait 1
     732.  00:586B  60                  	db $60			;Release 96
     733.  00:586C  C0                  	db $c0			;Wait 1
     734.  00:586D  9D 04               	db $9d,$04			;CMD Drum $03
     735.  00:586F  C1                  	db $c1			;Wait 2
     736.  00:5870  9D 04               	db $9d,$04			;CMD Drum $03
     737.  00:5872                      					;Wait Repeat 2
     738.  00:5872  9D 02               	db $9d,$02			;CMD Drum $02
     739.  00:5874                      					;Wait Repeat 2
     740.  00:5874  9D 04               	db $9d,$04			;CMD Drum $03
     741.  00:5876                      					;Wait Repeat 2
     742.  00:5876  9D 00               	db $9d,$00			;CMD Drum $01
     743.  00:5878                      					;Wait Repeat 2
     744.  00:5878  9D 02               	db $9d,$02			;CMD Drum $02
     745.  00:587A  C1                  	db $c1			;Wait 2
     746.  00:587B  BF                  	db $bf			;[End-Of-Track]
     747.  00:587C                      .track_008:
     748.  00:587C  0C                  	db $0c			;Note C-2
     749.  00:587D  71                  	db $71			;Volume 15
     750.  00:587E  79                  	db $79			;Instrument 7
     751.  00:587F  C1                  	db $c1			;Wait 2
     752.  00:5880  0D                  	db $0d			;Note C#2
     753.  00:5881  6E                  	db $6e			;Volume 12
     754.  00:5882  7A                  	db $7a			;Instrument 8
     755.  00:5883  C0                  	db $c0			;Wait 1
     756.  00:5884  60                  	db $60			;Release 96
     757.  00:5885  C0                  	db $c0			;Wait 1
     758.  00:5886  0D                  	db $0d			;Note C#2
     759.  00:5887  71                  	db $71			;Volume 15
     760.  00:5888  C1                  	db $c1			;Wait 2
     761.  00:5889  0D                  	db $0d			;Note C#2
     762.  00:588A  70                  	db $70			;Volume 14
     763.  00:588B                      					;Wait Repeat 2
     764.  00:588B  19                  	db $19			;Note C#3
     765.  00:588C  71                  	db $71			;Volume 15
     766.  00:588D  77                  	db $77			;Instrument 5
     767.  00:588E                      					;Wait Repeat 2
     768.  00:588E  0D                  	db $0d			;Note C#2
     769.  00:588F  6E                  	db $6e			;Volume 12
     770.  00:5890  7A                  	db $7a			;Instrument 8
     771.  00:5891  C0                  	db $c0			;Wait 1
     772.  00:5892  60                  	db $60			;Release 96
     773.  00:5893  C0                  	db $c0			;Wait 1
     774.  00:5894  0D                  	db $0d			;Note C#2
     775.  00:5895  71                  	db $71			;Volume 15
     776.  00:5896  C1                  	db $c1			;Wait 2
     777.  00:5897  0D                  	db $0d			;Note C#2
     778.  00:5898  70                  	db $70			;Volume 14
     779.  00:5899                      					;Wait Repeat 2
     780.  00:5899  0C                  	db $0c			;Note C-2
     781.  00:589A  71                  	db $71			;Volume 15
     782.  00:589B  79                  	db $79			;Instrument 7
     783.  00:589C                      					;Wait Repeat 2
     784.  00:589C  0D                  	db $0d			;Note C#2
     785.  00:589D  6E                  	db $6e			;Volume 12
     786.  00:589E  7A                  	db $7a			;Instrument 8
     787.  00:589F  C0                  	db $c0			;Wait 1
     788.  00:58A0  60                  	db $60			;Release 96
     789.  00:58A1  C0                  	db $c0			;Wait 1
     790.  00:58A2  0D                  	db $0d			;Note C#2
     791.  00:58A3  71                  	db $71			;Volume 15
     792.  00:58A4  C1                  	db $c1			;Wait 2
     793.  00:58A5  0D                  	db $0d			;Note C#2
     794.  00:58A6  70                  	db $70			;Volume 14
     795.  00:58A7                      					;Wait Repeat 2
     796.  00:58A7  19                  	db $19			;Note C#3
     797.  00:58A8  71                  	db $71			;Volume 15
     798.  00:58A9  77                  	db $77			;Instrument 5
     799.  00:58AA                      					;Wait Repeat 2
     800.  00:58AA  0D                  	db $0d			;Note C#2
     801.  00:58AB  6E                  	db $6e			;Volume 12
     802.  00:58AC  7A                  	db $7a			;Instrument 8
     803.  00:58AD  C0                  	db $c0			;Wait 1
     804.  00:58AE  60                  	db $60			;Release 96
     805.  00:58AF  C0                  	db $c0			;Wait 1
     806.  00:58B0  0D                  	db $0d			;Note C#2
     807.  00:58B1  71                  	db $71			;Volume 15
     808.  00:58B2  C1                  	db $c1			;Wait 2
     809.  00:58B3  0D                  	db $0d			;Note C#2
     810.  00:58B4  70                  	db $70			;Volume 14
     811.  00:58B5                      					;Wait Repeat 2
     812.  00:58B5  0C                  	db $0c			;Note C-2
     813.  00:58B6  71                  	db $71			;Volume 15
     814.  00:58B7  79                  	db $79			;Instrument 7
     815.  00:58B8                      					;Wait Repeat 2
     816.  00:58B8  10                  	db $10			;Note E-2
     817.  00:58B9  6E                  	db $6e			;Volume 12
     818.  00:58BA  7A                  	db $7a			;Instrument 8
     819.  00:58BB  C0                  	db $c0			;Wait 1
     820.  00:58BC  60                  	db $60			;Release 96
     821.  00:58BD  C0                  	db $c0			;Wait 1
     822.  00:58BE  10                  	db $10			;Note E-2
     823.  00:58BF  71                  	db $71			;Volume 15
     824.  00:58C0  C1                  	db $c1			;Wait 2
     825.  00:58C1  10                  	db $10			;Note E-2
     826.  00:58C2  70                  	db $70			;Volume 14
     827.  00:58C3                      					;Wait Repeat 2
     828.  00:58C3  19                  	db $19			;Note C#3
     829.  00:58C4  71                  	db $71			;Volume 15
     830.  00:58C5  77                  	db $77			;Instrument 5
     831.  00:58C6                      					;Wait Repeat 2
     832.  00:58C6  10                  	db $10			;Note E-2
     833.  00:58C7  6E                  	db $6e			;Volume 12
     834.  00:58C8  7A                  	db $7a			;Instrument 8
     835.  00:58C9  C0                  	db $c0			;Wait 1
     836.  00:58CA  60                  	db $60			;Release 96
     837.  00:58CB  C0                  	db $c0			;Wait 1
     838.  00:58CC  10                  	db $10			;Note E-2
     839.  00:58CD  71                  	db $71			;Volume 15
     840.  00:58CE  C1                  	db $c1			;Wait 2
     841.  00:58CF  10                  	db $10			;Note E-2
     842.  00:58D0  70                  	db $70			;Volume 14
     843.  00:58D1                      					;Wait Repeat 2
     844.  00:58D1  0C                  	db $0c			;Note C-2
     845.  00:58D2  71                  	db $71			;Volume 15
     846.  00:58D3  79                  	db $79			;Instrument 7
     847.  00:58D4                      					;Wait Repeat 2
     848.  00:58D4  12                  	db $12			;Note F#2
     849.  00:58D5  6E                  	db $6e			;Volume 12
     850.  00:58D6  7A                  	db $7a			;Instrument 8
     851.  00:58D7  C0                  	db $c0			;Wait 1
     852.  00:58D8  60                  	db $60			;Release 96
     853.  00:58D9  C0                  	db $c0			;Wait 1
     854.  00:58DA  12                  	db $12			;Note F#2
     855.  00:58DB  71                  	db $71			;Volume 15
     856.  00:58DC  C1                  	db $c1			;Wait 2
     857.  00:58DD  12                  	db $12			;Note F#2
     858.  00:58DE  70                  	db $70			;Volume 14
     859.  00:58DF                      					;Wait Repeat 2
     860.  00:58DF  19                  	db $19			;Note C#3
     861.  00:58E0  71                  	db $71			;Volume 15
     862.  00:58E1  77                  	db $77			;Instrument 5
     863.  00:58E2                      					;Wait Repeat 2
     864.  00:58E2  0B                  	db $0b			;Note B-1
     865.  00:58E3  6E                  	db $6e			;Volume 12
     866.  00:58E4  7A                  	db $7a			;Instrument 8
     867.  00:58E5  C0                  	db $c0			;Wait 1
     868.  00:58E6  60                  	db $60			;Release 96
     869.  00:58E7  C0                  	db $c0			;Wait 1
     870.  00:58E8  19                  	db $19			;Note C#3
     871.  00:58E9  71                  	db $71			;Volume 15
     872.  00:58EA  77                  	db $77			;Instrument 5
     873.  00:58EB  C1                  	db $c1			;Wait 2
     874.  00:58EC  19                  	db $19			;Note C#3
     875.  00:58ED  71                  	db $71			;Volume 15
     876.  00:58EE  C1                  	db $c1			;Wait 2
     877.  00:58EF  BF                  	db $bf			;[End-Of-Track]
     878.  00:58F0                      .track_009:
     879.  00:58F0  60                  	db $60			;Release 96
     880.  00:58F1  C1                  	db $c1			;Wait 2
     881.  00:58F2  31                  	db $31			;Note C#5
     882.  00:58F3  94 37               	db $94,$37			;CMD Arpeggio
     883.  00:58F5                      					;Wait Repeat 2
     884.  00:58F5  60                  	db $60			;Release 96
     885.  00:58F6  C3                  	db $c3			;Wait 4
     886.  00:58F7  31                  	db $31			;Note C#5
     887.  00:58F8                      					;Wait Repeat 4
     888.  00:58F8  60                  	db $60			;Release 96
     889.  00:58F9  C1                  	db $c1			;Wait 2
     890.  00:58FA  34                  	db $34			;Note E-5
     891.  00:58FB  94 27               	db $94,$27			;CMD Arpeggio
     892.  00:58FD                      					;Wait Repeat 2
     893.  00:58FD  31                  	db $31			;Note C#5
     894.  00:58FE  94 37               	db $94,$37			;CMD Arpeggio
     895.  00:5900  C5                  	db $c5			;Wait 6
     896.  00:5901  31                  	db $31			;Note C#5
     897.  00:5902  94 27               	db $94,$27			;CMD Arpeggio
     898.  00:5904  C3                  	db $c3			;Wait 4
     899.  00:5905  31                  	db $31			;Note C#5
     900.  00:5906  C1                  	db $c1			;Wait 2
     901.  00:5907  31                  	db $31			;Note C#5
     902.  00:5908  94 37               	db $94,$37			;CMD Arpeggio
     903.  00:590A                      					;Wait Repeat 2
     904.  00:590A  60                  	db $60			;Release 96
     905.  00:590B                      					;Wait Repeat 2
     906.  00:590B  60                  	db $60			;Release 96
     907.  00:590C  C1                  	db $c1			;Wait 2
     908.  00:590D  31                  	db $31			;Note C#5
     909.  00:590E  94 37               	db $94,$37			;CMD Arpeggio
     910.  00:5910                      					;Wait Repeat 2
     911.  00:5910  60                  	db $60			;Release 96
     912.  00:5911  C3                  	db $c3			;Wait 4
     913.  00:5912  31                  	db $31			;Note C#5
     914.  00:5913                      					;Wait Repeat 4
     915.  00:5913  60                  	db $60			;Release 96
     916.  00:5914  C1                  	db $c1			;Wait 2
     917.  00:5915  34                  	db $34			;Note E-5
     918.  00:5916  94 27               	db $94,$27			;CMD Arpeggio
     919.  00:5918                      					;Wait Repeat 2
     920.  00:5918  31                  	db $31			;Note C#5
     921.  00:5919  94 37               	db $94,$37			;CMD Arpeggio
     922.  00:591B  C5                  	db $c5			;Wait 6
     923.  00:591C  34                  	db $34			;Note E-5
     924.  00:591D  94 27               	db $94,$27			;CMD Arpeggio
     925.  00:591F  C1                  	db $c1			;Wait 2
     926.  00:5920  60                  	db $60			;Release 96
     927.  00:5921  C1                  	db $c1			;Wait 2
     928.  00:5922  31                  	db $31			;Note C#5
     929.  00:5923  94 27               	db $94,$27			;CMD Arpeggio
     930.  00:5925                      					;Wait Repeat 2
     931.  00:5925  31                  	db $31			;Note C#5
     932.  00:5926  94 57               	db $94,$57			;CMD Arpeggio
     933.  00:5928                      					;Wait Repeat 2
     934.  00:5928  2F                  	db $2f			;Note B-4
     935.  00:5929  94 27               	db $94,$27			;CMD Arpeggio
     936.  00:592B  C1                  	db $c1			;Wait 2
     937.  00:592C  BF                  	db $bf			;[End-Of-Track]
     938.  00:592D                      .track_010:
     939.  00:592D  60                  	db $60			;Release 96
     940.  00:592E  C1                  	db $c1			;Wait 2
     941.  00:592F  19                  	db $19			;Note C#3
     942.  00:5930  C0                  	db $c0			;Wait 1
     943.  00:5931  60                  	db $60			;Release 96
     944.  00:5932                      					;Wait Repeat 1
     945.  00:5932  19                  	db $19			;Note C#3
     946.  00:5933  C1                  	db $c1			;Wait 2
     947.  00:5934  19                  	db $19			;Note C#3
     948.  00:5935                      					;Wait Repeat 2
     949.  00:5935  60                  	db $60			;Release 96
     950.  00:5936                      					;Wait Repeat 2
     951.  00:5936  19                  	db $19			;Note C#3
     952.  00:5937  C0                  	db $c0			;Wait 1
     953.  00:5938  60                  	db $60			;Release 96
     954.  00:5939                      					;Wait Repeat 1
     955.  00:5939  19                  	db $19			;Note C#3
     956.  00:593A  C1                  	db $c1			;Wait 2
     957.  00:593B  19                  	db $19			;Note C#3
     958.  00:593C                      					;Wait Repeat 2
     959.  00:593C  60                  	db $60			;Release 96
     960.  00:593D                      					;Wait Repeat 2
     961.  00:593D  19                  	db $19			;Note C#3
     962.  00:593E  C0                  	db $c0			;Wait 1
     963.  00:593F  60                  	db $60			;Release 96
     964.  00:5940                      					;Wait Repeat 1
     965.  00:5940  19                  	db $19			;Note C#3
     966.  00:5941  C1                  	db $c1			;Wait 2
     967.  00:5942  19                  	db $19			;Note C#3
     968.  00:5943                      					;Wait Repeat 2
     969.  00:5943  60                  	db $60			;Release 96
     970.  00:5944                      					;Wait Repeat 2
     971.  00:5944  19                  	db $19			;Note C#3
     972.  00:5945  C0                  	db $c0			;Wait 1
     973.  00:5946  60                  	db $60			;Release 96
     974.  00:5947                      					;Wait Repeat 1
     975.  00:5947  19                  	db $19			;Note C#3
     976.  00:5948  C1                  	db $c1			;Wait 2
     977.  00:5949  19                  	db $19			;Note C#3
     978.  00:594A                      					;Wait Repeat 2
     979.  00:594A  60                  	db $60			;Release 96
     980.  00:594B                      					;Wait Repeat 2
     981.  00:594B  1C                  	db $1c			;Note E-3
     982.  00:594C  C0                  	db $c0			;Wait 1
     983.  00:594D  60                  	db $60			;Release 96
     984.  00:594E                      					;Wait Repeat 1
     985.  00:594E  1C                  	db $1c			;Note E-3
     986.  00:594F  C1                  	db $c1			;Wait 2
     987.  00:5950  1C                  	db $1c			;Note E-3
     988.  00:5951                      					;Wait Repeat 2
     989.  00:5951  60                  	db $60			;Release 96
     990.  00:5952                      					;Wait Repeat 2
     991.  00:5952  1C                  	db $1c			;Note E-3
     992.  00:5953  C0                  	db $c0			;Wait 1
     993.  00:5954  60                  	db $60			;Release 96
     994.  00:5955                      					;Wait Repeat 1
     995.  00:5955  1C                  	db $1c			;Note E-3
     996.  00:5956  C1                  	db $c1			;Wait 2
     997.  00:5957  1C                  	db $1c			;Note E-3
     998.  00:5958                      					;Wait Repeat 2
     999.  00:5958  60                  	db $60			;Release 96
    1000.  00:5959                      					;Wait Repeat 2
    1001.  00:5959  1E                  	db $1e			;Note F#3
    1002.  00:595A  C0                  	db $c0			;Wait 1
    1003.  00:595B  60                  	db $60			;Release 96
    1004.  00:595C                      					;Wait Repeat 1
    1005.  00:595C  1E                  	db $1e			;Note F#3
    1006.  00:595D  C1                  	db $c1			;Wait 2
    1007.  00:595E  1E                  	db $1e			;Note F#3
    1008.  00:595F                      					;Wait Repeat 2
    1009.  00:595F  60                  	db $60			;Release 96
    1010.  00:5960                      					;Wait Repeat 2
    1011.  00:5960  17                  	db $17			;Note B-2
    1012.  00:5961  C0                  	db $c0			;Wait 1
    1013.  00:5962  60                  	db $60			;Release 96
    1014.  00:5963                      					;Wait Repeat 1
    1015.  00:5963  17                  	db $17			;Note B-2
    1016.  00:5964  C1                  	db $c1			;Wait 2
    1017.  00:5965  17                  	db $17			;Note B-2
    1018.  00:5966  C1                  	db $c1			;Wait 2
    1019.  00:5967  BF                  	db $bf			;[End-Of-Track]
    1020.  00:5968                      .track_011:
    1021.  00:5968  FF                  	db $ff			;Wait 64
    1022.  00:5969  BF                  	db $bf			;[End-Of-Track]
    1023.  00:596A                      .track_013:
    1024.  00:596A  60                  	db $60			;Release 96
    1025.  00:596B  C1                  	db $c1			;Wait 2
    1026.  00:596C  3D                  	db $3d			;Note C#6
    1027.  00:596D  94 37               	db $94,$37			;CMD Arpeggio
    1028.  00:596F                      					;Wait Repeat 2
    1029.  00:596F  60                  	db $60			;Release 96
    1030.  00:5970  C3                  	db $c3			;Wait 4
    1031.  00:5971  3D                  	db $3d			;Note C#6
    1032.  00:5972                      					;Wait Repeat 4
    1033.  00:5972  60                  	db $60			;Release 96
    1034.  00:5973  C1                  	db $c1			;Wait 2
    1035.  00:5974  40                  	db $40			;Note E-6
    1036.  00:5975  94 27               	db $94,$27			;CMD Arpeggio
    1037.  00:5977                      					;Wait Repeat 2
    1038.  00:5977  3D                  	db $3d			;Note C#6
    1039.  00:5978  94 37               	db $94,$37			;CMD Arpeggio
    1040.  00:597A  C5                  	db $c5			;Wait 6
    1041.  00:597B  3D                  	db $3d			;Note C#6
    1042.  00:597C  94 27               	db $94,$27			;CMD Arpeggio
    1043.  00:597E  C3                  	db $c3			;Wait 4
    1044.  00:597F  3D                  	db $3d			;Note C#6
    1045.  00:5980  C1                  	db $c1			;Wait 2
    1046.  00:5981  3D                  	db $3d			;Note C#6
    1047.  00:5982  94 37               	db $94,$37			;CMD Arpeggio
    1048.  00:5984                      					;Wait Repeat 2
    1049.  00:5984  60                  	db $60			;Release 96
    1050.  00:5985                      					;Wait Repeat 2
    1051.  00:5985  60                  	db $60			;Release 96
    1052.  00:5986  C1                  	db $c1			;Wait 2
    1053.  00:5987  3D                  	db $3d			;Note C#6
    1054.  00:5988  94 37               	db $94,$37			;CMD Arpeggio
    1055.  00:598A                      					;Wait Repeat 2
    1056.  00:598A  60                  	db $60			;Release 96
    1057.  00:598B  C3                  	db $c3			;Wait 4
    1058.  00:598C  3D                  	db $3d			;Note C#6
    1059.  00:598D                      					;Wait Repeat 4
    1060.  00:598D  60                  	db $60			;Release 96
    1061.  00:598E  C1                  	db $c1			;Wait 2
    1062.  00:598F  40                  	db $40			;Note E-6
    1063.  00:5990  94 27               	db $94,$27			;CMD Arpeggio
    1064.  00:5992                      					;Wait Repeat 2
    1065.  00:5992  3D                  	db $3d			;Note C#6
    1066.  00:5993  94 37               	db $94,$37			;CMD Arpeggio
    1067.  00:5995  C5                  	db $c5			;Wait 6
    1068.  00:5996  40                  	db $40			;Note E-6
    1069.  00:5997  94 27               	db $94,$27			;CMD Arpeggio
    1070.  00:5999  C1                  	db $c1			;Wait 2
    1071.  00:599A  60                  	db $60			;Release 96
    1072.  00:599B  C1                  	db $c1			;Wait 2
    1073.  00:599C  3D                  	db $3d			;Note C#6
    1074.  00:599D  94 27               	db $94,$27			;CMD Arpeggio
    1075.  00:599F                      					;Wait Repeat 2
    1076.  00:599F  3D                  	db $3d			;Note C#6
    1077.  00:59A0  94 57               	db $94,$57			;CMD Arpeggio
    1078.  00:59A2                      					;Wait Repeat 2
    1079.  00:59A2  3B                  	db $3b			;Note B-5
    1080.  00:59A3  94 27               	db $94,$27			;CMD Arpeggio
    1081.  00:59A5  C1                  	db $c1			;Wait 2
    1082.  00:59A6  BF                  	db $bf			;[End-Of-Track]
    1083.  00:59A7                      .track_014:
    1084.  00:59A7  60                  	db $60			;Release 96
    1085.  00:59A8  94 C0               	db $94,$c0			;CMD Arpeggio
    1086.  00:59AA  C1                  	db $c1			;Wait 2
    1087.  00:59AB  49                  	db $49			;Note C#7
    1088.  00:59AC  6F                  	db $6f			;Volume 13
    1089.  00:59AD  74                  	db $74			;Instrument 2
    1090.  00:59AE                      					;Wait Repeat 2
    1091.  00:59AE  47                  	db $47			;Note B-6
    1092.  00:59AF                      					;Wait Repeat 2
    1093.  00:59AF  44                  	db $44			;Note G#6
    1094.  00:59B0                      					;Wait Repeat 2
    1095.  00:59B0  42                  	db $42			;Note F#6
    1096.  00:59B1                      					;Wait Repeat 2
    1097.  00:59B1  40                  	db $40			;Note E-6
    1098.  00:59B2                      					;Wait Repeat 2
    1099.  00:59B2  42                  	db $42			;Note F#6
    1100.  00:59B3                      					;Wait Repeat 2
    1101.  00:59B3  40                  	db $40			;Note E-6
    1102.  00:59B4                      					;Wait Repeat 2
    1103.  00:59B4  3D                  	db $3d			;Note C#6
    1104.  00:59B5                      					;Wait Repeat 2
    1105.  00:59B5  60                  	db $60			;Release 96
    1106.  00:59B6  CF                  	db $cf			;Wait 16
    1107.  00:59B7  3D                  	db $3d			;Note C#6
    1108.  00:59B8  C1                  	db $c1			;Wait 2
    1109.  00:59B9  3F                  	db $3f			;Note D#6
    1110.  00:59BA                      					;Wait Repeat 2
    1111.  00:59BA  40                  	db $40			;Note E-6
    1112.  00:59BB                      					;Wait Repeat 2
    1113.  00:59BB  42                  	db $42			;Note F#6
    1114.  00:59BC                      					;Wait Repeat 2
    1115.  00:59BC  40                  	db $40			;Note E-6
    1116.  00:59BD                      					;Wait Repeat 2
    1117.  00:59BD  42                  	db $42			;Note F#6
    1118.  00:59BE                      					;Wait Repeat 2
    1119.  00:59BE  47                  	db $47			;Note B-6
    1120.  00:59BF                      					;Wait Repeat 2
    1121.  00:59BF  44                  	db $44			;Note G#6
    1122.  00:59C0                      					;Wait Repeat 2
    1123.  00:59C0  60                  	db $60			;Release 96
    1124.  00:59C1  CD                  	db $cd			;Wait 14
    1125.  00:59C2  BF                  	db $bf			;[End-Of-Track]
    1126.  00:59C3                      .track_015:
    1127.  00:59C3  19                  	db $19			;Note C#3
    1128.  00:59C4  70                  	db $70			;Volume 14
    1129.  00:59C5  75                  	db $75			;Instrument 3
    1130.  00:59C6  9D 00               	db $9d,$00			;CMD Drum $01
    1131.  00:59C8  C1                  	db $c1			;Wait 2
    1132.  00:59C9  19                  	db $19			;Note C#3
    1133.  00:59CA  9D 04               	db $9d,$04			;CMD Drum $03
    1134.  00:59CC                      					;Wait Repeat 2
    1135.  00:59CC  60                  	db $60			;Release 96
    1136.  00:59CD  9D 04               	db $9d,$04			;CMD Drum $03
    1137.  00:59CF                      					;Wait Repeat 2
    1138.  00:59CF  9D 06               	db $9d,$06			;CMD Drum $04
    1139.  00:59D1                      					;Wait Repeat 2
    1140.  00:59D1  19                  	db $19			;Note C#3
    1141.  00:59D2  9D 02               	db $9d,$02			;CMD Drum $02
    1142.  00:59D4                      					;Wait Repeat 2
    1143.  00:59D4  19                  	db $19			;Note C#3
    1144.  00:59D5  9D 04               	db $9d,$04			;CMD Drum $03
    1145.  00:59D7                      					;Wait Repeat 2
    1146.  00:59D7  60                  	db $60			;Release 96
    1147.  00:59D8  9D 04               	db $9d,$04			;CMD Drum $03
    1148.  00:59DA                      					;Wait Repeat 2
    1149.  00:59DA  9D 06               	db $9d,$06			;CMD Drum $04
    1150.  00:59DC                      					;Wait Repeat 2
    1151.  00:59DC  19                  	db $19			;Note C#3
    1152.  00:59DD  9D 00               	db $9d,$00			;CMD Drum $01
    1153.  00:59DF                      					;Wait Repeat 2
    1154.  00:59DF  19                  	db $19			;Note C#3
    1155.  00:59E0  9D 04               	db $9d,$04			;CMD Drum $03
    1156.  00:59E2                      					;Wait Repeat 2
    1157.  00:59E2  60                  	db $60			;Release 96
    1158.  00:59E3  9D 04               	db $9d,$04			;CMD Drum $03
    1159.  00:59E5                      					;Wait Repeat 2
    1160.  00:59E5  9D 06               	db $9d,$06			;CMD Drum $04
    1161.  00:59E7                      					;Wait Repeat 2
    1162.  00:59E7  9D 02               	db $9d,$02			;CMD Drum $02
    1163.  00:59E9                      					;Wait Repeat 2
    1164.  00:59E9  9D 06               	db $9d,$06			;CMD Drum $04
    1165.  00:59EB                      					;Wait Repeat 2
    1166.  00:59EB  1C                  	db $1c			;Note E-3
    1167.  00:59EC  9D 00               	db $9d,$00			;CMD Drum $01
    1168.  00:59EE                      					;Wait Repeat 2
    1169.  00:59EE  9D 02               	db $9d,$02			;CMD Drum $02
    1170.  00:59F0                      					;Wait Repeat 2
    1171.  00:59F0  9D 00               	db $9d,$00			;CMD Drum $01
    1172.  00:59F2                      					;Wait Repeat 2
    1173.  00:59F2  60                  	db $60			;Release 96
    1174.  00:59F3  9D 04               	db $9d,$04			;CMD Drum $03
    1175.  00:59F5                      					;Wait Repeat 2
    1176.  00:59F5  1C                  	db $1c			;Note E-3
    1177.  00:59F6  9D 04               	db $9d,$04			;CMD Drum $03
    1178.  00:59F8                      					;Wait Repeat 2
    1179.  00:59F8  60                  	db $60			;Release 96
    1180.  00:59F9  9D 04               	db $9d,$04			;CMD Drum $03
    1181.  00:59FB                      					;Wait Repeat 2
    1182.  00:59FB  1C                  	db $1c			;Note E-3
    1183.  00:59FC  9D 02               	db $9d,$02			;CMD Drum $02
    1184.  00:59FE                      					;Wait Repeat 2
    1185.  00:59FE  60                  	db $60			;Release 96
    1186.  00:59FF  9D 04               	db $9d,$04			;CMD Drum $03
    1187.  00:5A01                      					;Wait Repeat 2
    1188.  00:5A01  1C                  	db $1c			;Note E-3
    1189.  00:5A02  9D 04               	db $9d,$04			;CMD Drum $03
    1190.  00:5A04  C0                  	db $c0			;Wait 1
    1191.  00:5A05  60                  	db $60			;Release 96
    1192.  00:5A06  C0                  	db $c0			;Wait 1
    1193.  00:5A07  1E                  	db $1e			;Note F#3
    1194.  00:5A08  9D 04               	db $9d,$04			;CMD Drum $03
    1195.  00:5A0A  C1                  	db $c1			;Wait 2
    1196.  00:5A0B  9D 00               	db $9d,$00			;CMD Drum $01
    1197.  00:5A0D                      					;Wait Repeat 2
    1198.  00:5A0D  60                  	db $60			;Release 96
    1199.  00:5A0E  9D 04               	db $9d,$04			;CMD Drum $03
    1200.  00:5A10                      					;Wait Repeat 2
    1201.  00:5A10  1E                  	db $1e			;Note F#3
    1202.  00:5A11  9D 04               	db $9d,$04			;CMD Drum $03
    1203.  00:5A13                      					;Wait Repeat 2
    1204.  00:5A13  60                  	db $60			;Release 96
    1205.  00:5A14  9D 04               	db $9d,$04			;CMD Drum $03
    1206.  00:5A16                      					;Wait Repeat 2
    1207.  00:5A16  17                  	db $17			;Note B-2
    1208.  00:5A17  9D 02               	db $9d,$02			;CMD Drum $02
    1209.  00:5A19                      					;Wait Repeat 2
    1210.  00:5A19  9D 06               	db $9d,$06			;CMD Drum $04
    1211.  00:5A1B  C0                  	db $c0			;Wait 1
    1212.  00:5A1C  60                  	db $60			;Release 96
    1213.  00:5A1D  C0                  	db $c0			;Wait 1
    1214.  00:5A1E  17                  	db $17			;Note B-2
    1215.  00:5A1F  9D 02               	db $9d,$02			;CMD Drum $02
    1216.  00:5A21  C1                  	db $c1			;Wait 2
    1217.  00:5A22  9D 02               	db $9d,$02			;CMD Drum $02
    1218.  00:5A24  C0                  	db $c0			;Wait 1
    1219.  00:5A25  60                  	db $60			;Release 96
    1220.  00:5A26  BF                  	db $bf			;[End-Of-Track]
    1221.  00:5A27                      .track_018:
    1222.  00:5A27  60                  	db $60			;Release 96
    1223.  00:5A28  C1                  	db $c1			;Wait 2
    1224.  00:5A29  19                  	db $19			;Note C#3
    1225.  00:5A2A  C0                  	db $c0			;Wait 1
    1226.  00:5A2B  60                  	db $60			;Release 96
    1227.  00:5A2C                      					;Wait Repeat 1
    1228.  00:5A2C  19                  	db $19			;Note C#3
    1229.  00:5A2D  C1                  	db $c1			;Wait 2
    1230.  00:5A2E  19                  	db $19			;Note C#3
    1231.  00:5A2F                      					;Wait Repeat 2
    1232.  00:5A2F  60                  	db $60			;Release 96
    1233.  00:5A30                      					;Wait Repeat 2
    1234.  00:5A30  19                  	db $19			;Note C#3
    1235.  00:5A31  C0                  	db $c0			;Wait 1
    1236.  00:5A32  60                  	db $60			;Release 96
    1237.  00:5A33                      					;Wait Repeat 1
    1238.  00:5A33  19                  	db $19			;Note C#3
    1239.  00:5A34  C1                  	db $c1			;Wait 2
    1240.  00:5A35  19                  	db $19			;Note C#3
    1241.  00:5A36                      					;Wait Repeat 2
    1242.  00:5A36  60                  	db $60			;Release 96
    1243.  00:5A37                      					;Wait Repeat 2
    1244.  00:5A37  19                  	db $19			;Note C#3
    1245.  00:5A38  C0                  	db $c0			;Wait 1
    1246.  00:5A39  60                  	db $60			;Release 96
    1247.  00:5A3A                      					;Wait Repeat 1
    1248.  00:5A3A  19                  	db $19			;Note C#3
    1249.  00:5A3B  C1                  	db $c1			;Wait 2
    1250.  00:5A3C  19                  	db $19			;Note C#3
    1251.  00:5A3D                      					;Wait Repeat 2
    1252.  00:5A3D  60                  	db $60			;Release 96
    1253.  00:5A3E                      					;Wait Repeat 2
    1254.  00:5A3E  19                  	db $19			;Note C#3
    1255.  00:5A3F  C0                  	db $c0			;Wait 1
    1256.  00:5A40  60                  	db $60			;Release 96
    1257.  00:5A41                      					;Wait Repeat 1
    1258.  00:5A41  19                  	db $19			;Note C#3
    1259.  00:5A42  C1                  	db $c1			;Wait 2
    1260.  00:5A43  19                  	db $19			;Note C#3
    1261.  00:5A44                      					;Wait Repeat 2
    1262.  00:5A44  60                  	db $60			;Release 96
    1263.  00:5A45                      					;Wait Repeat 2
    1264.  00:5A45  19                  	db $19			;Note C#3
    1265.  00:5A46  C0                  	db $c0			;Wait 1
    1266.  00:5A47  60                  	db $60			;Release 96
    1267.  00:5A48                      					;Wait Repeat 1
    1268.  00:5A48  19                  	db $19			;Note C#3
    1269.  00:5A49  C1                  	db $c1			;Wait 2
    1270.  00:5A4A  19                  	db $19			;Note C#3
    1271.  00:5A4B                      					;Wait Repeat 2
    1272.  00:5A4B  60                  	db $60			;Release 96
    1273.  00:5A4C                      					;Wait Repeat 2
    1274.  00:5A4C  19                  	db $19			;Note C#3
    1275.  00:5A4D  C0                  	db $c0			;Wait 1
    1276.  00:5A4E  60                  	db $60			;Release 96
    1277.  00:5A4F                      					;Wait Repeat 1
    1278.  00:5A4F  19                  	db $19			;Note C#3
    1279.  00:5A50  C1                  	db $c1			;Wait 2
    1280.  00:5A51  19                  	db $19			;Note C#3
    1281.  00:5A52                      					;Wait Repeat 2
    1282.  00:5A52  60                  	db $60			;Release 96
    1283.  00:5A53                      					;Wait Repeat 2
    1284.  00:5A53  1C                  	db $1c			;Note E-3
    1285.  00:5A54  C0                  	db $c0			;Wait 1
    1286.  00:5A55  60                  	db $60			;Release 96
    1287.  00:5A56                      					;Wait Repeat 1
    1288.  00:5A56  1C                  	db $1c			;Note E-3
    1289.  00:5A57  C1                  	db $c1			;Wait 2
    1290.  00:5A58  1C                  	db $1c			;Note E-3
    1291.  00:5A59                      					;Wait Repeat 2
    1292.  00:5A59  60                  	db $60			;Release 96
    1293.  00:5A5A                      					;Wait Repeat 2
    1294.  00:5A5A  17                  	db $17			;Note B-2
    1295.  00:5A5B  C0                  	db $c0			;Wait 1
    1296.  00:5A5C  60                  	db $60			;Release 96
    1297.  00:5A5D                      					;Wait Repeat 1
    1298.  00:5A5D  17                  	db $17			;Note B-2
    1299.  00:5A5E  C1                  	db $c1			;Wait 2
    1300.  00:5A5F  17                  	db $17			;Note B-2
    1301.  00:5A60  C1                  	db $c1			;Wait 2
    1302.  00:5A61  BF                  	db $bf			;[End-Of-Track]
    1303.  00:5A62                      .track_019:
    1304.  00:5A62  2F                  	db $2f			;Note B-4
    1305.  00:5A63  71                  	db $71			;Volume 15
    1306.  00:5A64  7B                  	db $7b			;Instrument 9
    1307.  00:5A65  9C                  	db $9c			;CMD End 
    1308.  00:5A66  C1                  	db $c1			;Wait 2
    1309.  00:5A67  31                  	db $31			;Note C#5
    1310.  00:5A68  91 06               	db $91,$06			;CMD Portamento tone
    1311.  00:5A6A                      					;Wait Repeat 2
    1312.  00:5A6A  95 44               	db $95,$44			;CMD Vibrato
    1313.  00:5A6C                      					;Wait Repeat 2
    1314.  00:5A6C  2C                  	db $2c			;Note G#4
    1315.  00:5A6D  9C                  	db $9c			;CMD End 
    1316.  00:5A6E  C5                  	db $c5			;Wait 6
    1317.  00:5A6F  31                  	db $31			;Note C#5
    1318.  00:5A70  C1                  	db $c1			;Wait 2
    1319.  00:5A71  60                  	db $60			;Release 96
    1320.  00:5A72                      					;Wait Repeat 2
    1321.  00:5A72  31                  	db $31			;Note C#5
    1322.  00:5A73  C1                  	db $c1			;Wait 2
    1323.  00:5A74  93 01               	db $93,$01			;CMD Portamento down
    1324.  00:5A76                      					;Wait Repeat 2
    1325.  00:5A76  33                  	db $33			;Note D#5
    1326.  00:5A77  91 04               	db $91,$04			;CMD Portamento tone
    1327.  00:5A79  C2                  	db $c2			;Wait 3
    1328.  00:5A7A  60                  	db $60			;Release 96
    1329.  00:5A7B  C0                  	db $c0			;Wait 1
    1330.  00:5A7C  34                  	db $34			;Note E-5
    1331.  00:5A7D  9C                  	db $9c			;CMD End 
    1332.  00:5A7E  C3                  	db $c3			;Wait 4
    1333.  00:5A7F  36                  	db $36			;Note F#5
    1334.  00:5A80  C0                  	db $c0			;Wait 1
    1335.  00:5A81  60                  	db $60			;Release 96
    1336.  00:5A82  C0                  	db $c0			;Wait 1
    1337.  00:5A83  34                  	db $34			;Note E-5
    1338.  00:5A84  91 0A               	db $91,$0a			;CMD Portamento tone
    1339.  00:5A86  C1                  	db $c1			;Wait 2
    1340.  00:5A87  95 44               	db $95,$44			;CMD Vibrato
    1341.  00:5A89  C7                  	db $c7			;Wait 8
    1342.  00:5A8A  96 06               	db $96,$06			;CMD Portamento up
    1343.  00:5A8C  C1                  	db $c1			;Wait 2
    1344.  00:5A8D  60                  	db $60			;Release 96
    1345.  00:5A8E  9C                  	db $9c			;CMD End 
    1346.  00:5A8F                      					;Wait Repeat 2
    1347.  00:5A8F  33                  	db $33			;Note D#5
    1348.  00:5A90                      					;Wait Repeat 2
    1349.  00:5A90  60                  	db $60			;Release 96
    1350.  00:5A91                      					;Wait Repeat 2
    1351.  00:5A91  31                  	db $31			;Note C#5
    1352.  00:5A92  C2                  	db $c2			;Wait 3
    1353.  00:5A93  95 48               	db $95,$48			;CMD Vibrato
    1354.  00:5A95  C1                  	db $c1			;Wait 2
    1355.  00:5A96  60                  	db $60			;Release 96
    1356.  00:5A97  C0                  	db $c0			;Wait 1
    1357.  00:5A98  31                  	db $31			;Note C#5
    1358.  00:5A99  9C                  	db $9c			;CMD End 
    1359.  00:5A9A  C1                  	db $c1			;Wait 2
    1360.  00:5A9B  33                  	db $33			;Note D#5
    1361.  00:5A9C  91 04               	db $91,$04			;CMD Portamento tone
    1362.  00:5A9E                      					;Wait Repeat 2
    1363.  00:5A9E  2F                  	db $2f			;Note B-4
    1364.  00:5A9F  9C                  	db $9c			;CMD End 
    1365.  00:5AA0                      					;Wait Repeat 2
    1366.  00:5AA0  2C                  	db $2c			;Note G#4
    1367.  00:5AA1                      					;Wait Repeat 2
    1368.  00:5AA1  2A                  	db $2a			;Note F#4
    1369.  00:5AA2  C1                  	db $c1			;Wait 2
    1370.  00:5AA3  BF                  	db $bf			;[End-Of-Track]
    1371.  00:5AA4                      .track_020:
    1372.  00:5AA4  60                  	db $60			;Release 96
    1373.  00:5AA5  A2 02               	db $a2,$02			;CMD Track detune
    1374.  00:5AA7  C1                  	db $c1			;Wait 2
    1375.  00:5AA8  2F                  	db $2f			;Note B-4
    1376.  00:5AA9  6B                  	db $6b			;Volume 9
    1377.  00:5AAA  7B                  	db $7b			;Instrument 9
    1378.  00:5AAB  9C                  	db $9c			;CMD End 
    1379.  00:5AAC                      					;Wait Repeat 2
    1380.  00:5AAC  31                  	db $31			;Note C#5
    1381.  00:5AAD  91 06               	db $91,$06			;CMD Portamento tone
    1382.  00:5AAF                      					;Wait Repeat 2
    1383.  00:5AAF  95 44               	db $95,$44			;CMD Vibrato
    1384.  00:5AB1                      					;Wait Repeat 2
    1385.  00:5AB1  2C                  	db $2c			;Note G#4
    1386.  00:5AB2  9C                  	db $9c			;CMD End 
    1387.  00:5AB3  C5                  	db $c5			;Wait 6
    1388.  00:5AB4  31                  	db $31			;Note C#5
    1389.  00:5AB5  C1                  	db $c1			;Wait 2
    1390.  00:5AB6  60                  	db $60			;Release 96
    1391.  00:5AB7                      					;Wait Repeat 2
    1392.  00:5AB7  31                  	db $31			;Note C#5
    1393.  00:5AB8  C1                  	db $c1			;Wait 2
    1394.  00:5AB9  93 01               	db $93,$01			;CMD Portamento down
    1395.  00:5ABB                      					;Wait Repeat 2
    1396.  00:5ABB  33                  	db $33			;Note D#5
    1397.  00:5ABC  91 04               	db $91,$04			;CMD Portamento tone
    1398.  00:5ABE  C2                  	db $c2			;Wait 3
    1399.  00:5ABF  60                  	db $60			;Release 96
    1400.  00:5AC0  C0                  	db $c0			;Wait 1
    1401.  00:5AC1  34                  	db $34			;Note E-5
    1402.  00:5AC2  9C                  	db $9c			;CMD End 
    1403.  00:5AC3  C3                  	db $c3			;Wait 4
    1404.  00:5AC4  36                  	db $36			;Note F#5
    1405.  00:5AC5  C0                  	db $c0			;Wait 1
    1406.  00:5AC6  60                  	db $60			;Release 96
    1407.  00:5AC7  C0                  	db $c0			;Wait 1
    1408.  00:5AC8  34                  	db $34			;Note E-5
    1409.  00:5AC9  91 0A               	db $91,$0a			;CMD Portamento tone
    1410.  00:5ACB  C1                  	db $c1			;Wait 2
    1411.  00:5ACC  95 44               	db $95,$44			;CMD Vibrato
    1412.  00:5ACE  C7                  	db $c7			;Wait 8
    1413.  00:5ACF  96 06               	db $96,$06			;CMD Portamento up
    1414.  00:5AD1  C1                  	db $c1			;Wait 2
    1415.  00:5AD2  60                  	db $60			;Release 96
    1416.  00:5AD3  9C                  	db $9c			;CMD End 
    1417.  00:5AD4                      					;Wait Repeat 2
    1418.  00:5AD4  33                  	db $33			;Note D#5
    1419.  00:5AD5                      					;Wait Repeat 2
    1420.  00:5AD5  60                  	db $60			;Release 96
    1421.  00:5AD6                      					;Wait Repeat 2
    1422.  00:5AD6  31                  	db $31			;Note C#5
    1423.  00:5AD7  C2                  	db $c2			;Wait 3
    1424.  00:5AD8  95 48               	db $95,$48			;CMD Vibrato
    1425.  00:5ADA  C1                  	db $c1			;Wait 2
    1426.  00:5ADB  60                  	db $60			;Release 96
    1427.  00:5ADC  C0                  	db $c0			;Wait 1
    1428.  00:5ADD  31                  	db $31			;Note C#5
    1429.  00:5ADE  9C                  	db $9c			;CMD End 
    1430.  00:5ADF  C1                  	db $c1			;Wait 2
    1431.  00:5AE0  33                  	db $33			;Note D#5
    1432.  00:5AE1  91 04               	db $91,$04			;CMD Portamento tone
    1433.  00:5AE3                      					;Wait Repeat 2
    1434.  00:5AE3  2F                  	db $2f			;Note B-4
    1435.  00:5AE4  9C                  	db $9c			;CMD End 
    1436.  00:5AE5                      					;Wait Repeat 2
    1437.  00:5AE5  2C                  	db $2c			;Note G#4
    1438.  00:5AE6  C1                  	db $c1			;Wait 2
    1439.  00:5AE7  BF                  	db $bf			;[End-Of-Track]
    1440.  00:5AE8                      .track_023:
    1441.  00:5AE8  19                  	db $19			;Note C#3
    1442.  00:5AE9  9D 00               	db $9d,$00			;CMD Drum $01
    1443.  00:5AEB  C1                  	db $c1			;Wait 2
    1444.  00:5AEC  19                  	db $19			;Note C#3
    1445.  00:5AED  9D 04               	db $9d,$04			;CMD Drum $03
    1446.  00:5AEF                      					;Wait Repeat 2
    1447.  00:5AEF  60                  	db $60			;Release 96
    1448.  00:5AF0  9D 04               	db $9d,$04			;CMD Drum $03
    1449.  00:5AF2                      					;Wait Repeat 2
    1450.  00:5AF2  9D 06               	db $9d,$06			;CMD Drum $04
    1451.  00:5AF4                      					;Wait Repeat 2
    1452.  00:5AF4  19                  	db $19			;Note C#3
    1453.  00:5AF5  9D 02               	db $9d,$02			;CMD Drum $02
    1454.  00:5AF7                      					;Wait Repeat 2
    1455.  00:5AF7  19                  	db $19			;Note C#3
    1456.  00:5AF8  9D 04               	db $9d,$04			;CMD Drum $03
    1457.  00:5AFA                      					;Wait Repeat 2
    1458.  00:5AFA  60                  	db $60			;Release 96
    1459.  00:5AFB  9D 04               	db $9d,$04			;CMD Drum $03
    1460.  00:5AFD                      					;Wait Repeat 2
    1461.  00:5AFD  9D 06               	db $9d,$06			;CMD Drum $04
    1462.  00:5AFF                      					;Wait Repeat 2
    1463.  00:5AFF  19                  	db $19			;Note C#3
    1464.  00:5B00  9D 00               	db $9d,$00			;CMD Drum $01
    1465.  00:5B02                      					;Wait Repeat 2
    1466.  00:5B02  19                  	db $19			;Note C#3
    1467.  00:5B03  9D 04               	db $9d,$04			;CMD Drum $03
    1468.  00:5B05                      					;Wait Repeat 2
    1469.  00:5B05  60                  	db $60			;Release 96
    1470.  00:5B06  9D 04               	db $9d,$04			;CMD Drum $03
    1471.  00:5B08                      					;Wait Repeat 2
    1472.  00:5B08  9D 06               	db $9d,$06			;CMD Drum $04
    1473.  00:5B0A                      					;Wait Repeat 2
    1474.  00:5B0A  9D 02               	db $9d,$02			;CMD Drum $02
    1475.  00:5B0C                      					;Wait Repeat 2
    1476.  00:5B0C  9D 06               	db $9d,$06			;CMD Drum $04
    1477.  00:5B0E                      					;Wait Repeat 2
    1478.  00:5B0E  19                  	db $19			;Note C#3
    1479.  00:5B0F  9D 00               	db $9d,$00			;CMD Drum $01
    1480.  00:5B11                      					;Wait Repeat 2
    1481.  00:5B11  9D 02               	db $9d,$02			;CMD Drum $02
    1482.  00:5B13                      					;Wait Repeat 2
    1483.  00:5B13  9D 00               	db $9d,$00			;CMD Drum $01
    1484.  00:5B15                      					;Wait Repeat 2
    1485.  00:5B15  60                  	db $60			;Release 96
    1486.  00:5B16  9D 04               	db $9d,$04			;CMD Drum $03
    1487.  00:5B18                      					;Wait Repeat 2
    1488.  00:5B18  19                  	db $19			;Note C#3
    1489.  00:5B19  9D 04               	db $9d,$04			;CMD Drum $03
    1490.  00:5B1B                      					;Wait Repeat 2
    1491.  00:5B1B  60                  	db $60			;Release 96
    1492.  00:5B1C  9D 04               	db $9d,$04			;CMD Drum $03
    1493.  00:5B1E                      					;Wait Repeat 2
    1494.  00:5B1E  19                  	db $19			;Note C#3
    1495.  00:5B1F  9D 02               	db $9d,$02			;CMD Drum $02
    1496.  00:5B21                      					;Wait Repeat 2
    1497.  00:5B21  60                  	db $60			;Release 96
    1498.  00:5B22  9D 04               	db $9d,$04			;CMD Drum $03
    1499.  00:5B24                      					;Wait Repeat 2
    1500.  00:5B24  19                  	db $19			;Note C#3
    1501.  00:5B25  9D 04               	db $9d,$04			;CMD Drum $03
    1502.  00:5B27  C0                  	db $c0			;Wait 1
    1503.  00:5B28  60                  	db $60			;Release 96
    1504.  00:5B29  C0                  	db $c0			;Wait 1
    1505.  00:5B2A  19                  	db $19			;Note C#3
    1506.  00:5B2B  9D 04               	db $9d,$04			;CMD Drum $03
    1507.  00:5B2D  C1                  	db $c1			;Wait 2
    1508.  00:5B2E  9D 00               	db $9d,$00			;CMD Drum $01
    1509.  00:5B30                      					;Wait Repeat 2
    1510.  00:5B30  9D 04               	db $9d,$04			;CMD Drum $03
    1511.  00:5B32  C0                  	db $c0			;Wait 1
    1512.  00:5B33  60                  	db $60			;Release 96
    1513.  00:5B34  C0                  	db $c0			;Wait 1
    1514.  00:5B35  9D 04               	db $9d,$04			;CMD Drum $03
    1515.  00:5B37  C1                  	db $c1			;Wait 2
    1516.  00:5B38  9D 04               	db $9d,$04			;CMD Drum $03
    1517.  00:5B3A                      					;Wait Repeat 2
    1518.  00:5B3A  9D 02               	db $9d,$02			;CMD Drum $02
    1519.  00:5B3C                      					;Wait Repeat 2
    1520.  00:5B3C  9D 04               	db $9d,$04			;CMD Drum $03
    1521.  00:5B3E                      					;Wait Repeat 2
    1522.  00:5B3E  9D 00               	db $9d,$00			;CMD Drum $01
    1523.  00:5B40                      					;Wait Repeat 2
    1524.  00:5B40  9D 02               	db $9d,$02			;CMD Drum $02
    1525.  00:5B42  C1                  	db $c1			;Wait 2
    1526.  00:5B43  BF                  	db $bf			;[End-Of-Track]
    1527.  00:5B44                      .track_024:
    1528.  00:5B44  0C                  	db $0c			;Note C-2
    1529.  00:5B45  71                  	db $71			;Volume 15
    1530.  00:5B46  79                  	db $79			;Instrument 7
    1531.  00:5B47  C1                  	db $c1			;Wait 2
    1532.  00:5B48  0D                  	db $0d			;Note C#2
    1533.  00:5B49  6E                  	db $6e			;Volume 12
    1534.  00:5B4A  7A                  	db $7a			;Instrument 8
    1535.  00:5B4B  C0                  	db $c0			;Wait 1
    1536.  00:5B4C  60                  	db $60			;Release 96
    1537.  00:5B4D  C0                  	db $c0			;Wait 1
    1538.  00:5B4E  0D                  	db $0d			;Note C#2
    1539.  00:5B4F  71                  	db $71			;Volume 15
    1540.  00:5B50  C1                  	db $c1			;Wait 2
    1541.  00:5B51  0D                  	db $0d			;Note C#2
    1542.  00:5B52  70                  	db $70			;Volume 14
    1543.  00:5B53                      					;Wait Repeat 2
    1544.  00:5B53  19                  	db $19			;Note C#3
    1545.  00:5B54  71                  	db $71			;Volume 15
    1546.  00:5B55  77                  	db $77			;Instrument 5
    1547.  00:5B56                      					;Wait Repeat 2
    1548.  00:5B56  0D                  	db $0d			;Note C#2
    1549.  00:5B57  6E                  	db $6e			;Volume 12
    1550.  00:5B58  7A                  	db $7a			;Instrument 8
    1551.  00:5B59  C0                  	db $c0			;Wait 1
    1552.  00:5B5A  60                  	db $60			;Release 96
    1553.  00:5B5B  C0                  	db $c0			;Wait 1
    1554.  00:5B5C  0D                  	db $0d			;Note C#2
    1555.  00:5B5D  71                  	db $71			;Volume 15
    1556.  00:5B5E  C1                  	db $c1			;Wait 2
    1557.  00:5B5F  0D                  	db $0d			;Note C#2
    1558.  00:5B60  70                  	db $70			;Volume 14
    1559.  00:5B61                      					;Wait Repeat 2
    1560.  00:5B61  0C                  	db $0c			;Note C-2
    1561.  00:5B62  71                  	db $71			;Volume 15
    1562.  00:5B63  79                  	db $79			;Instrument 7
    1563.  00:5B64                      					;Wait Repeat 2
    1564.  00:5B64  0D                  	db $0d			;Note C#2
    1565.  00:5B65  6E                  	db $6e			;Volume 12
    1566.  00:5B66  7A                  	db $7a			;Instrument 8
    1567.  00:5B67  C0                  	db $c0			;Wait 1
    1568.  00:5B68  60                  	db $60			;Release 96
    1569.  00:5B69  C0                  	db $c0			;Wait 1
    1570.  00:5B6A  0D                  	db $0d			;Note C#2
    1571.  00:5B6B  71                  	db $71			;Volume 15
    1572.  00:5B6C  C1                  	db $c1			;Wait 2
    1573.  00:5B6D  0D                  	db $0d			;Note C#2
    1574.  00:5B6E  70                  	db $70			;Volume 14
    1575.  00:5B6F                      					;Wait Repeat 2
    1576.  00:5B6F  19                  	db $19			;Note C#3
    1577.  00:5B70  71                  	db $71			;Volume 15
    1578.  00:5B71  77                  	db $77			;Instrument 5
    1579.  00:5B72                      					;Wait Repeat 2
    1580.  00:5B72  0D                  	db $0d			;Note C#2
    1581.  00:5B73  6E                  	db $6e			;Volume 12
    1582.  00:5B74  7A                  	db $7a			;Instrument 8
    1583.  00:5B75  C0                  	db $c0			;Wait 1
    1584.  00:5B76  60                  	db $60			;Release 96
    1585.  00:5B77  C0                  	db $c0			;Wait 1
    1586.  00:5B78  0D                  	db $0d			;Note C#2
    1587.  00:5B79  71                  	db $71			;Volume 15
    1588.  00:5B7A  C1                  	db $c1			;Wait 2
    1589.  00:5B7B  0D                  	db $0d			;Note C#2
    1590.  00:5B7C  70                  	db $70			;Volume 14
    1591.  00:5B7D                      					;Wait Repeat 2
    1592.  00:5B7D  0C                  	db $0c			;Note C-2
    1593.  00:5B7E  71                  	db $71			;Volume 15
    1594.  00:5B7F  79                  	db $79			;Instrument 7
    1595.  00:5B80                      					;Wait Repeat 2
    1596.  00:5B80  10                  	db $10			;Note E-2
    1597.  00:5B81  6E                  	db $6e			;Volume 12
    1598.  00:5B82  7A                  	db $7a			;Instrument 8
    1599.  00:5B83  C0                  	db $c0			;Wait 1
    1600.  00:5B84  60                  	db $60			;Release 96
    1601.  00:5B85  C0                  	db $c0			;Wait 1
    1602.  00:5B86  10                  	db $10			;Note E-2
    1603.  00:5B87  71                  	db $71			;Volume 15
    1604.  00:5B88  C1                  	db $c1			;Wait 2
    1605.  00:5B89  10                  	db $10			;Note E-2
    1606.  00:5B8A  70                  	db $70			;Volume 14
    1607.  00:5B8B                      					;Wait Repeat 2
    1608.  00:5B8B  19                  	db $19			;Note C#3
    1609.  00:5B8C  71                  	db $71			;Volume 15
    1610.  00:5B8D  77                  	db $77			;Instrument 5
    1611.  00:5B8E                      					;Wait Repeat 2
    1612.  00:5B8E  10                  	db $10			;Note E-2
    1613.  00:5B8F  6E                  	db $6e			;Volume 12
    1614.  00:5B90  7A                  	db $7a			;Instrument 8
    1615.  00:5B91  C0                  	db $c0			;Wait 1
    1616.  00:5B92  60                  	db $60			;Release 96
    1617.  00:5B93  C0                  	db $c0			;Wait 1
    1618.  00:5B94  10                  	db $10			;Note E-2
    1619.  00:5B95  71                  	db $71			;Volume 15
    1620.  00:5B96  C1                  	db $c1			;Wait 2
    1621.  00:5B97  10                  	db $10			;Note E-2
    1622.  00:5B98  70                  	db $70			;Volume 14
    1623.  00:5B99                      					;Wait Repeat 2
    1624.  00:5B99  0C                  	db $0c			;Note C-2
    1625.  00:5B9A  71                  	db $71			;Volume 15
    1626.  00:5B9B  79                  	db $79			;Instrument 7
    1627.  00:5B9C                      					;Wait Repeat 2
    1628.  00:5B9C  12                  	db $12			;Note F#2
    1629.  00:5B9D  6E                  	db $6e			;Volume 12
    1630.  00:5B9E  7A                  	db $7a			;Instrument 8
    1631.  00:5B9F  C0                  	db $c0			;Wait 1
    1632.  00:5BA0  60                  	db $60			;Release 96
    1633.  00:5BA1  C0                  	db $c0			;Wait 1
    1634.  00:5BA2  12                  	db $12			;Note F#2
    1635.  00:5BA3  71                  	db $71			;Volume 15
    1636.  00:5BA4  C1                  	db $c1			;Wait 2
    1637.  00:5BA5  12                  	db $12			;Note F#2
    1638.  00:5BA6  70                  	db $70			;Volume 14
    1639.  00:5BA7                      					;Wait Repeat 2
    1640.  00:5BA7  19                  	db $19			;Note C#3
    1641.  00:5BA8  71                  	db $71			;Volume 15
    1642.  00:5BA9  77                  	db $77			;Instrument 5
    1643.  00:5BAA                      					;Wait Repeat 2
    1644.  00:5BAA  19                  	db $19			;Note C#3
    1645.  00:5BAB  71                  	db $71			;Volume 15
    1646.  00:5BAC  C0                  	db $c0			;Wait 1
    1647.  00:5BAD  60                  	db $60			;Release 96
    1648.  00:5BAE  C0                  	db $c0			;Wait 1
    1649.  00:5BAF  19                  	db $19			;Note C#3
    1650.  00:5BB0  71                  	db $71			;Volume 15
    1651.  00:5BB1  C1                  	db $c1			;Wait 2
    1652.  00:5BB2  19                  	db $19			;Note C#3
    1653.  00:5BB3  71                  	db $71			;Volume 15
    1654.  00:5BB4  C1                  	db $c1			;Wait 2
    1655.  00:5BB5  BF                  	db $bf			;[End-Of-Track]
    1656.  00:5BB6                      .track_027:
    1657.  00:5BB6  2D                  	db $2d			;Note A-4
    1658.  00:5BB7  93 01               	db $93,$01			;CMD Portamento down
    1659.  00:5BB9  C1                  	db $c1			;Wait 2
    1660.  00:5BBA  2F                  	db $2f			;Note B-4
    1661.  00:5BBB  9C                  	db $9c			;CMD End 
    1662.  00:5BBC                      					;Wait Repeat 2
    1663.  00:5BBC  95 44               	db $95,$44			;CMD Vibrato
    1664.  00:5BBE                      					;Wait Repeat 2
    1665.  00:5BBE  31                  	db $31			;Note C#5
    1666.  00:5BBF  9C                  	db $9c			;CMD End 
    1667.  00:5BC0  C2                  	db $c2			;Wait 3
    1668.  00:5BC1  95 48               	db $95,$48			;CMD Vibrato
    1669.  00:5BC3                      					;Wait Repeat 3
    1670.  00:5BC3  34                  	db $34			;Note E-5
    1671.  00:5BC4  C1                  	db $c1			;Wait 2
    1672.  00:5BC5  60                  	db $60			;Release 96
    1673.  00:5BC6  C1                  	db $c1			;Wait 2
    1674.  00:5BC7  36                  	db $36			;Note F#5
    1675.  00:5BC8  93 01               	db $93,$01			;CMD Portamento down
    1676.  00:5BCA  C3                  	db $c3			;Wait 4
    1677.  00:5BCB  38                  	db $38			;Note G#5
    1678.  00:5BCC  91 04               	db $91,$04			;CMD Portamento tone
    1679.  00:5BCE  C1                  	db $c1			;Wait 2
    1680.  00:5BCF  36                  	db $36			;Note F#5
    1681.  00:5BD0  9C                  	db $9c			;CMD End 
    1682.  00:5BD1                      					;Wait Repeat 2
    1683.  00:5BD1  60                  	db $60			;Release 96
    1684.  00:5BD2  C5                  	db $c5			;Wait 6
    1685.  00:5BD3  2F                  	db $2f			;Note B-4
    1686.  00:5BD4  93 02               	db $93,$02			;CMD Portamento down
    1687.  00:5BD6  C1                  	db $c1			;Wait 2
    1688.  00:5BD7  31                  	db $31			;Note C#5
    1689.  00:5BD8  9C                  	db $9c			;CMD End 
    1690.  00:5BD9                      					;Wait Repeat 2
    1691.  00:5BD9  95 44               	db $95,$44			;CMD Vibrato
    1692.  00:5BDB                      					;Wait Repeat 2
    1693.  00:5BDB  33                  	db $33			;Note D#5
    1694.  00:5BDC  9C                  	db $9c			;CMD End 
    1695.  00:5BDD                      					;Wait Repeat 2
    1696.  00:5BDD  60                  	db $60			;Release 96
    1697.  00:5BDE                      					;Wait Repeat 2
    1698.  00:5BDE  34                  	db $34			;Note E-5
    1699.  00:5BDF  C2                  	db $c2			;Wait 3
    1700.  00:5BE0  60                  	db $60			;Release 96
    1701.  00:5BE1  C0                  	db $c0			;Wait 1
    1702.  00:5BE2  3B                  	db $3b			;Note B-5
    1703.  00:5BE3  C1                  	db $c1			;Wait 2
    1704.  00:5BE4  36                  	db $36			;Note F#5
    1705.  00:5BE5  C1                  	db $c1			;Wait 2
    1706.  00:5BE6  38                  	db $38			;Note G#5
    1707.  00:5BE7  91 04               	db $91,$04			;CMD Portamento tone
    1708.  00:5BE9  C3                  	db $c3			;Wait 4
    1709.  00:5BEA  95 44               	db $95,$44			;CMD Vibrato
    1710.  00:5BEC  C5                  	db $c5			;Wait 6
    1711.  00:5BED  95 48               	db $95,$48			;CMD Vibrato
    1712.  00:5BEF  C1                  	db $c1			;Wait 2
    1713.  00:5BF0  96 06               	db $96,$06			;CMD Portamento up
    1714.  00:5BF2                      					;Wait Repeat 2
    1715.  00:5BF2  60                  	db $60			;Release 96
    1716.  00:5BF3  C1                  	db $c1			;Wait 2
    1717.  00:5BF4  BF                  	db $bf			;[End-Of-Track]
    1718.  00:5BF5                      .track_028:
    1719.  00:5BF5  C1                  	db $c1			;Wait 2
    1720.  00:5BF6  2D                  	db $2d			;Note A-4
    1721.  00:5BF7  93 01               	db $93,$01			;CMD Portamento down
    1722.  00:5BF9                      					;Wait Repeat 2
    1723.  00:5BF9  2F                  	db $2f			;Note B-4
    1724.  00:5BFA  9C                  	db $9c			;CMD End 
    1725.  00:5BFB                      					;Wait Repeat 2
    1726.  00:5BFB  95 44               	db $95,$44			;CMD Vibrato
    1727.  00:5BFD                      					;Wait Repeat 2
    1728.  00:5BFD  31                  	db $31			;Note C#5
    1729.  00:5BFE  9C                  	db $9c			;CMD End 
    1730.  00:5BFF  C2                  	db $c2			;Wait 3
    1731.  00:5C00  95 48               	db $95,$48			;CMD Vibrato
    1732.  00:5C02                      					;Wait Repeat 3
    1733.  00:5C02  34                  	db $34			;Note E-5
    1734.  00:5C03  C1                  	db $c1			;Wait 2
    1735.  00:5C04  60                  	db $60			;Release 96
    1736.  00:5C05  C1                  	db $c1			;Wait 2
    1737.  00:5C06  36                  	db $36			;Note F#5
    1738.  00:5C07  93 01               	db $93,$01			;CMD Portamento down
    1739.  00:5C09  C3                  	db $c3			;Wait 4
    1740.  00:5C0A  38                  	db $38			;Note G#5
    1741.  00:5C0B  91 04               	db $91,$04			;CMD Portamento tone
    1742.  00:5C0D  C1                  	db $c1			;Wait 2
    1743.  00:5C0E  36                  	db $36			;Note F#5
    1744.  00:5C0F  9C                  	db $9c			;CMD End 
    1745.  00:5C10                      					;Wait Repeat 2
    1746.  00:5C10  60                  	db $60			;Release 96
    1747.  00:5C11  C5                  	db $c5			;Wait 6
    1748.  00:5C12  2F                  	db $2f			;Note B-4
    1749.  00:5C13  93 02               	db $93,$02			;CMD Portamento down
    1750.  00:5C15  C1                  	db $c1			;Wait 2
    1751.  00:5C16  31                  	db $31			;Note C#5
    1752.  00:5C17  9C                  	db $9c			;CMD End 
    1753.  00:5C18                      					;Wait Repeat 2
    1754.  00:5C18  95 44               	db $95,$44			;CMD Vibrato
    1755.  00:5C1A                      					;Wait Repeat 2
    1756.  00:5C1A  33                  	db $33			;Note D#5
    1757.  00:5C1B  9C                  	db $9c			;CMD End 
    1758.  00:5C1C                      					;Wait Repeat 2
    1759.  00:5C1C  60                  	db $60			;Release 96
    1760.  00:5C1D                      					;Wait Repeat 2
    1761.  00:5C1D  34                  	db $34			;Note E-5
    1762.  00:5C1E  C2                  	db $c2			;Wait 3
    1763.  00:5C1F  60                  	db $60			;Release 96
    1764.  00:5C20  C0                  	db $c0			;Wait 1
    1765.  00:5C21  3B                  	db $3b			;Note B-5
    1766.  00:5C22  C1                  	db $c1			;Wait 2
    1767.  00:5C23  36                  	db $36			;Note F#5
    1768.  00:5C24  C1                  	db $c1			;Wait 2
    1769.  00:5C25  38                  	db $38			;Note G#5
    1770.  00:5C26  91 04               	db $91,$04			;CMD Portamento tone
    1771.  00:5C28  C3                  	db $c3			;Wait 4
    1772.  00:5C29  95 44               	db $95,$44			;CMD Vibrato
    1773.  00:5C2B  C5                  	db $c5			;Wait 6
    1774.  00:5C2C  95 48               	db $95,$48			;CMD Vibrato
    1775.  00:5C2E  C1                  	db $c1			;Wait 2
    1776.  00:5C2F  96 06               	db $96,$06			;CMD Portamento up
    1777.  00:5C31  C1                  	db $c1			;Wait 2
    1778.  00:5C32  BF                  	db $bf			;[End-Of-Track]
    1779.  00:5C33                      .track_031:
    1780.  00:5C33  19                  	db $19			;Note C#3
    1781.  00:5C34  70                  	db $70			;Volume 14
    1782.  00:5C35  75                  	db $75			;Instrument 3
    1783.  00:5C36  9D 00               	db $9d,$00			;CMD Drum $01
    1784.  00:5C38  C1                  	db $c1			;Wait 2
    1785.  00:5C39  19                  	db $19			;Note C#3
    1786.  00:5C3A  9D 04               	db $9d,$04			;CMD Drum $03
    1787.  00:5C3C                      					;Wait Repeat 2
    1788.  00:5C3C  60                  	db $60			;Release 96
    1789.  00:5C3D  9D 04               	db $9d,$04			;CMD Drum $03
    1790.  00:5C3F                      					;Wait Repeat 2
    1791.  00:5C3F  9D 06               	db $9d,$06			;CMD Drum $04
    1792.  00:5C41                      					;Wait Repeat 2
    1793.  00:5C41  19                  	db $19			;Note C#3
    1794.  00:5C42  9D 02               	db $9d,$02			;CMD Drum $02
    1795.  00:5C44                      					;Wait Repeat 2
    1796.  00:5C44  19                  	db $19			;Note C#3
    1797.  00:5C45  9D 04               	db $9d,$04			;CMD Drum $03
    1798.  00:5C47                      					;Wait Repeat 2
    1799.  00:5C47  60                  	db $60			;Release 96
    1800.  00:5C48  9D 04               	db $9d,$04			;CMD Drum $03
    1801.  00:5C4A                      					;Wait Repeat 2
    1802.  00:5C4A  9D 06               	db $9d,$06			;CMD Drum $04
    1803.  00:5C4C                      					;Wait Repeat 2
    1804.  00:5C4C  19                  	db $19			;Note C#3
    1805.  00:5C4D  9D 00               	db $9d,$00			;CMD Drum $01
    1806.  00:5C4F                      					;Wait Repeat 2
    1807.  00:5C4F  19                  	db $19			;Note C#3
    1808.  00:5C50  9D 04               	db $9d,$04			;CMD Drum $03
    1809.  00:5C52                      					;Wait Repeat 2
    1810.  00:5C52  60                  	db $60			;Release 96
    1811.  00:5C53  9D 04               	db $9d,$04			;CMD Drum $03
    1812.  00:5C55                      					;Wait Repeat 2
    1813.  00:5C55  9D 06               	db $9d,$06			;CMD Drum $04
    1814.  00:5C57                      					;Wait Repeat 2
    1815.  00:5C57  9D 02               	db $9d,$02			;CMD Drum $02
    1816.  00:5C59                      					;Wait Repeat 2
    1817.  00:5C59  9D 06               	db $9d,$06			;CMD Drum $04
    1818.  00:5C5B                      					;Wait Repeat 2
    1819.  00:5C5B  1C                  	db $1c			;Note E-3
    1820.  00:5C5C  9D 00               	db $9d,$00			;CMD Drum $01
    1821.  00:5C5E                      					;Wait Repeat 2
    1822.  00:5C5E  9D 02               	db $9d,$02			;CMD Drum $02
    1823.  00:5C60                      					;Wait Repeat 2
    1824.  00:5C60  9D 00               	db $9d,$00			;CMD Drum $01
    1825.  00:5C62                      					;Wait Repeat 2
    1826.  00:5C62  60                  	db $60			;Release 96
    1827.  00:5C63  9D 04               	db $9d,$04			;CMD Drum $03
    1828.  00:5C65                      					;Wait Repeat 2
    1829.  00:5C65  1C                  	db $1c			;Note E-3
    1830.  00:5C66  9D 04               	db $9d,$04			;CMD Drum $03
    1831.  00:5C68                      					;Wait Repeat 2
    1832.  00:5C68  60                  	db $60			;Release 96
    1833.  00:5C69  9D 04               	db $9d,$04			;CMD Drum $03
    1834.  00:5C6B                      					;Wait Repeat 2
    1835.  00:5C6B  1C                  	db $1c			;Note E-3
    1836.  00:5C6C  9D 02               	db $9d,$02			;CMD Drum $02
    1837.  00:5C6E                      					;Wait Repeat 2
    1838.  00:5C6E  60                  	db $60			;Release 96
    1839.  00:5C6F  9D 04               	db $9d,$04			;CMD Drum $03
    1840.  00:5C71                      					;Wait Repeat 2
    1841.  00:5C71  1C                  	db $1c			;Note E-3
    1842.  00:5C72  9D 04               	db $9d,$04			;CMD Drum $03
    1843.  00:5C74  C0                  	db $c0			;Wait 1
    1844.  00:5C75  60                  	db $60			;Release 96
    1845.  00:5C76  C0                  	db $c0			;Wait 1
    1846.  00:5C77  1E                  	db $1e			;Note F#3
    1847.  00:5C78  9D 04               	db $9d,$04			;CMD Drum $03
    1848.  00:5C7A  C1                  	db $c1			;Wait 2
    1849.  00:5C7B  9D 00               	db $9d,$00			;CMD Drum $01
    1850.  00:5C7D                      					;Wait Repeat 2
    1851.  00:5C7D  60                  	db $60			;Release 96
    1852.  00:5C7E  9D 04               	db $9d,$04			;CMD Drum $03
    1853.  00:5C80                      					;Wait Repeat 2
    1854.  00:5C80  1E                  	db $1e			;Note F#3
    1855.  00:5C81  9D 04               	db $9d,$04			;CMD Drum $03
    1856.  00:5C83                      					;Wait Repeat 2
    1857.  00:5C83  60                  	db $60			;Release 96
    1858.  00:5C84  9D 04               	db $9d,$04			;CMD Drum $03
    1859.  00:5C86                      					;Wait Repeat 2
    1860.  00:5C86  17                  	db $17			;Note B-2
    1861.  00:5C87  9D 02               	db $9d,$02			;CMD Drum $02
    1862.  00:5C89                      					;Wait Repeat 2
    1863.  00:5C89  9D 02               	db $9d,$02			;CMD Drum $02
    1864.  00:5C8B  C0                  	db $c0			;Wait 1
    1865.  00:5C8C  60                  	db $60			;Release 96
    1866.  00:5C8D  C0                  	db $c0			;Wait 1
    1867.  00:5C8E  17                  	db $17			;Note B-2
    1868.  00:5C8F  9D 02               	db $9d,$02			;CMD Drum $02
    1869.  00:5C91  C1                  	db $c1			;Wait 2
    1870.  00:5C92  9D 02               	db $9d,$02			;CMD Drum $02
    1871.  00:5C94  C0                  	db $c0			;Wait 1
    1872.  00:5C95  60                  	db $60			;Release 96
    1873.  00:5C96  BF                  	db $bf			;[End-Of-Track]
    1874.  00:5C97                      
      88   00:5C97                      
      89   00:5C97                      
      90   00:5C97  (C000)              	map	0xc000
      91   00:5C97                      	include	"..\code\ttreplayFMRAM.asm"
       1.  00:5C97                      ;================================
       2.  00:5C97                      ; The new replayer.
       3.  00:5C97                      ;
       4.  00:5C97                      ; Persistent RAM unswappable
       5.  00:5C97                      ;
       6.  00:5C97                      ;================================
       7.  00:5C97                      
       8.  00:5C97  (00:FFFFFFEF)       TRACK_Instrument		      equ 0-17
       9.  00:5C97  (00:FFFFFFF0)       TRACK_Command			equ 1-17
      10.  00:5C97  (00:FFFFFFF1)       TRACK_MacroPointer		equ 2-17
      11.  00:5C97  (00:FFFFFFF3)       TRACK_MacroStart		      equ 4-17
      12.  00:5C97  (00:FFFFFFF5)       TRACK_MacroRestart 		equ 6-17		; no longer needed
      13.  00:5C97  (00:FFFFFFF6)       TRACK_Note				equ 7-17
      14.  00:5C97  (00:FFFFFFF7)       TRACK_Volume			equ 8-17
      15.  00:5C97  (00:FFFFFFF8)       TRACK_Voice				equ 9-17
      16.  00:5C97  (00:FFFFFFF9)       TRACK_Flags				equ 10-17
      17.  00:5C97                      	; 0 = note trigger
      18.  00:5C97                      	; 1 = note active
      19.  00:5C97                      	; 2 = envelope trigger
      20.  00:5C97                      	; 3 = command trigger      
      21.  00:5C97                      	; 4 = Key on 		;-< for FM
      22.  00:5C97                      	; 5 = Sustain           ;-< for FM
      23.  00:5C97                      	; 6 = FM voice trigger
      24.  00:5C97                      	; 7 = PSG/FM
      25.  00:5C97  (00:FFFFFFFA)       TRACK_empty				equ 11-17		; needed for pushing 0 at note start
      26.  00:5C97  (00:FFFFFFFB)       TRACK_ToneAdd			equ 12-17		; reset after note set
      27.  00:5C97  (00:FFFFFFFD)       TRACK_VolumeAdd			equ 14-17		; reset after note set
      28.  00:5C97  (00:FFFFFFFE)       TRACK_Noise				equ 15-17	;[OBSOLETE]	; reset after note set
      29.  00:5C97  (00:FFFFFFFF)       TRACK_cmd_VolumeAdd		equ 16-17		; reset after note set
      30.  00:5C97  (00:0000)           TRACK_cmd_ToneSlideAdd		equ 17-17		; reset after note set
      31.  00:5C97  (00:0002)           TRACK_cmd_ToneAdd			equ 19-17		; reset after note set
      32.  00:5C97                      
      33.  00:5C97  (00:0004)           TRACK_cmd_detune			equ 21-17
      34.  00:5C97  (00:0006)           TRACK_cmd_0				equ 23-17
      35.  00:5C97  (00:0007)           TRACK_cmd_1				equ 24-17
      36.  00:5C97  (00:0008)           TRACK_cmd_2				equ 25-17
      37.  00:5C97  (00:0009)           TRACK_cmd_3				equ 26-17
      38.  00:5C97  (00:000A)           TRACK_cmd_4_depth			equ 27-17
      39.  00:5C97  (00:000C)           TRACK_cmd_4_step			equ 29-17
      40.  00:5C97  (00:000D)           TRACK_cmd_NoteAdd			equ 30-17		;x reset after note set
      41.  00:5C97  (00:000E)           TRACK_cmd_A				equ 31-17		
      42.  00:5C97  (00:000F)           TRACK_cmd_B				equ 32-17		
      43.  00:5C97  (00:0010)           TRACK_cmd_E				equ 33-17
      44.  00:5C97  (00:0011)           TRACK_Timer				equ 34-17		; used for timing by all cmd's
      45.  00:5C97  (00:0012)           TRACK_Step				equ 35-17		; only for VIBRATO???
      46.  00:5C97  (00:0013)           TRACK_Delay				equ 36-17		; rows to wait till next data
      47.  00:5C97  (00:0014)           TRACK_prevDelay			equ 37-17
      48.  00:5C97  (00:0015)           TRACK_cmd_A_add			equ 38-17		;<< Still in use???
      49.  00:5C97                      
      50.  00:5C97  (00:0027)           TRACK_REC_SIZE			equ 39
      51.  00:5C97                      
      52.  00:5C97                      
      53.  00:5C97  (00:0000)           B_TRGNOT				equ 0			; note trigger
      54.  00:5C97  (00:0001)           B_ACTNOT				equ 1			; note active
      55.  00:5C97  (00:0002)           B_TRGENV				equ 2			; envelope trigger
      56.  00:5C97  (00:0003)           B_TRGCMD				equ 3			; command active
      57.  00:5C97  (00:0004)           B_KEYON				equ 4			; for fm note trigger
      58.  00:5C97  (00:0005)           B_SUST				equ 5			; for fm note sustain
      59.  00:5C97  (00:0006)           B_TRGVOI				equ 6			; custom voice trigger	
      60.  00:5C97  (00:0007)           B_PSGFM				equ 7			; chip type (PSG or FM)	
      61.  00:5C97                      
      62.  00:5C97                      
      63.  00:5C97  (00:C000)           _SP_Storage				#2			; to store the SP
      64.  00:5C97                      
      65.  00:5C97  (00:C002)           replay_trigger			#1			; trigger byte.
      66.  00:5C97  (00:C003)           replay_mainPSGvol		      #2			; volume mixer for PSG FM balance
      67.  00:5C97  (00:C005)           replay_mainFMvol		      #2			; volume mixer for PSG FM balance
      68.  00:5C97                      
      69.  00:5C97                      ; Do not move these
      70.  00:5C97  (00:C007)           replay_voicebase:		      #2			; pointer to custom voice data
      71.  00:5C97  (00:C009)           replay_drumbase:		      #2			; pointer to drum macro data
      72.  00:5C97  (00:C00B)           replay_insbase:			#2			; pointer to instrument data
      73.  00:5C97  (00:C00D)           TRACK_pointer1			#2
      74.  00:5C97  (00:C00F)           TRACK_pointer2			#2
      75.  00:5C97  (00:C011)           TRACK_pointer3			#2
      76.  00:5C97  (00:C013)           TRACK_pointer4			#2
      77.  00:5C97  (00:C015)           TRACK_pointer5			#2
      78.  00:5C97  (00:C017)           TRACK_pointer6			#2
      79.  00:5C97  (00:C019)           TRACK_pointer7			#2
      80.  00:5C97  (00:C01B)           TRACK_pointer8			#2
      81.  00:5C97                      ; / Do not move above
      82.  00:5C97                      
      83.  00:5C97                      
      84.  00:5C97  (00:C01D)           replay_orderpointer:	      #2			; pointer to the order track list pointers
      85.  00:5C97  (00:C01F)           replay_speed 			#1			; speed to replay (get from song)
      86.  00:5C97  (00:C020)           replay_speed_subtimer 	      #1			; counter for finer speed
      87.  00:5C97  (00:C021)           replay_speed_timer 		#1 			; counter for speed
      88.  00:5C97  (00:C022)           replay_mode 			#1			; Replayer status
      89.  00:5C97                      ; mode 0  = no sound output
      90.  00:5C97                      ; mode 1  = replay song 
      91.  00:5C97  (00:C023)           replay_chan_setup		      #1			; 0 = 2 psg+ 6 fm, 1 = 3psg + 5 fm
      92.  00:5C97  (00:C024)           replay_arp_speed		      #1			; arpeggio speed ( 0 = fast, $f = slowest)
      93.  00:5C97  (00:C025)           replay_fade				#1			; Fade active (value = fade speed)
      94.  00:5C97  (00:C026)           replay_fade_timer		      #1			; Timer for fade
      95.  00:5C97  (00:C027)           replay_fade_vol			#1			; fade volume to lower the channel volume.
      96.  00:5C97                      
      97.  00:5C97  (00:C028)           replay_previous_note	      #1			; previous note played
      98.  00:5C97  (00:C029)           replay_mainvol			#2			; the volume correction.
      99.  00:5C97                      
     100.  00:5C97  (00:C02B)           replay_softvoice			#1	            ; Software voice active
     101.  00:5C97  (00:C02C)           FM_softvoice_req			#1	            ; Software voice requested
     102.  00:5C97  (00:C02D)           replay_tonetable		      #2			; Current tonetable to read from
     103.  00:5C97                      
     104.  00:5C97  (00:C02F)           r800:					#1	            ; CPU mode
     105.  00:5C97  (00:C030)           count_low:				#1	            ; R800 timer
     106.  00:5C97                      
     107.  00:5C97  (00:C031)           equalization_freq:		#1	            ; vdp type for correct playback on 60hz 0=50Hx, >0=60Hz
     108.  00:5C97  (00:C032)           equalization_cnt:		      #1	            ; counter for correct playback on 60hz
     109.  00:5C97                      
     110.  00:5C97                      
     111.  00:5C97  (00:C033)           TRACK_Chan1				#TRACK_REC_SIZE
     112.  00:5C97  (00:C05A)           TRACK_Chan2				#TRACK_REC_SIZE
     113.  00:5C97  (00:C081)           TRACK_Chan3				#TRACK_REC_SIZE
     114.  00:5C97  (00:C0A8)           TRACK_Chan4				#TRACK_REC_SIZE
     115.  00:5C97  (00:C0CF)           TRACK_Chan5				#TRACK_REC_SIZE
     116.  00:5C97  (00:C0F6)           TRACK_Chan6				#TRACK_REC_SIZE
     117.  00:5C97  (00:C11D)           TRACK_Chan7				#TRACK_REC_SIZE
     118.  00:5C97  (00:C144)           TRACK_Chan8				#TRACK_REC_SIZE
     119.  00:5C97                      
     120.  00:5C97                      
     121.  00:5C97  (00:C16B)           REGISTERS_START		#0
     122.  00:5C97                      IFDEF SFXPLAY_ENABLED
     123.  00:5C97                    ~ 
     124.  00:5C97                    ~ ;--- AY SPECIFIC
     125.  00:5C97                    ~ PSG_registers		#0 
     126.  00:5C97                    ~ PSG_regToneA 		#2	; Tone A freq low (8bit)
     127.  00:5C97                    ~ 					; Tone A freq high (4bit)
     128.  00:5C97                    ~ PSG_regToneB 		#2	; Tone B freq low
     129.  00:5C97                    ~ 					; Tone B freq high
     130.  00:5C97                    ~ PSG_regToneC 		#2	; Tone C freq low
     131.  00:5C97                    ~ 					; Tone C freq high
     132.  00:5C97                    ~ PSG_regNOISE 		#1	; Noise freq (5bit)
     133.  00:5C97                    ~ PSG_regMIXER 		#1	; Mixer control (1 = off, 0 = on)
     134.  00:5C97                    ~ PSG_regVOLA 		#1	; Chan A volume
     135.  00:5C97                    ~ PSG_regVOLB 		#1	; Chan B volume
     136.  00:5C97                    ~ PSG_regVOLC  		#1	; Chan C volume
     137.  00:5C97                    ~ PSG_regEnvL 		#1	; Volume Env Freq low (8bit)	
     138.  00:5C97                    ~ PSG_regEnvH 		#1	; Volume Env Freq high (4bit)
     139.  00:5C97                    ~ PSG_regEnvShape 		#1	; Volume Env Shape (4bit)
     140.  00:5C97                    ~ replay_noise		#1 ; replayer_noise
     141.  00:5C97                    ~ 
     142.  00:5C97                    ~ ELSE
     143.  00:5C97                      
     144.  00:5C97                      ;--- AY SPECIFIC
     145.  00:5C97  (00:C16B)           PSG_registers		#0 
     146.  00:5C97  (00:C16B)           PSG_regToneA 		#2	; Tone A freq low (8bit)
     147.  00:5C97                      					; Tone A freq high (4bit)
     148.  00:5C97  (00:C16D)           PSG_regToneB 		#2	; Tone B freq low
     149.  00:5C97                      					; Tone B freq high
     150.  00:5C97  (00:C16F)           PSG_regToneC 		#2	; Tone C freq low
     151.  00:5C97                      					; Tone C freq high
     152.  00:5C97  (00:C171)           replay_noise		#0
     153.  00:5C97  (00:C171)           PSG_regNOISE 		#1	; Noise freq (5bit)
     154.  00:5C97  (00:C172)           PSG_regMIXER 		#1	;0x38	;x3f	; Mixer control (1 = off, 0 = on)
     155.  00:5C97  (00:C173)           PSG_regVOLA 		#1	; Chan A volume
     156.  00:5C97  (00:C174)           PSG_regVOLB 		#1	; Chan B volume
     157.  00:5C97  (00:C175)           PSG_regVOLC  		#1	; Chan C volume
     158.  00:5C97  (00:C176)           PSG_regEnvL 		#1	; Volume Env Freq low (8bit)	
     159.  00:5C97  (00:C177)           PSG_regEnvH 		#1	; Volume Env Freq high (4bit)
     160.  00:5C97  (00:C178)           PSG_regEnvShape 		#1	; Volume Env Shape (4bit)
     161.  00:5C97                      
     162.  00:5C97                      ENDIF
     163.  00:5C97                      
     164.  00:5C97                      ;--- FM SPECIFIC
     165.  00:5C97  (00:C179)           FM_Voicereg:	#16	; software voice + old values
     166.  00:5C97                      
     167.  00:5C97  (00:C189)           FM_Registers: 	#0	; contains the registers values to write and value previously written
     168.  00:5C97  (00:C189)           FM_regToneA 	#2	; Tone A freq low (8bit)			; Tone A freq high (1bit)
     169.  00:5C97  (00:C18B)           FM_regToneAb 	#2	; Tone A freq low (8bit)			; Tone A freq high (1bit)
     170.  00:5C97  (00:C18D)           FM_regVOLA		#1	; Chan A volume
     171.  00:5C97  (00:C18E)           FM_regVOLAb		#1	; Chan A volume
     172.  00:5C97  (00:C18F)           FM_regToneB 	#2	; Tone B freq low					; Tone B freq high
     173.  00:5C97  (00:C191)           FM_regToneBb 	#2	; Tone B freq low					; Tone B freq high
     174.  00:5C97  (00:C193)           FM_regVOLB		#1	; Chan B volume
     175.  00:5C97  (00:C194)           FM_regVOLBb		#1	; Chan B volume
     176.  00:5C97  (00:C195)           FM_regToneC 	#2	; Tone C freq low					; Tone C freq high
     177.  00:5C97  (00:C197)           FM_regToneCb 	#2	; Tone C freq low					; Tone C freq high
     178.  00:5C97  (00:C199)           FM_regVOLC	 	#1	; Chan C volume
     179.  00:5C97  (00:C19A)           FM_regVOLCb	 	#1	; Chan C volume
     180.  00:5C97  (00:C19B)           FM_regToneD 	#2	; Tone D freq low					; Tone D freq high
     181.  00:5C97  (00:C19D)           FM_regToneDb 	#2	; Tone D freq low					; Tone D freq high
     182.  00:5C97  (00:C19F)           FM_regVOLD		#1	; Chan D volume
     183.  00:5C97  (00:C1A0)           FM_regVOLDb		#1	; Chan D volume
     184.  00:5C97  (00:C1A1)           FM_regToneE 	#2	; Tone E freq low					; Tone E freq high
     185.  00:5C97  (00:C1A3)           FM_regToneEb 	#2	; Tone E freq low					; Tone E freq high
     186.  00:5C97  (00:C1A5)           FM_regVOLE	  	#1	; Chan E volume
     187.  00:5C97  (00:C1A6)           FM_regVOLEb	  	#1	; Chan E volume
     188.  00:5C97  (00:C1A7)           FM_regToneF 	#2	; Tone F freq low					; Tone F freq high
     189.  00:5C97  (00:C1A9)           FM_regToneFb 	#2	; Tone F freq low					; Tone F freq high
     190.  00:5C97  (00:C1AB)           FM_regVOLF	  	#1	; Chan F volume
     191.  00:5C97  (00:C1AC)           FM_regVOLFb	  	#1	; Chan F volume
     192.  00:5C97                      
     193.  00:5C97  (00:C1AD)           DRUM_regToneBD	#2
     194.  00:5C97  (00:C1AF)           DRUM_regToneBDb	#2
     195.  00:5C97  (00:C1B1)           DRUM_regVolBD	#1
     196.  00:5C97  (00:C1B2)           DRUM_regVolBDb	#1
     197.  00:5C97  (00:C1B3)           DRUM_regToneSH	#2
     198.  00:5C97  (00:C1B5)           DRUM_regToneSHb	#2
     199.  00:5C97  (00:C1B7)           DRUM_regVolSH	#1
     200.  00:5C97  (00:C1B8)           DRUM_regVolSHb	#1
     201.  00:5C97  (00:C1B9)           DRUM_regToneCT	#2
     202.  00:5C97  (00:C1BB)           DRUM_regToneCTb	#2
     203.  00:5C97  (00:C1BD)           DRUM_regVolCT	#1
     204.  00:5C97  (00:C1BE)           DRUM_regVolCTb	#1
     205.  00:5C97  (00:C1BF)           FM_DRUM		#1	; Percussion bits
     206.  00:5C97  (00:C1C0)           FM_DRUMb		#1
     207.  00:5C97                      
     208.  00:5C97  (00:C1C1)           FM_DRUM_ACTIVE		#1	; Is a drum active?
     209.  00:5C97  (00:C1C2)           FM_DRUM_MACRO		#2	; Pointer to drum macro data
     210.  00:5C97                      
     211.  00:5C97  (00:C1C4)           FM_regMIXER 		#1	; Mixer control (1 = off, 0 = on)
     212.  00:5C97                      
     213.  00:5C97  (00:C1C5)           REGISTERS_END		#0
     214.  00:5C97                      

    LABELS
-------------------------------------------------
00:00004010   initmain
00:00004056   infinite
00:0000405A   isr
00:0000000C   RDSLT
00:00000014   WRSLT
00:0000FCC1   EXPTBL
00:00004018   MSXMusic_ID_ADDRESS
00:00007FF6   MSXMusic_ENABLE_ADDRESS
00:00004063   MSXMusic_Detect
00:00004075   MSXMusic_MatchInternalID
00:00004081   MSXMusic_MatchExternalID
00:000040A4   Memory_SearchSlots
00:000040A6   Memory_SearchSlots_PrimaryLoop
00:000040B3   Memory_SearchSlots_SecondaryLoop
00:000040BD X Memory_SearchSlots_Continue
00:000040C7   Memory_SearchSlots_NextPrimary
00:000040CE   Memory_SearchSlots_Found
00:000040D1   Memory_SearchSlots_JumpHL
00:000040D2   Memory_MatchSlotString
00:000040E9   Memory_MatchSlotString_Found
00:000040EC   Memory_MatchSlotString_NotFound
00:000040EF   MSXMusic_internalId
00:000040F7   MSXMusic_externalId
00:0000007C   FM_WRITE
00:0000007D   FM_DATA
00:000000A0   PSG_WRITE
00:000000A1   PSG_DATA
00:00000060   _REL
00:00000061   _SUS
00:00000062   _VOL
00:00000072   _INS
00:00000091   _CMD
00:000000B8 X _SPC
00:000000BF   _EOT
00:000000C0   _WAIT
00:00004100   MACROACTIONLIST
00:0000413B   PROCESS_CMDLIST
00:0000416A   DECODE_CMDLIST
00:000041C5   DRUM_MACRO_LIST
00:00004200   TRACK_Vibrato_sine
00:00004300   TRACK_Vibrato_sine_extended
00:00004380   _Default_Registers
00:000043B4 X _DRUM_Default
00:000043C8   replay_init
00:000043F4   replay_init.z80
00:000043F8   replay_init.init
00:00004424   replay_pause
00:00004451   _r_pause_loop
00:00004456 X replay_resume
00:0000445C X replay_fade_out
00:00004467   replay_set_FM_balance
00:00004474   replay_set_PSG_balance
00:00004481   _getnewbalancebase
00:0000448A   replay_equalization_on
00:0000449C   replay_equalization_off
00:000044A6   replay_loadsong
00:00004558   replay_play_no
00:0000456B   replay_play
00:00004578 X replay_play.NTSC
00:000045A9   replay_play.PAL
00:000045BC   replay_play.skip_EOT
00:000045D3 X decode_data
00:000045D9 X decode_data.decode1
00:000045FA   decode_data.decode2
00:0000461B   decode_data.setupcheck
00:00004622 X decode_data.decode3_26chan
00:00004643   decode_data.decode3_end
00:0000464C   decode_data.decode3_35chan
00:00004673   decode_data.decode4
00:00004694   decode_data.decode5
00:000046B5   decode_data.decode6
00:000046D6   decode_data.decode7
00:000046F7   decode_data.decode8
00:00004718   decode_data.decode_end
00:0000472A   decode_data.skip
00:00004730   decode_data.loop
00:00004735   process_data
00:0000475F   process_data.skipa
00:00004776   process_data.skipb
00:00004783 X _rdd_3psg_5fm
00:00004794   _rdd_3psg_5fm.skipc
00:000047B9   _rdd_2psg_6fm
00:000047E4   _rdd_2psg_6fm.skipc
00:000047F1   _rdd_cont
00:00004802   _rdd_cont.skipd
00:00004820   _rdd_cont.skipe
00:0000483E   _rdd_cont.skipf
00:0000485C   _rdd_cont.skipg
00:0000487A   _rdd_cont.skiph
00:0000488A X process_fade
00:000048A6   process_fade.cont_fadeing
00:000048AC   process_fade.no_new_step
00:000048C0   process_fade.calc_vol_FM
00:000048CB   process_fade.no_limit_FM
00:000048DC   process_fade.calc_vol
00:000048E2   process_fade.no_carry
00:000048E7   _replay_check_patternend
00:00004908   _replay_check_patternend.restart
00:00004908   _replay_check_patternend.no_restart
00:00004914   decode_data_chan
00:00004925   _rdn2
00:0000492A   _rdv2
00:0000492F   _rdi2
00:00004937   _rdn
00:0000493F   _rdi
00:00004947   _rdv
00:0000494F   _rdc
00:00004950   _rdc_noinc
00:00004959   _rd_delay
00:00004962   _rd_eot
00:00004969   _replay_decode_delay
00:00004975   _replay_decode_trigger_porttone_check
00:0000498D   _replay_decode_note
00:00004999   _replay_decode_release
00:000049A4   _replay_decode_sustain
00:000049AD   _replay_decode_ins
00:000049C2   _replay_decode_ins.skip
00:000049DC   _replay_decode_ins.skip_soft_update
00:000049DD   _replay_decode_ins.skip_soft
00:000049EC   _replay_decode_ins.skip_ins
00:000049F1   _replay_decode_vol
00:00004A06   _replaydecode_cmd
00:00004A13   decode_cmd0_arpeggio
00:00004A26   decode_cmd1_port_up
00:00004A31   decode_cmd2_port_down
00:00004A3C   decode_cmd3_port_tone
00:00004A59   decode_cmd3_port_tone_new_note
00:00004A6A   decode_cmd3_port_tone_new_note.skip
00:00004A82   decode_cmd3_port_tone_new_note.skip2
00:00004A97   decode_cmd3_port_tone_new_note.skip3
00:00004A9C   decode_cmd8_tremolo
00:00004A9C   decode_cmd4_vibrato
00:00004AAD   decode_cmd4_vibrato.depth
00:00004ABF   decode_cmd4_vibrato.skip_extended
00:00004AC5   decode_cmd4_vibrato.end
00:00004ACA   decode_cmd5_vibrato_port_tone
00:00004AE1   decode_cmd6_vibrato_vol
00:00004AE1   decode_cmd7_vol_slide
00:00004AF1   decode_cmd9_note_cut
00:00004AFC   decode_cmd10_note_delay
00:00004B1A   decode_cmd11_command_end
00:00004B1F   decode_cmd12_drum
00:00004B36   decode_cmd13_arp_speed
00:00004B3C   decode_cmd14_fine_up
00:00004B46   decode_cmd15_fine_down
00:00004B50   decode_cmd16_notelink
00:00004B57   decode_cmd17_track_detune
00:00004B6C   decode_cmd17_track_detune.pos
00:00004B76   decode_cmd18_trigger
00:00004B7C   decode_cmd19_speed
00:00004B8C   decode_cmd20_envelope_high
00:00004B92   decode_cmd21_envelope_low
00:00004B98   decode_cmd22_brightness
00:00004BB0   process_data_chan
00:00004BC9   process_commandEND
00:00004BC9   process_note
00:00004BCE X process_triggerNote
00:00004BF8   process_noNoteTrigger
00:00004BFB   process_instrument
00:00004C0B   process_macro
00:00004C10   macro_mixer
00:00004C1D   macro_tone_add
00:00004C30   macro_noise_base
00:00004C3B X macro_noise_sub
00:00004C3B   macro_noise_add
00:00004C49   macro_noise_vol
00:00004C4D   macro_voice
00:00004C55   macro_envelope_shape
00:00004C5A   macro_envelope
00:00004C62   macro_loop
00:00004C6B   macro_stop
00:00004C6F   macro_volume_same
00:00004C75   macro_vol_base
00:00004C7D   macro_vol_add
00:00004C89   macro_vol_add.nolimit
00:00004C8F   macro_vol_sub
00:00004C9A   macro_vol_sub.nolimit
00:00004C9D   _macro_set_volume
00:00004CAA   _macro_set_volume.skip2
00:00004CB4   _macro_set_volume.skip
00:00004CB8   _macro_end
00:00004CCE   _macro_end.skip
00:00004CE9 X _wrap
00:00004CF5 X _wrap_highcheck
00:00004D1C   _wrap_lowcheck
00:00004D3F   _wrap_skip
00:00004D4C   _wrap_PSG
00:00004D4E   process_noNoteActive
00:00004D53 X process_noNoteActive.fm
00:00004D59   process_noNoteActive.psg
00:00004D5E   process_cmd0_arpeggio
00:00004D7B   process_cmd0_arpeggio.skip
00:00004D82   process_cmd0_arpeggio.nextNote
00:00004DA4   process_cmd0_arpeggio.skip1
00:00004DBE   process_cmd0_arpeggio.zero
00:00004DC4   process_cmd0_arpeggio.skip2
00:00004DCF   process_cmd1_port_up
00:00004DE1   process_cmd2_port_down
00:00004DF3   process_cmd3_port_tone
00:00004E01 X process_cmd3_add
00:00004E09   process_cmd3_add.skip
00:00004E14   process_cmd3_sub
00:00004E29   process_cmd3_stop
00:00004E34   process_cmd8_tremolo
00:00004E52   process_cmd4_vibrato_extended
00:00004E57   process_cmd4_vibrato
00:00004E59   process_cmd4_vibrato.ext
00:00004E69 X process_cmd4_vibrato.neg
00:00004E7F   process_cmd4_vibrato.pos
00:00004E84   process_cmd4_vibrato.zero
00:00004E8E   process_cmd5_vibrato_port_tone
00:00004E94   process_cmd6_vibrato_vol
00:00004E9A   process_cmd7_vol_slide
00:00004EA0   process_cmdasub
00:00004EB5 X process_cmda_dec
00:00004EBD   process_cmda_inc
00:00004EC6   process_cmd9_note_cut
00:00004ED3   process_cmd10_note_delay
00:00004EE6   process_drum
00:00004EF1   process_drum.yes
00:00004EF5   _process_drum_loop
00:00004EFE   _drum_stop
00:00004F06   _drum_vol_bd
00:00004F0E   _drum_vol_sn
00:00004F1D   _drum_vol_hh
00:00004F2C   _drum_vol_snhh
00:00004F34   _drum_vol_cy
00:00004F43   _drum_vol_tt
00:00004F52   _drum_vol_cytt
00:00004F5A   _drum_note_bd
00:00004F67   _drum_tone_bd
00:00004F74   _drum_note_snhh
00:00004F81   _drum_tone_snhh
00:00004F91   _drum_note_cytt
00:00004F9E   _drum_tone_cytt
00:00004FAE   _drum_percussion
00:00004FB3 X _drum_percussion.end
00:00004FB8   replay_route
00:00004FCC   _ptAY_noEnv
00:00004FF4   _ptAY_loop
00:00005007 X route_FM
00:00005014   route_FM.skipcount
00:00005026   route_FM.voiceloop
00:00005031   route_FM.skipvoicereg
00:00005035   route_FM.channels
00:0000503B   route_FM.channel_loop
00:00005041 X route_FM.keyOnSwitch
00:00005054   route_FM.noKeyOnSwitch
00:00005080   route_FM.continue
00:00005083 X route_FM.rythm
00:0000509A X route_FM.notActive
00:000050A1   _writeFM
00:000050A9   _writeFM_cont
00:000050AD   _writeFM_data
00:000050B7   _writeFM_R800
00:000050BD   _writeFM_R800.loop_long
00:000050CD   _writeFM_R800.loop_short
00:000050D6   _writeFM_R800_cont
00:000050E0   _writeFM_data_R800
00:000050E5   _writeFM_data_R800.loop_long
00:00005131   _VOLUME_TABLE_PSG
00:00005271   _VOLUME_TABLE_FM
00:00005371   TRACK_ToneTable_PSG
00:00005431   TRACK_ToneTable_FM
00:000054F1   demo_song
00:00005519   demo_song.restart
00:0000553D   demo_song.customvoice_start
00:0000554D   demo_song.drummacro_start
00:00005555   demo_song.drum_00
00:00005562   demo_song.drum_02
00:00005574   demo_song.drum_04
00:0000557C   demo_song.drum_06
00:00005584   demo_song.instrument_start
00:00005598   demo_song.instrument_00
00:0000559F   demo_song.instrument_01
00:000055A6   demo_song.instrument_02
00:000055D7   demo_song.instrument_03
00:000055DE   demo_song.instrument_04
00:00005602   demo_song.instrument_05
00:00005642   demo_song.instrument_06
00:0000568C   demo_song.instrument_07
00:000056A3   demo_song.instrument_08
00:000056C6   demo_song.instrument_09
00:000056CE   demo_song.track_000
00:00005742   demo_song.track_001
00:00005781   demo_song.track_002
00:000057BE   demo_song.track_003
00:000057C3   demo_song.track_005
00:00005802   demo_song.track_006
00:0000581E   demo_song.track_007
00:0000587C   demo_song.track_008
00:000058F0   demo_song.track_009
00:0000592D   demo_song.track_010
00:00005968   demo_song.track_011
00:0000596A   demo_song.track_013
00:000059A7   demo_song.track_014
00:000059C3   demo_song.track_015
00:00005A27   demo_song.track_018
00:00005A62   demo_song.track_019
00:00005AA4   demo_song.track_020
00:00005AE8   demo_song.track_023
00:00005B44   demo_song.track_024
00:00005BB6   demo_song.track_027
00:00005BF5   demo_song.track_028
00:00005C33   demo_song.track_031
00:FFFFFFEF   TRACK_Instrument
00:FFFFFFF0   TRACK_Command
00:FFFFFFF1   TRACK_MacroPointer
00:FFFFFFF3   TRACK_MacroStart
00:FFFFFFF5 X TRACK_MacroRestart
00:FFFFFFF6   TRACK_Note
00:FFFFFFF7   TRACK_Volume
00:FFFFFFF8   TRACK_Voice
00:FFFFFFF9   TRACK_Flags
00:FFFFFFFA X TRACK_empty
00:FFFFFFFB   TRACK_ToneAdd
00:FFFFFFFD   TRACK_VolumeAdd
00:FFFFFFFE   TRACK_Noise
00:FFFFFFFF   TRACK_cmd_VolumeAdd
00:00000000   TRACK_cmd_ToneSlideAdd
00:00000002   TRACK_cmd_ToneAdd
00:00000004   TRACK_cmd_detune
00:00000006   TRACK_cmd_0
00:00000007   TRACK_cmd_1
00:00000008   TRACK_cmd_2
00:00000009   TRACK_cmd_3
00:0000000A   TRACK_cmd_4_depth
00:0000000C   TRACK_cmd_4_step
00:0000000D   TRACK_cmd_NoteAdd
00:0000000E   TRACK_cmd_A
00:0000000F X TRACK_cmd_B
00:00000010   TRACK_cmd_E
00:00000011   TRACK_Timer
00:00000012   TRACK_Step
00:00000013   TRACK_Delay
00:00000014   TRACK_prevDelay
00:00000015 X TRACK_cmd_A_add
00:00000027   TRACK_REC_SIZE
00:00000000   B_TRGNOT
00:00000001   B_ACTNOT
00:00000002 X B_TRGENV
00:00000003   B_TRGCMD
00:00000004   B_KEYON
00:00000005   B_SUST
00:00000006 X B_TRGVOI
00:00000007   B_PSGFM
00:0000C000   _SP_Storage
00:0000C002   replay_trigger
00:0000C003   replay_mainPSGvol
00:0000C005   replay_mainFMvol
00:0000C007   replay_voicebase
00:0000C009   replay_drumbase
00:0000C00B   replay_insbase
00:0000C00D   TRACK_pointer1
00:0000C00F   TRACK_pointer2
00:0000C011   TRACK_pointer3
00:0000C013   TRACK_pointer4
00:0000C015   TRACK_pointer5
00:0000C017   TRACK_pointer6
00:0000C019   TRACK_pointer7
00:0000C01B   TRACK_pointer8
00:0000C01D   replay_orderpointer
00:0000C01F   replay_speed
00:0000C020   replay_speed_subtimer
00:0000C021   replay_speed_timer
00:0000C022   replay_mode
00:0000C023   replay_chan_setup
00:0000C024   replay_arp_speed
00:0000C025   replay_fade
00:0000C026   replay_fade_timer
00:0000C027   replay_fade_vol
00:0000C028   replay_previous_note
00:0000C029   replay_mainvol
00:0000C02B   replay_softvoice
00:0000C02C   FM_softvoice_req
00:0000C02D   replay_tonetable
00:0000C02F   r800
00:0000C030   count_low
00:0000C031   equalization_freq
00:0000C032   equalization_cnt
00:0000C033   TRACK_Chan1
00:0000C05A   TRACK_Chan2
00:0000C081   TRACK_Chan3
00:0000C0A8   TRACK_Chan4
00:0000C0CF   TRACK_Chan5
00:0000C0F6   TRACK_Chan6
00:0000C11D   TRACK_Chan7
00:0000C144   TRACK_Chan8
00:0000C16B X REGISTERS_START
00:0000C16B   PSG_registers
00:0000C16B   PSG_regToneA
00:0000C16D   PSG_regToneB
00:0000C16F   PSG_regToneC
00:0000C171   replay_noise
00:0000C171 X PSG_regNOISE
00:0000C172   PSG_regMIXER
00:0000C173   PSG_regVOLA
00:0000C174   PSG_regVOLB
00:0000C175   PSG_regVOLC
00:0000C176   PSG_regEnvL
00:0000C177   PSG_regEnvH
00:0000C178   PSG_regEnvShape
00:0000C179   FM_Voicereg
00:0000C189   FM_Registers
00:0000C189   FM_regToneA
00:0000C18B X FM_regToneAb
00:0000C18D   FM_regVOLA
00:0000C18E X FM_regVOLAb
00:0000C18F   FM_regToneB
00:0000C191 X FM_regToneBb
00:0000C193   FM_regVOLB
00:0000C194 X FM_regVOLBb
00:0000C195   FM_regToneC
00:0000C197 X FM_regToneCb
00:0000C199   FM_regVOLC
00:0000C19A X FM_regVOLCb
00:0000C19B   FM_regToneD
00:0000C19D X FM_regToneDb
00:0000C19F   FM_regVOLD
00:0000C1A0 X FM_regVOLDb
00:0000C1A1   FM_regToneE
00:0000C1A3 X FM_regToneEb
00:0000C1A5   FM_regVOLE
00:0000C1A6 X FM_regVOLEb
00:0000C1A7   FM_regToneF
00:0000C1A9 X FM_regToneFb
00:0000C1AB   FM_regVOLF
00:0000C1AC X FM_regVOLFb
00:0000C1AD   DRUM_regToneBD
00:0000C1AF X DRUM_regToneBDb
00:0000C1B1   DRUM_regVolBD
00:0000C1B2 X DRUM_regVolBDb
00:0000C1B3   DRUM_regToneSH
00:0000C1B5 X DRUM_regToneSHb
00:0000C1B7   DRUM_regVolSH
00:0000C1B8 X DRUM_regVolSHb
00:0000C1B9   DRUM_regToneCT
00:0000C1BB X DRUM_regToneCTb
00:0000C1BD   DRUM_regVolCT
00:0000C1BE X DRUM_regVolCTb
00:0000C1BF   FM_DRUM
00:0000C1C0 X FM_DRUMb
00:0000C1C1   FM_DRUM_ACTIVE
00:0000C1C2   FM_DRUM_MACRO
00:0000C1C4   FM_regMIXER
00:0000C1C5 X REGISTERS_END


 Output: ttplayFM.rom
-------------------------------------------------

 Page: 00
  Org: 00004000  Size: 00008000  Used: 00001C97

   Address   Length Align   Label
   00004000    7319         initmain
   00005C97   25449       <empty>
